<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>19 Working with Unstructured Data | Adventures in Data Science</title>
  <meta name="description" content="19 Working with Unstructured Data | Adventures in Data Science" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="19 Working with Unstructured Data | Adventures in Data Science" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://ucdavisdatalab.github.io/adventures_in_data_science/" />
  
  
  <meta name="github-repo" content="ucdavisdatalab/adventures_in_data_science" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="19 Working with Unstructured Data | Adventures in Data Science" />
  
  
  

<meta name="author" content="Dr. Carl G. Stahmer" />
<meta name="author" content="Dr. Pamela L. Reynolds" />
<meta name="author" content="Dr. Tyler Shoemaker" />
<meta name="author" content="Carrie Alexander" />
<meta name="author" content="Arthur Koehl" />
<meta name="author" content="Nick Ulle" />
<meta name="author" content="Jared Joseph" />
<meta name="author" content="Dr. Wesley Brooks" />


<meta name="date" content="2021-03-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-forensics.html"/>

<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>
<link href="libs/vis-4.20.1/vis.css" rel="stylesheet" />
<script src="libs/vis-4.20.1/vis.min.js"></script>
<script src="libs/visNetwork-binding-2.0.9/visNetwork.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://datalab.ucdavis.edu/">
  <img src="img/datalab-logo-full-color-rgb.png" style="height: 100%; width: 100%; object-fit: contain" />
</a></li>
<li><a href="./" style="font-size: 18px">Adventures in Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="1" data-path="working-with-the-command-line.html"><a href="working-with-the-command-line.html"><i class="fa fa-check"></i><b>1</b> Working with the Command Line</a>
<ul>
<li class="chapter" data-level="1.1" data-path="working-with-the-command-line.html"><a href="working-with-the-command-line.html#interacting-with-the-command-line"><i class="fa fa-check"></i><b>1.1</b> Interacting with the Command Line</a></li>
<li class="chapter" data-level="1.2" data-path="working-with-the-command-line.html"><a href="working-with-the-command-line.html#common-command-line-commands"><i class="fa fa-check"></i><b>1.2</b> Common Command Line Commands</a></li>
<li class="chapter" data-level="1.3" data-path="working-with-the-command-line.html"><a href="working-with-the-command-line.html#command-line-text-editors"><i class="fa fa-check"></i><b>1.3</b> Command Line Text Editors</a></li>
<li class="chapter" data-level="1.4" data-path="working-with-the-command-line.html"><a href="working-with-the-command-line.html#basic-vim-commands"><i class="fa fa-check"></i><b>1.4</b> Basic Vim Commands</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html"><i class="fa fa-check"></i><b>2</b> Introduction to Version Control</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#what-is-version-control"><i class="fa fa-check"></i><b>2.1</b> What is Version Control?</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#software-assisted-version-control"><i class="fa fa-check"></i><b>2.2</b> Software Assisted Version Control</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#local-vs-server-based-version-control"><i class="fa fa-check"></i><b>2.3</b> Local vs Server Based Version Control</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#central-version-control-systems"><i class="fa fa-check"></i><b>2.4</b> Central Version Control Systems</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#distributed-version-control-systems"><i class="fa fa-check"></i><b>2.5</b> Distributed Version Control Systems</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#the-best-of-both-worlds"><i class="fa fa-check"></i><b>2.6</b> The Best of Both Worlds</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#vcs-and-the-computer-file-system"><i class="fa fa-check"></i><b>2.7</b> VCS and the Computer File System</a></li>
<li class="chapter" data-level="2.8" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#how-computers-store-and-access-information"><i class="fa fa-check"></i><b>2.8</b> How Computers Store and Access Information</a></li>
<li class="chapter" data-level="2.9" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#how-vcs-manage-your-files"><i class="fa fa-check"></i><b>2.9</b> How VCS Manage Your Files</a></li>
<li class="chapter" data-level="2.10" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#graph-based-data-management"><i class="fa fa-check"></i><b>2.10</b> Graph-Based Data Management</a></li>
<li class="chapter" data-level="2.11" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#additional-resources"><i class="fa fa-check"></i><b>2.11</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction-to-git.html"><a href="introduction-to-git.html"><i class="fa fa-check"></i><b>3</b> Introduction to Git</a>
<ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#save-stage-commit"><i class="fa fa-check"></i><b>3.1</b> Save, Stage, Commit</a></li>
<li class="chapter" data-level="3.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#creating-your-first-repo"><i class="fa fa-check"></i><b>3.2</b> Creating Your First Repo</a></li>
<li class="chapter" data-level="3.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#checking-the-status-of-a-repo"><i class="fa fa-check"></i><b>3.3</b> Checking the Status of a Repo</a></li>
<li class="chapter" data-level="3.4" data-path="introduction-to-git.html"><a href="introduction-to-git.html#version-of-a-file"><i class="fa fa-check"></i><b>3.4</b> Version of a File</a></li>
<li class="chapter" data-level="3.5" data-path="introduction-to-git.html"><a href="introduction-to-git.html#view-a-history-of-your-commits"><i class="fa fa-check"></i><b>3.5</b> View a History of Your Commits</a></li>
<li class="chapter" data-level="3.6" data-path="introduction-to-git.html"><a href="introduction-to-git.html#comparing-commits"><i class="fa fa-check"></i><b>3.6</b> Comparing Commits</a></li>
<li class="chapter" data-level="3.7" data-path="introduction-to-git.html"><a href="introduction-to-git.html#comparing-files"><i class="fa fa-check"></i><b>3.7</b> Comparing Files</a></li>
<li class="chapter" data-level="3.8" data-path="introduction-to-git.html"><a href="introduction-to-git.html#to-view-an-earlier-commit"><i class="fa fa-check"></i><b>3.8</b> To View an Earlier Commit</a></li>
<li class="chapter" data-level="3.9" data-path="introduction-to-git.html"><a href="introduction-to-git.html#undoing-things"><i class="fa fa-check"></i><b>3.9</b> Undoing Things</a></li>
<li class="chapter" data-level="3.10" data-path="introduction-to-git.html"><a href="introduction-to-git.html#when-things-go-wrong"><i class="fa fa-check"></i><b>3.10</b> When Things go Wrong!</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="git-branching.html"><a href="git-branching.html"><i class="fa fa-check"></i><b>4</b> Git Branching</a>
<ul>
<li class="chapter" data-level="4.1" data-path="git-branching.html"><a href="git-branching.html#merging-branches"><i class="fa fa-check"></i><b>4.1</b> Merging Branches</a></li>
<li class="chapter" data-level="4.2" data-path="git-branching.html"><a href="git-branching.html#branching-workflows"><i class="fa fa-check"></i><b>4.2</b> Branching Workflows</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>5</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="5.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#learning-objectives"><i class="fa fa-check"></i><b>5.1</b> Learning objectives</a></li>
<li class="chapter" data-level="5.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#before-we-start"><i class="fa fa-check"></i><b>5.2</b> Before We Start</a></li>
<li class="chapter" data-level="5.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#mathematical-operations"><i class="fa fa-check"></i><b>5.3</b> Mathematical Operations</a></li>
<li class="chapter" data-level="5.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#help"><i class="fa fa-check"></i><b>5.4</b> HELP!</a></li>
<li class="chapter" data-level="5.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#calls"><i class="fa fa-check"></i><b>5.5</b> Calls</a></li>
<li class="chapter" data-level="5.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#variables"><i class="fa fa-check"></i><b>5.6</b> Variables</a></li>
<li class="chapter" data-level="5.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-types-and-classes"><i class="fa fa-check"></i><b>5.7</b> Data Types and Classes</a></li>
<li class="chapter" data-level="5.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#vectors"><i class="fa fa-check"></i><b>5.8</b> Vectors</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basic-statistics-on-vectors"><i class="fa fa-check"></i><b>5.8.1</b> Basic Statistics on Vectors</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="introduction-to-r.html"><a href="introduction-to-r.html#matrices-arrays-lists"><i class="fa fa-check"></i><b>5.9</b> Matrices, Arrays &amp; Lists</a></li>
<li class="chapter" data-level="5.10" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-frames"><i class="fa fa-check"></i><b>5.10</b> Data Frames</a>
<ul>
<li class="chapter" data-level="5.10.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#inspecting-data-frames"><i class="fa fa-check"></i><b>5.10.1</b> Inspecting Data Frames</a></li>
</ul></li>
<li class="chapter" data-level="5.11" data-path="introduction-to-r.html"><a href="introduction-to-r.html#subsetting"><i class="fa fa-check"></i><b>5.11</b> Subsetting</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="control-structures.html"><a href="control-structures.html"><i class="fa fa-check"></i><b>6</b> Control Structures</a>
<ul>
<li class="chapter" data-level="6.1" data-path="control-structures.html"><a href="control-structures.html#if-statement"><i class="fa fa-check"></i><b>6.1</b> <em>If</em> Statement</a></li>
<li class="chapter" data-level="6.2" data-path="control-structures.html"><a href="control-structures.html#relationship-operators"><i class="fa fa-check"></i><b>6.2</b> Relationship Operators</a></li>
<li class="chapter" data-level="6.3" data-path="control-structures.html"><a href="control-structures.html#if-else-statement"><i class="fa fa-check"></i><b>6.3</b> <em>If Else</em> Statement</a></li>
<li class="chapter" data-level="6.4" data-path="control-structures.html"><a href="control-structures.html#ifelse-statement"><i class="fa fa-check"></i><b>6.4</b> <em>ifelse</em> Statement</a></li>
<li class="chapter" data-level="6.5" data-path="control-structures.html"><a href="control-structures.html#the-switch-statement"><i class="fa fa-check"></i><b>6.5</b> The <em>switch</em> Statement</a></li>
<li class="chapter" data-level="6.6" data-path="control-structures.html"><a href="control-structures.html#the-which-statement"><i class="fa fa-check"></i><b>6.6</b> The <em>which</em> Statement</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="iterating-loops.html"><a href="iterating-loops.html"><i class="fa fa-check"></i><b>7</b> Iterating (Loops)</a>
<ul>
<li class="chapter" data-level="7.1" data-path="iterating-loops.html"><a href="iterating-loops.html#for-i-in-x-loops"><i class="fa fa-check"></i><b>7.1</b> For <em>i</em> in <em>x</em> Loops</a></li>
<li class="chapter" data-level="7.2" data-path="iterating-loops.html"><a href="iterating-loops.html#while-loops"><i class="fa fa-check"></i><b>7.2</b> <em>While</em> Loops</a></li>
<li class="chapter" data-level="7.3" data-path="iterating-loops.html"><a href="iterating-loops.html#repeat-loops"><i class="fa fa-check"></i><b>7.3</b> <em>Repeat</em> Loops</a></li>
<li class="chapter" data-level="7.4" data-path="iterating-loops.html"><a href="iterating-loops.html#break-and-next"><i class="fa fa-check"></i><b>7.4</b> <em>Break</em> and <em>Next</em></a></li>
<li class="chapter" data-level="7.5" data-path="iterating-loops.html"><a href="iterating-loops.html#iterating-data.frame-rows-in-r"><i class="fa fa-check"></i><b>7.5</b> Iterating Data.Frame Rows in R</a></li>
<li class="chapter" data-level="7.6" data-path="iterating-loops.html"><a href="iterating-loops.html#lapply"><i class="fa fa-check"></i><b>7.6</b> <em>lapply()</em></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="packages-and-functions.html"><a href="packages-and-functions.html"><i class="fa fa-check"></i><b>8</b> Packages and Functions</a>
<ul>
<li class="chapter" data-level="8.1" data-path="packages-and-functions.html"><a href="packages-and-functions.html#learning-objectives-1"><i class="fa fa-check"></i><b>8.1</b> Learning objectives</a></li>
<li class="chapter" data-level="8.2" data-path="packages-and-functions.html"><a href="packages-and-functions.html#what-is-a-function"><i class="fa fa-check"></i><b>8.2</b> What is a function?</a></li>
<li class="chapter" data-level="8.3" data-path="packages-and-functions.html"><a href="packages-and-functions.html#what-is-the-basic-syntax-of-a-function-in-r"><i class="fa fa-check"></i><b>8.3</b> What is the basic syntax of a function in R?</a></li>
<li class="chapter" data-level="8.4" data-path="packages-and-functions.html"><a href="packages-and-functions.html#step-1-building-a-function"><i class="fa fa-check"></i><b>8.4</b> Step 1: Building a function</a></li>
<li class="chapter" data-level="8.5" data-path="packages-and-functions.html"><a href="packages-and-functions.html#step-2-calling-the-function"><i class="fa fa-check"></i><b>8.5</b> Step 2: Calling the function</a></li>
<li class="chapter" data-level="8.6" data-path="packages-and-functions.html"><a href="packages-and-functions.html#a-function-can-have-more-than-one-argument"><i class="fa fa-check"></i><b>8.6</b> A function can have more than one argument</a></li>
<li class="chapter" data-level="8.7" data-path="packages-and-functions.html"><a href="packages-and-functions.html#using-a-package-and-function-to-graph-data-and-export-a-.png"><i class="fa fa-check"></i><b>8.7</b> Using a package and function to graph data and export a .png</a></li>
<li class="chapter" data-level="8.8" data-path="packages-and-functions.html"><a href="packages-and-functions.html#saving-functions-and-calling-them-from-another-file"><i class="fa fa-check"></i><b>8.8</b> Saving functions and calling them from another file</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="file-input-and-output.html"><a href="file-input-and-output.html"><i class="fa fa-check"></i><b>9</b> File Input and Output</a>
<ul>
<li class="chapter" data-level="9.1" data-path="file-input-and-output.html"><a href="file-input-and-output.html#objectives"><i class="fa fa-check"></i><b>9.1</b> Objectives</a></li>
<li class="chapter" data-level="9.2" data-path="file-input-and-output.html"><a href="file-input-and-output.html#basic-idea"><i class="fa fa-check"></i><b>9.2</b> Basic Idea</a></li>
<li class="chapter" data-level="9.3" data-path="file-input-and-output.html"><a href="file-input-and-output.html#file-formats"><i class="fa fa-check"></i><b>9.3</b> File Formats</a></li>
<li class="chapter" data-level="9.4" data-path="file-input-and-output.html"><a href="file-input-and-output.html#filesystems-and-paths"><i class="fa fa-check"></i><b>9.4</b> Filesystems and Paths</a></li>
<li class="chapter" data-level="9.5" data-path="file-input-and-output.html"><a href="file-input-and-output.html#get-and-set-working-directory"><i class="fa fa-check"></i><b>9.5</b> get and set working directory</a></li>
<li class="chapter" data-level="9.6" data-path="file-input-and-output.html"><a href="file-input-and-output.html#saving-and-loading-r-data"><i class="fa fa-check"></i><b>9.6</b> saving and loading R data</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="file-input-and-output.html"><a href="file-input-and-output.html#rds"><i class="fa fa-check"></i><b>9.6.1</b> rds</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="file-input-and-output.html"><a href="file-input-and-output.html#reading-and-writing-text-data"><i class="fa fa-check"></i><b>9.7</b> Reading and Writing Text data</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="file-input-and-output.html"><a href="file-input-and-output.html#tabular-data"><i class="fa fa-check"></i><b>9.7.1</b> tabular data</a></li>
<li class="chapter" data-level="9.7.2" data-path="file-input-and-output.html"><a href="file-input-and-output.html#read-and-write-table"><i class="fa fa-check"></i><b>9.7.2</b> read and write table</a></li>
<li class="chapter" data-level="9.7.3" data-path="file-input-and-output.html"><a href="file-input-and-output.html#csv-format"><i class="fa fa-check"></i><b>9.7.3</b> CSV format</a></li>
<li class="chapter" data-level="9.7.4" data-path="file-input-and-output.html"><a href="file-input-and-output.html#non-tabular-data"><i class="fa fa-check"></i><b>9.7.4</b> Non tabular data</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="file-input-and-output.html"><a href="file-input-and-output.html#urls-as-files"><i class="fa fa-check"></i><b>9.8</b> URLS as files</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html"><i class="fa fa-check"></i><b>10</b> Strings and Regular Expressions</a>
<ul>
<li class="chapter" data-level="10.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#printing-output"><i class="fa fa-check"></i><b>10.1</b> Printing Output</a></li>
<li class="chapter" data-level="10.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#escape-sequences"><i class="fa fa-check"></i><b>10.2</b> Escape Sequences</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#raw-strings"><i class="fa fa-check"></i><b>10.2.1</b> Raw Strings</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#character-encodings"><i class="fa fa-check"></i><b>10.3</b> Character Encodings</a></li>
<li class="chapter" data-level="10.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#the-tidyverse"><i class="fa fa-check"></i><b>10.4</b> The Tidyverse</a></li>
<li class="chapter" data-level="10.5" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#the-stringr-package"><i class="fa fa-check"></i><b>10.5</b> The stringr Package</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#splitting-strings"><i class="fa fa-check"></i><b>10.5.1</b> Splitting Strings</a></li>
<li class="chapter" data-level="10.5.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#replacing-parts-of-strings"><i class="fa fa-check"></i><b>10.5.2</b> Replacing Parts of Strings</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#regular-expressions"><i class="fa fa-check"></i><b>10.6</b> Regular Expressions</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#the-wildcard"><i class="fa fa-check"></i><b>10.6.1</b> The Wildcard</a></li>
<li class="chapter" data-level="10.6.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#escape-sequences-1"><i class="fa fa-check"></i><b>10.6.2</b> Escape Sequences</a></li>
<li class="chapter" data-level="10.6.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#anchors"><i class="fa fa-check"></i><b>10.6.3</b> Anchors</a></li>
<li class="chapter" data-level="10.6.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#character-classes"><i class="fa fa-check"></i><b>10.6.4</b> Character Classes</a></li>
<li class="chapter" data-level="10.6.5" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#quantifiers"><i class="fa fa-check"></i><b>10.6.5</b> Quantifiers</a></li>
<li class="chapter" data-level="10.6.6" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#groups"><i class="fa fa-check"></i><b>10.6.6</b> Groups</a></li>
<li class="chapter" data-level="10.6.7" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#extracting-matches"><i class="fa fa-check"></i><b>10.6.7</b> Extracting Matches</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>11</b> Data Structures</a>
<ul>
<li class="chapter" data-level="11.1" data-path="data-structures.html"><a href="data-structures.html#tabular-data-1"><i class="fa fa-check"></i><b>11.1</b> Tabular Data</a></li>
<li class="chapter" data-level="11.2" data-path="data-structures.html"><a href="data-structures.html#tree-document-data-structures"><i class="fa fa-check"></i><b>11.2</b> Tree / Document Data Structures</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="data-structures.html"><a href="data-structures.html#structuring-data-as-xml"><i class="fa fa-check"></i><b>11.2.1</b> Structuring Data as XML</a></li>
<li class="chapter" data-level="11.2.2" data-path="data-structures.html"><a href="data-structures.html#structuring-data-as-json"><i class="fa fa-check"></i><b>11.2.2</b> Structuring Data as JSON</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="data-structures.html"><a href="data-structures.html#relational-databases"><i class="fa fa-check"></i><b>11.3</b> Relational Databases</a></li>
<li class="chapter" data-level="11.4" data-path="data-structures.html"><a href="data-structures.html#non-hierarchical-relational-data"><i class="fa fa-check"></i><b>11.4</b> Non-Hierarchical Relational Data</a></li>
<li class="chapter" data-level="11.5" data-path="data-structures.html"><a href="data-structures.html#geospatial-data"><i class="fa fa-check"></i><b>11.5</b> Geospatial Data</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="how-the-web-works.html"><a href="how-the-web-works.html"><i class="fa fa-check"></i><b>12</b> How the Web Works</a>
<ul>
<li class="chapter" data-level="12.1" data-path="how-the-web-works.html"><a href="how-the-web-works.html#client-server-architecture"><i class="fa fa-check"></i><b>12.1</b> Client-Server Architecture</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="how-the-web-works.html"><a href="how-the-web-works.html#communication-between-clients-and-servers"><i class="fa fa-check"></i><b>12.1.1</b> Communication Between Clients and Servers</a></li>
<li class="chapter" data-level="12.1.2" data-path="how-the-web-works.html"><a href="how-the-web-works.html#domain-name-resolution"><i class="fa fa-check"></i><b>12.1.2</b> Domain Name Resolution</a></li>
<li class="chapter" data-level="12.1.3" data-path="how-the-web-works.html"><a href="how-the-web-works.html#request-routing"><i class="fa fa-check"></i><b>12.1.3</b> Request Routing</a></li>
<li class="chapter" data-level="12.1.4" data-path="how-the-web-works.html"><a href="how-the-web-works.html#the-server-response"><i class="fa fa-check"></i><b>12.1.4</b> The Server Response</a></li>
<li class="chapter" data-level="12.1.5" data-path="how-the-web-works.html"><a href="how-the-web-works.html#internet-transfer-protocols"><i class="fa fa-check"></i><b>12.1.5</b> Internet Transfer Protocols</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="how-the-web-works.html"><a href="how-the-web-works.html#understanding-urls"><i class="fa fa-check"></i><b>12.2</b> Understanding URLs</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="how-the-web-works.html"><a href="how-the-web-works.html#dynamic-files"><i class="fa fa-check"></i><b>12.2.1</b> Dynamic Files</a></li>
<li class="chapter" data-level="12.2.2" data-path="how-the-web-works.html"><a href="how-the-web-works.html#query-strings"><i class="fa fa-check"></i><b>12.2.2</b> Query Strings</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="web-scraping.html"><a href="web-scraping.html"><i class="fa fa-check"></i><b>13</b> Web Scraping</a>
<ul>
<li class="chapter" data-level="13.1" data-path="web-scraping.html"><a href="web-scraping.html#getting-data-from-the-web"><i class="fa fa-check"></i><b>13.1</b> Getting Data from the Web</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="web-scraping.html"><a href="web-scraping.html#whats-in-a-web-page"><i class="fa fa-check"></i><b>13.1.1</b> What’s in a Web Page?</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="web-scraping.html"><a href="web-scraping.html#rs-xml-parsers"><i class="fa fa-check"></i><b>13.2</b> R’s XML Parsers</a></li>
<li class="chapter" data-level="13.3" data-path="web-scraping.html"><a href="web-scraping.html#xpath"><i class="fa fa-check"></i><b>13.3</b> XPath</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="web-scraping.html"><a href="web-scraping.html#predicates"><i class="fa fa-check"></i><b>13.3.1</b> Predicates</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="web-scraping.html"><a href="web-scraping.html#the-web-scraping-workflow"><i class="fa fa-check"></i><b>13.4</b> The Web Scraping Workflow</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="web-scraping.html"><a href="web-scraping.html#being-polite"><i class="fa fa-check"></i><b>13.4.1</b> Being Polite</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="web-scraping.html"><a href="web-scraping.html#case-study-ca-cities"><i class="fa fa-check"></i><b>13.5</b> Case Study: CA Cities</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="web-scraping.html"><a href="web-scraping.html#data-cleaning"><i class="fa fa-check"></i><b>13.5.1</b> Data Cleaning</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="web-scraping.html"><a href="web-scraping.html#case-study-the-ca-aggie"><i class="fa fa-check"></i><b>13.6</b> Case Study: The CA Aggie</a></li>
<li class="chapter" data-level="13.7" data-path="web-scraping.html"><a href="web-scraping.html#css-selectors"><i class="fa fa-check"></i><b>13.7</b> CSS Selectors</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="optical-character-recognition.html"><a href="optical-character-recognition.html"><i class="fa fa-check"></i><b>14</b> Optical Character Recognition</a>
<ul>
<li class="chapter" data-level="14.1" data-path="optical-character-recognition.html"><a href="optical-character-recognition.html#loading-page-images"><i class="fa fa-check"></i><b>14.1</b> Loading Page Images</a></li>
<li class="chapter" data-level="14.2" data-path="optical-character-recognition.html"><a href="optical-character-recognition.html#running-ocr"><i class="fa fa-check"></i><b>14.2</b> Running OCR</a></li>
<li class="chapter" data-level="14.3" data-path="optical-character-recognition.html"><a href="optical-character-recognition.html#accuracy"><i class="fa fa-check"></i><b>14.3</b> Accuracy</a></li>
<li class="chapter" data-level="14.4" data-path="optical-character-recognition.html"><a href="optical-character-recognition.html#unreadable-text"><i class="fa fa-check"></i><b>14.4</b> Unreadable Text</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="data-visualization.html"><a href="data-visualization.html"><i class="fa fa-check"></i><b>15</b> Data Visualization</a>
<ul>
<li class="chapter" data-level="15.1" data-path="data-visualization.html"><a href="data-visualization.html#factors"><i class="fa fa-check"></i><b>15.1</b> Factors</a></li>
<li class="chapter" data-level="15.2" data-path="data-visualization.html"><a href="data-visualization.html#r-graphics-overview"><i class="fa fa-check"></i><b>15.2</b> R Graphics Overview</a></li>
<li class="chapter" data-level="15.3" data-path="data-visualization.html"><a href="data-visualization.html#the-grammar-of-graphics"><i class="fa fa-check"></i><b>15.3</b> The Grammar of Graphics</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="data-visualization.html"><a href="data-visualization.html#making-a-plot"><i class="fa fa-check"></i><b>15.3.1</b> Making a Plot</a></li>
<li class="chapter" data-level="15.3.2" data-path="data-visualization.html"><a href="data-visualization.html#saving-plots"><i class="fa fa-check"></i><b>15.3.2</b> Saving Plots</a></li>
<li class="chapter" data-level="15.3.3" data-path="data-visualization.html"><a href="data-visualization.html#example-bar-plot"><i class="fa fa-check"></i><b>15.3.3</b> Example: Bar Plot</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="data-visualization.html"><a href="data-visualization.html#designing-a-visualization"><i class="fa fa-check"></i><b>15.4</b> Designing a Visualization</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="network-analysis.html"><a href="network-analysis.html"><i class="fa fa-check"></i><b>16</b> Network Analysis</a>
<ul>
<li class="chapter" data-level="16.1" data-path="network-analysis.html"><a href="network-analysis.html#overview-1"><i class="fa fa-check"></i><b>16.1</b> Overview</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="network-analysis.html"><a href="network-analysis.html#while-you-wait"><i class="fa fa-check"></i><b>16.1.1</b> While you wait</a></li>
<li class="chapter" data-level="16.1.2" data-path="network-analysis.html"><a href="network-analysis.html#learning-objectives-2"><i class="fa fa-check"></i><b>16.1.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="16.1.3" data-path="network-analysis.html"><a href="network-analysis.html#roadmap"><i class="fa fa-check"></i><b>16.1.3</b> Roadmap</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="network-analysis.html"><a href="network-analysis.html#what-is-network-analysis"><i class="fa fa-check"></i><b>16.2</b> What is Network Analysis</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="network-analysis.html"><a href="network-analysis.html#networks-in-research---social-sciences"><i class="fa fa-check"></i><b>16.2.1</b> Networks in research - Social Sciences</a></li>
<li class="chapter" data-level="16.2.2" data-path="network-analysis.html"><a href="network-analysis.html#networks-in-research---neuroscience"><i class="fa fa-check"></i><b>16.2.2</b> Networks in research - Neuroscience</a></li>
<li class="chapter" data-level="16.2.3" data-path="network-analysis.html"><a href="network-analysis.html#networks-in-research---chemistry"><i class="fa fa-check"></i><b>16.2.3</b> Networks in research - Chemistry</a></li>
<li class="chapter" data-level="16.2.4" data-path="network-analysis.html"><a href="network-analysis.html#networks-in-research---the-internet"><i class="fa fa-check"></i><b>16.2.4</b> Networks in research - The Internet</a></li>
<li class="chapter" data-level="16.2.5" data-path="network-analysis.html"><a href="network-analysis.html#networks-in-research---infrastructure"><i class="fa fa-check"></i><b>16.2.5</b> Networks in research - Infrastructure</a></li>
<li class="chapter" data-level="16.2.6" data-path="network-analysis.html"><a href="network-analysis.html#networks-in-research---security"><i class="fa fa-check"></i><b>16.2.6</b> Networks in research - Security</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="network-analysis.html"><a href="network-analysis.html#network-data"><i class="fa fa-check"></i><b>16.3</b> Network Data</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="network-analysis.html"><a href="network-analysis.html#edgelist"><i class="fa fa-check"></i><b>16.3.1</b> Edgelist</a></li>
<li class="chapter" data-level="16.3.2" data-path="network-analysis.html"><a href="network-analysis.html#adjacency-matrix"><i class="fa fa-check"></i><b>16.3.2</b> Adjacency Matrix</a></li>
<li class="chapter" data-level="16.3.3" data-path="network-analysis.html"><a href="network-analysis.html#edge-weights"><i class="fa fa-check"></i><b>16.3.3</b> Edge Weights</a></li>
<li class="chapter" data-level="16.3.4" data-path="network-analysis.html"><a href="network-analysis.html#attributes"><i class="fa fa-check"></i><b>16.3.4</b> Attributes</a></li>
<li class="chapter" data-level="16.3.5" data-path="network-analysis.html"><a href="network-analysis.html#create-an-example-network"><i class="fa fa-check"></i><b>16.3.5</b> Create an Example Network</a></li>
<li class="chapter" data-level="16.3.6" data-path="network-analysis.html"><a href="network-analysis.html#components"><i class="fa fa-check"></i><b>16.3.6</b> Components</a></li>
<li class="chapter" data-level="16.3.7" data-path="network-analysis.html"><a href="network-analysis.html#limitations-of-network-data"><i class="fa fa-check"></i><b>16.3.7</b> Limitations of Network Data</a></li>
<li class="chapter" data-level="16.3.8" data-path="network-analysis.html"><a href="network-analysis.html#projected-networks"><i class="fa fa-check"></i><b>16.3.8</b> Projected Networks</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="network-analysis.html"><a href="network-analysis.html#graph-level-properties"><i class="fa fa-check"></i><b>16.4</b> Graph Level Properties</a>
<ul>
<li class="chapter" data-level="16.4.1" data-path="network-analysis.html"><a href="network-analysis.html#directed-or-un-directed"><i class="fa fa-check"></i><b>16.4.1</b> Directed or Un-directed</a></li>
<li class="chapter" data-level="16.4.2" data-path="network-analysis.html"><a href="network-analysis.html#density"><i class="fa fa-check"></i><b>16.4.2</b> Density</a></li>
<li class="chapter" data-level="16.4.3" data-path="network-analysis.html"><a href="network-analysis.html#centralization"><i class="fa fa-check"></i><b>16.4.3</b> Centralization</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="network-analysis.html"><a href="network-analysis.html#node-level-properties"><i class="fa fa-check"></i><b>16.5</b> Node Level Properties</a>
<ul>
<li class="chapter" data-level="16.5.1" data-path="network-analysis.html"><a href="network-analysis.html#degree"><i class="fa fa-check"></i><b>16.5.1</b> Degree</a></li>
<li class="chapter" data-level="16.5.2" data-path="network-analysis.html"><a href="network-analysis.html#geodesic-distance"><i class="fa fa-check"></i><b>16.5.2</b> Geodesic Distance</a></li>
<li class="chapter" data-level="16.5.3" data-path="network-analysis.html"><a href="network-analysis.html#centrality"><i class="fa fa-check"></i><b>16.5.3</b> Centrality</a></li>
</ul></li>
<li class="chapter" data-level="16.6" data-path="network-analysis.html"><a href="network-analysis.html#network-workflow"><i class="fa fa-check"></i><b>16.6</b> Network Workflow</a></li>
<li class="chapter" data-level="16.7" data-path="network-analysis.html"><a href="network-analysis.html#network-tools"><i class="fa fa-check"></i><b>16.7</b> Network Tools</a>
<ul>
<li class="chapter" data-level="16.7.1" data-path="network-analysis.html"><a href="network-analysis.html#network-models"><i class="fa fa-check"></i><b>16.7.1</b> Network Models</a></li>
<li class="chapter" data-level="16.7.2" data-path="network-analysis.html"><a href="network-analysis.html#network-visualization"><i class="fa fa-check"></i><b>16.7.2</b> Network Visualization</a></li>
</ul></li>
<li class="chapter" data-level="16.8" data-path="network-analysis.html"><a href="network-analysis.html#references"><i class="fa fa-check"></i><b>16.8</b> References</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="statistics.html"><a href="statistics.html"><i class="fa fa-check"></i><b>17</b> Statistics</a>
<ul>
<li class="chapter" data-level="17.1" data-path="statistics.html"><a href="statistics.html#introduction"><i class="fa fa-check"></i><b>17.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="statistics.html"><a href="statistics.html#mice_pot-dataset"><i class="fa fa-check"></i><b>17.1.1</b> <code>mice_pot</code> dataset</a></li>
<li class="chapter" data-level="17.1.2" data-path="statistics.html"><a href="statistics.html#barnacles-dataset"><i class="fa fa-check"></i><b>17.1.2</b> <code>barnacles</code> dataset</a></li>
<li class="chapter" data-level="17.1.3" data-path="statistics.html"><a href="statistics.html#sample-and-population"><i class="fa fa-check"></i><b>17.1.3</b> Sample and population</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="statistics.html"><a href="statistics.html#uses-of-simulation"><i class="fa fa-check"></i><b>17.2</b> Uses of simulation</a></li>
<li class="chapter" data-level="17.3" data-path="statistics.html"><a href="statistics.html#mathematical-statistics"><i class="fa fa-check"></i><b>17.3</b> Mathematical statistics</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="statistics.html"><a href="statistics.html#law-of-large-numbers"><i class="fa fa-check"></i><b>17.3.1</b> Law of large numbers</a></li>
<li class="chapter" data-level="17.3.2" data-path="statistics.html"><a href="statistics.html#central-limit-theorem"><i class="fa fa-check"></i><b>17.3.2</b> Central limit theorem</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="statistics.html"><a href="statistics.html#statistical-inference"><i class="fa fa-check"></i><b>17.4</b> Statistical inference</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="statistics.html"><a href="statistics.html#confidence-intervals"><i class="fa fa-check"></i><b>17.4.1</b> Confidence intervals</a></li>
<li class="chapter" data-level="17.4.2" data-path="statistics.html"><a href="statistics.html#two-population-test"><i class="fa fa-check"></i><b>17.4.2</b> Two-population test</a></li>
<li class="chapter" data-level="17.4.3" data-path="statistics.html"><a href="statistics.html#hypothesis-tests-for-non-normal-data"><i class="fa fa-check"></i><b>17.4.3</b> Hypothesis tests for non-normal data</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="statistics.html"><a href="statistics.html#regression"><i class="fa fa-check"></i><b>17.5</b> Regression</a>
<ul>
<li class="chapter" data-level="17.5.1" data-path="statistics.html"><a href="statistics.html#fitting-a-regression-line"><i class="fa fa-check"></i><b>17.5.1</b> Fitting a regression line</a></li>
<li class="chapter" data-level="17.5.2" data-path="statistics.html"><a href="statistics.html#assumptions-and-diagnostics"><i class="fa fa-check"></i><b>17.5.2</b> Assumptions and diagnostics</a></li>
<li class="chapter" data-level="17.5.3" data-path="statistics.html"><a href="statistics.html#functions-for-inspecting-regression-fits"><i class="fa fa-check"></i><b>17.5.3</b> Functions for inspecting regression fits</a></li>
<li class="chapter" data-level="17.5.4" data-path="statistics.html"><a href="statistics.html#a-model-that-fails-diagnostics"><i class="fa fa-check"></i><b>17.5.4</b> A model that fails diagnostics</a></li>
<li class="chapter" data-level="17.5.5" data-path="statistics.html"><a href="statistics.html#predictions-and-variability"><i class="fa fa-check"></i><b>17.5.5</b> Predictions and variability</a></li>
</ul></li>
<li class="chapter" data-level="17.6" data-path="statistics.html"><a href="statistics.html#model-selection"><i class="fa fa-check"></i><b>17.6</b> Model selection</a></li>
<li class="chapter" data-level="17.7" data-path="statistics.html"><a href="statistics.html#cross-validation"><i class="fa fa-check"></i><b>17.7</b> Cross-validation</a></li>
<li class="chapter" data-level="17.8" data-path="statistics.html"><a href="statistics.html#references-1"><i class="fa fa-check"></i><b>17.8</b> References</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="data-forensics.html"><a href="data-forensics.html"><i class="fa fa-check"></i><b>18</b> Data Forensics</a>
<ul>
<li class="chapter" data-level="18.1" data-path="data-forensics.html"><a href="data-forensics.html#introduction-1"><i class="fa fa-check"></i><b>18.1</b> Introduction</a></li>
<li class="chapter" data-level="18.2" data-path="data-forensics.html"><a href="data-forensics.html#tidy-data"><i class="fa fa-check"></i><b>18.2</b> Tidy Data</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="data-forensics.html"><a href="data-forensics.html#columns-into-rows"><i class="fa fa-check"></i><b>18.2.1</b> Columns into Rows</a></li>
<li class="chapter" data-level="18.2.2" data-path="data-forensics.html"><a href="data-forensics.html#rows-into-columns"><i class="fa fa-check"></i><b>18.2.2</b> Rows into Columns</a></li>
<li class="chapter" data-level="18.2.3" data-path="data-forensics.html"><a href="data-forensics.html#separating-values"><i class="fa fa-check"></i><b>18.2.3</b> Separating Values</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="data-forensics.html"><a href="data-forensics.html#data-types"><i class="fa fa-check"></i><b>18.3</b> Data Types</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="data-forensics.html"><a href="data-forensics.html#dates"><i class="fa fa-check"></i><b>18.3.1</b> Dates</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="data-forensics.html"><a href="data-forensics.html#special-values"><i class="fa fa-check"></i><b>18.4</b> Special Values</a>
<ul>
<li class="chapter" data-level="18.4.1" data-path="data-forensics.html"><a href="data-forensics.html#reasoning-about-missing-values"><i class="fa fa-check"></i><b>18.4.1</b> Reasoning about Missing Values</a></li>
</ul></li>
<li class="chapter" data-level="18.5" data-path="data-forensics.html"><a href="data-forensics.html#outliers"><i class="fa fa-check"></i><b>18.5</b> Outliers</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html"><i class="fa fa-check"></i><b>19</b> Working with Unstructured Data</a>
<ul>
<li class="chapter" data-level="19.1" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#lesson-objectives"><i class="fa fa-check"></i><b>19.1</b> Lesson Objectives</a></li>
<li class="chapter" data-level="19.2" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#preliminaries"><i class="fa fa-check"></i><b>19.2</b> Preliminaries</a></li>
<li class="chapter" data-level="19.3" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#from-file-names-to-metadata"><i class="fa fa-check"></i><b>19.3</b> From File Names to Metadata</a></li>
<li class="chapter" data-level="19.4" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#loading-a-corpus"><i class="fa fa-check"></i><b>19.4</b> Loading a Corpus</a></li>
<li class="chapter" data-level="19.5" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#preprocessing-raw-text"><i class="fa fa-check"></i><b>19.5</b> Preprocessing Raw Text</a>
<ul>
<li class="chapter" data-level="19.5.1" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#text-normalization"><i class="fa fa-check"></i><b>19.5.1</b> Text Normalization</a></li>
<li class="chapter" data-level="19.5.2" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#stop-words"><i class="fa fa-check"></i><b>19.5.2</b> Stop Words</a></li>
<li class="chapter" data-level="19.5.3" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#tokenizers"><i class="fa fa-check"></i><b>19.5.3</b> Tokenizers</a></li>
<li class="chapter" data-level="19.5.4" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#document-chunking-and-n-grams"><i class="fa fa-check"></i><b>19.5.4</b> Document Chunking and N-grams</a></li>
</ul></li>
<li class="chapter" data-level="19.6" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#counting-terms"><i class="fa fa-check"></i><b>19.6</b> Counting Terms</a>
<ul>
<li class="chapter" data-level="19.6.1" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#term-frequency"><i class="fa fa-check"></i><b>19.6.1</b> Term Frequency</a></li>
<li class="chapter" data-level="19.6.2" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#plotting-term-frequency"><i class="fa fa-check"></i><b>19.6.2</b> Plotting Term Frequency</a></li>
<li class="chapter" data-level="19.6.3" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#comparing-term-frequencies-across-documents"><i class="fa fa-check"></i><b>19.6.3</b> Comparing Term Frequencies Across Documents</a></li>
</ul></li>
<li class="chapter" data-level="19.7" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#working-with-the-text-mining-package"><i class="fa fa-check"></i><b>19.7</b> Working with the Text Mining Package</a>
<ul>
<li class="chapter" data-level="19.7.1" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#making-a-corpus"><i class="fa fa-check"></i><b>19.7.1</b> Making a Corpus</a></li>
<li class="chapter" data-level="19.7.2" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#corpus-preprocessing"><i class="fa fa-check"></i><b>19.7.2</b> Corpus Preprocessing</a></li>
<li class="chapter" data-level="19.7.3" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#document-term-matrix"><i class="fa fa-check"></i><b>19.7.3</b> Document Term Matrix</a></li>
<li class="chapter" data-level="19.7.4" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#corpus-analytics"><i class="fa fa-check"></i><b>19.7.4</b> Corpus Analytics</a></li>
<li class="chapter" data-level="19.7.5" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#corpus-term-counts"><i class="fa fa-check"></i><b>19.7.5</b> Corpus Term Counts</a></li>
<li class="chapter" data-level="19.7.6" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#tfidf-scores"><i class="fa fa-check"></i><b>19.7.6</b> tf–idf Scores</a></li>
<li class="chapter" data-level="19.7.7" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#basic-similarity-measures"><i class="fa fa-check"></i><b>19.7.7</b> Basic Similarity Measures</a></li>
<li class="chapter" data-level="19.7.8" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#document-clustering"><i class="fa fa-check"></i><b>19.7.8</b> Document Clustering</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Adventures in Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="working-with-unstructured-data" class="section level1" number="19">
<h1><span class="header-section-number">19</span> Working with Unstructured Data</h1>
<div id="lesson-objectives" class="section level2" number="19.1">
<h2><span class="header-section-number">19.1</span> Lesson Objectives</h2>
<p>By the end of this lesson, you should be able to:</p>
<ul>
<li>Make metadata from unstructured data</li>
<li>Load and clean a collection of text files into R</li>
<li>Know concepts and consequences of stop words</li>
<li>Build a corpus and a document-term matrix</li>
<li>Run high-level analyses of text corpora</li>
</ul>
</div>
<div id="preliminaries" class="section level2" number="19.2">
<h2><span class="header-section-number">19.2</span> Preliminaries</h2>
<pre><code>install.packages(c(&quot;tidyverse&quot;, &quot;tokenizers&quot;, &quot;tm&quot;, &quot;cluster&quot;))</code></pre>
</div>
<div id="from-file-names-to-metadata" class="section level2" number="19.3">
<h2><span class="header-section-number">19.3</span> From File Names to Metadata</h2>
<p>First, let’s get some information about our files.</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="working-with-unstructured-data.html#cb470-1" aria-hidden="true" tabindex="-1"></a>input_dir <span class="ot">&lt;-</span> <span class="st">&quot;./IST8_text_corpus/&quot;</span></span>
<span id="cb470-2"><a href="working-with-unstructured-data.html#cb470-2" aria-hidden="true" tabindex="-1"></a>fnames <span class="ot">&lt;-</span> <span class="fu">list.files</span>(input_dir)</span></code></pre></div>
<p>While we could start analyzing these files immediately, their names contain a
lot of metadata, which could be helpful. We’ll need to structure this info
first (yes, we’re structuring unstructured data so we can structure <em>more</em>
unstructured data—welcome to data forensics!). Mercifully, whoever created
these files had a convention in mind for giving them names. We can latch onto
the patterns within this convention to make our own representation of the files’
metadata.</p>
<p>Here’s the pattern:</p>
<p><code>[LANGUAGE]_[YEAR]_[LASTNAME,FIRSTNAME]_[N OR G].txt</code></p>
<p>Let’s use it to make a data frame. Using <code>stringr</code> in combination with regex
patterns will be essential to do so. First, let’s break apart the strings on
their underscores and transform that output into a data frame.</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="working-with-unstructured-data.html#cb471-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb471-2"><a href="working-with-unstructured-data.html#cb471-2" aria-hidden="true" tabindex="-1"></a>C19_novels <span class="ot">&lt;-</span> <span class="fu">str_split_fixed</span>(fnames, <span class="st">&quot;_&quot;</span>, <span class="dv">5</span>)</span>
<span id="cb471-3"><a href="working-with-unstructured-data.html#cb471-3" aria-hidden="true" tabindex="-1"></a>C19_novels <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(C19_novels)</span></code></pre></div>
<p>This is already pretty close to a good data sheet for us, but we’ll want to
refine it a little further. First, let’s name our columns. The letters in the
file names are genre tags, which stand for either “gothic” or “not gothic,” so
we’ll be sure to record them.</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="working-with-unstructured-data.html#cb472-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(C19_novels) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;lang&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;author_name&quot;</span>, <span class="st">&quot;title&quot;</span>, <span class="st">&quot;genre&quot;</span>)</span></code></pre></div>
<p>Now, let’s split author names into “first” and “last” and add them back to the
data frame.</p>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="working-with-unstructured-data.html#cb473-1" aria-hidden="true" tabindex="-1"></a>author_names <span class="ot">&lt;-</span> <span class="fu">str_split_fixed</span>(C19_novels<span class="sc">$</span>author_name, <span class="st">&quot;,&quot;</span>, <span class="dv">2</span>)</span>
<span id="cb473-2"><a href="working-with-unstructured-data.html#cb473-2" aria-hidden="true" tabindex="-1"></a>C19_novels<span class="sc">$</span>last_name <span class="ot">&lt;-</span> author_names[, <span class="dv">1</span>]</span>
<span id="cb473-3"><a href="working-with-unstructured-data.html#cb473-3" aria-hidden="true" tabindex="-1"></a>C19_novels<span class="sc">$</span>first_name <span class="ot">&lt;-</span> author_names[, <span class="dv">2</span>]</span></code></pre></div>
<p>And for good measure, let’s remove the <code>.txt</code> extension in the genre tags and
convert those tags to factors.</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="working-with-unstructured-data.html#cb474-1" aria-hidden="true" tabindex="-1"></a>C19_novels<span class="sc">$</span>genre <span class="ot">&lt;-</span> <span class="fu">sapply</span>(C19_novels<span class="sc">$</span>genre, <span class="cf">function</span>(x) <span class="fu">str_remove_all</span>(x, <span class="st">&quot;.txt&quot;</span>))</span>
<span id="cb474-2"><a href="working-with-unstructured-data.html#cb474-2" aria-hidden="true" tabindex="-1"></a>C19_novels<span class="sc">$</span>genre <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(C19_novels<span class="sc">$</span>genre)</span></code></pre></div>
<p>Finally, we’ll clean up, removing the <code>author_names</code> and <code>lang</code> columns and
doing a bit of reordering. (Language could be useful in some instances, but
we don’t need it for now, especially because these novels are all in English.)</p>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb475-1"><a href="working-with-unstructured-data.html#cb475-1" aria-hidden="true" tabindex="-1"></a>C19_novels <span class="ot">&lt;-</span> <span class="fu">subset</span>(C19_novels, <span class="at">select=</span> <span class="sc">-</span><span class="fu">c</span>(lang, author_name))</span>
<span id="cb475-2"><a href="working-with-unstructured-data.html#cb475-2" aria-hidden="true" tabindex="-1"></a>C19_novels <span class="ot">&lt;-</span> C19_novels[, <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">3</span>)]</span>
<span id="cb475-3"><a href="working-with-unstructured-data.html#cb475-3" aria-hidden="true" tabindex="-1"></a>C19_novels</span></code></pre></div>
<pre><code>##    last_name  first_name                         title year genre
## 1   Beckford     William                        Vathek 1786     G
## 2  Radcliffe         Ann              ASicilianRomance 1790     G
## 3  Radcliffe         Ann         TheMysteriesofUdolpho 1794     G
## 4      Lewis     Matthew                       TheMonk 1795     G
## 5     Austen        Jane           SenseandSensibility 1811     N
## 6    Shelley        Mary                  Frankenstein 1818     G
## 7      Scott      Walter                       Ivanhoe 1820     N
## 8        Poe  EdgarAllen TheNarrativeofArthurGordonPym 1838     N
## 9     Bronte       Emily              WutheringHeights 1847     G
## 10 Hawthorne   Nathaniel      TheHouseoftheSevenGables 1851     N
## 11   Gaskell   Elizabeth                 NorthandSouth 1854     N
## 12   Collins      Wilkie               TheWomaninWhite 1860     N
## 13   Dickens     Charles             GreatExpectations 1861     N
## 14     James       Henry               PortraitofaLady 1881     N
## 15 Stevenson RobertLouis                TreasureIsland 1882     N
## 16 Stevenson RobertLouis                 JekyllandHyde 1886     G
## 17     Wilde       Oscar        ThePictureofDorianGray 1890     G
## 18    Stoker        Bram                       Dracula 1897     G</code></pre>
<p>Nice and tidy!</p>
</div>
<div id="loading-a-corpus" class="section level2" number="19.4">
<h2><span class="header-section-number">19.4</span> Loading a Corpus</h2>
<p>With our metadata structured, it’s time to load our files and see what we can
do with them.</p>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="working-with-unstructured-data.html#cb477-1" aria-hidden="true" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="fu">paste0</span>(input_dir, fnames), readLines)</span></code></pre></div>
<p>Loading our files like this will create a giant list of vectors, where each
vector is a full text file. Those vectors are chunked by paragraph right now,
but for our purposes it would be easier if each vector was a single stream of
text (like the output of <code>ocr()</code>, if you’ll remember). We can collapse them
together with <code>paste()</code>.</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="working-with-unstructured-data.html#cb478-1" aria-hidden="true" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">lapply</span>(files, <span class="cf">function</span>(x) <span class="fu">paste</span>(x, <span class="at">collapse=</span><span class="st">&quot; &quot;</span>))</span></code></pre></div>
<p>For the purposes of analyzing this text data, the best that can be said is that,
at the very least, we don’t have to OCR it. Other than that, it’s unwieldy and,
worse, we can’t really access the elements that comprise each novel. We’ll need
to do more work to <strong>preprocess</strong> our texts before we can analyze them.</p>
</div>
<div id="preprocessing-raw-text" class="section level2" number="19.5">
<h2><span class="header-section-number">19.5</span> Preprocessing Raw Text</h2>
<p>Part of preprocessing entails making decisions about the kinds of information we
want to know about our data. Knowing what information we want often guides the
way we structure data. Put another way: <em>research questions drive preprocessing</em>.</p>
<p>For example, it’d be helpful to know how many words are in each novel, which
might enable us to study patterns and differences between authors’ styles. To
get word counts, we need to split the text vectors into individual words. One
way to do this would be to first strip out everything in each novel that isn’t
an alphabetic character or a space:</p>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="working-with-unstructured-data.html#cb479-1" aria-hidden="true" tabindex="-1"></a>cleaned <span class="ot">&lt;-</span> <span class="fu">lapply</span>(files, <span class="cf">function</span>(x) <span class="fu">str_replace_all</span>(x, <span class="st">&quot;[^A-Za-z]&quot;</span>, <span class="st">&quot; &quot;</span>))</span></code></pre></div>
<p>From here, it would be easy enough to count the words in a novel by splitting
its vector on spaces, removing empty elements in the vector, and calling
<code>length()</code> on the vector.</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="working-with-unstructured-data.html#cb480-1" aria-hidden="true" tabindex="-1"></a>frankenstein <span class="ot">&lt;-</span> <span class="fu">str_split</span>(cleaned[[<span class="dv">6</span>]], <span class="st">&quot; &quot;</span>)</span>
<span id="cb480-2"><a href="working-with-unstructured-data.html#cb480-2" aria-hidden="true" tabindex="-1"></a>frankenstein <span class="ot">&lt;-</span> <span class="fu">lapply</span>(frankenstein, <span class="cf">function</span>(x) x[x <span class="sc">!=</span> <span class="st">&quot;&quot;</span>])</span>
<span id="cb480-3"><a href="working-with-unstructured-data.html#cb480-3" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(frankenstein[[<span class="dv">1</span>]])</span></code></pre></div>
<pre><code>## [1] 76015</code></pre>
<p>And here are the first nine words:</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="working-with-unstructured-data.html#cb482-1" aria-hidden="true" tabindex="-1"></a>frankenstein[[<span class="dv">1</span>]][<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>]</span></code></pre></div>
<pre><code>## [1] &quot;FRANKENSTEIN&quot; &quot;OR&quot;           &quot;THE&quot;          &quot;MODERN&quot;       &quot;PROMETHEUS&quot;  
## [6] &quot;BY&quot;           &quot;MARY&quot;         &quot;W&quot;            &quot;SHELLEY&quot;</code></pre>
<p>This representation of text is called a <strong>bag of words</strong>.</p>
<div id="text-normalization" class="section level3" number="19.5.1">
<h3><span class="header-section-number">19.5.1</span> Text Normalization</h3>
<p>While easy, producing our bag of words this way is a bit clunky. And further,
this process can’t handle contractions (“I’m,” “don’t,” “that’s”) or
differences in capitalization.</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="working-with-unstructured-data.html#cb484-1" aria-hidden="true" tabindex="-1"></a>frankenstein[[<span class="dv">1</span>]][<span class="dv">188</span><span class="sc">:</span><span class="dv">191</span>]</span></code></pre></div>
<pre><code>## [1] &quot;Midsummer&quot; &quot;Night&quot;     &quot;s&quot;         &quot;Dream&quot;</code></pre>
<p>Should be:</p>
<pre><code>Midsummer Night&#39;s Dream</code></pre>
<p>And</p>
<pre><code>&quot;FRANKENSTEIN&quot;, &quot;Frankenstein&quot;</code></pre>
<p>Should be:</p>
<pre><code>&quot;Frankenstein&quot;</code></pre>
<p>Or, even better:</p>
<pre><code>frankenstein</code></pre>
<p>Typically, when we work with text data we want all of our words to be in the
same case because this makes it easier to do things like counting operations.
Remember that, to a computer, “Word” and “word” are two separate words, and if
we want to count them together, we need to pick one version or the other. Making
all words lowercase (even proper nouns) is the standard. Doing this is part of
what’s called text <strong>normalization</strong>. (Other forms of normalization might
entail handling orthographic differences between British and American English,
like “color” and “colour.”)</p>
<p>As for contractions, we have some decisions to make. On the one hand, it’s
important to retain as much information as we can about the original text, so
keeping “don’t” or “what’s” (which would be “don t” and “what s” in our current
method) is important. On the other hand, many words that feature these kinds of
contractions are high-frequency function words, which don’t have much meaning
beyond the immediate context of a sentence or two. Words like “the” or “won’t”
appear in huge numbers in text data, but they don’t carry much information in
and of themselves—it may in fact be the case that we could get rid of them
entirely…</p>
</div>
<div id="stop-words" class="section level3" number="19.5.2">
<h3><span class="header-section-number">19.5.2</span> Stop Words</h3>
<p>…and indeed this is the case! When structuring text data to study it at scale,
it’s common to remove, or <strong>stop out</strong>, words that don’t have much meaning. This
makes it much easier to identify significant (i.e. unique) features in a text,
without having to swim through all the noise of “the” or “that,” which would
almost always show up as the highest-occurring words in an analysis. But what
words should we remove? Ultimately, this depends on your text data. We can
usually assume that function words will be on our list of <strong>stop words</strong>, but it
may be that you’ll have to add or subtract others depending on your data and,
of course, your research question.</p>
<p>The <code>tm</code> package has a good starting list. Let’s look at the first 100 words.</p>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="working-with-unstructured-data.html#cb490-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tm)</span>
<span id="cb490-2"><a href="working-with-unstructured-data.html#cb490-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">stopwords</span>(<span class="st">&quot;SMART&quot;</span>), <span class="dv">100</span>)</span></code></pre></div>
<pre><code>##   [1] &quot;a&quot;            &quot;a&#39;s&quot;          &quot;able&quot;         &quot;about&quot;        &quot;above&quot;       
##   [6] &quot;according&quot;    &quot;accordingly&quot;  &quot;across&quot;       &quot;actually&quot;     &quot;after&quot;       
##  [11] &quot;afterwards&quot;   &quot;again&quot;        &quot;against&quot;      &quot;ain&#39;t&quot;        &quot;all&quot;         
##  [16] &quot;allow&quot;        &quot;allows&quot;       &quot;almost&quot;       &quot;alone&quot;        &quot;along&quot;       
##  [21] &quot;already&quot;      &quot;also&quot;         &quot;although&quot;     &quot;always&quot;       &quot;am&quot;          
##  [26] &quot;among&quot;        &quot;amongst&quot;      &quot;an&quot;           &quot;and&quot;          &quot;another&quot;     
##  [31] &quot;any&quot;          &quot;anybody&quot;      &quot;anyhow&quot;       &quot;anyone&quot;       &quot;anything&quot;    
##  [36] &quot;anyway&quot;       &quot;anyways&quot;      &quot;anywhere&quot;     &quot;apart&quot;        &quot;appear&quot;      
##  [41] &quot;appreciate&quot;   &quot;appropriate&quot;  &quot;are&quot;          &quot;aren&#39;t&quot;       &quot;around&quot;      
##  [46] &quot;as&quot;           &quot;aside&quot;        &quot;ask&quot;          &quot;asking&quot;       &quot;associated&quot;  
##  [51] &quot;at&quot;           &quot;available&quot;    &quot;away&quot;         &quot;awfully&quot;      &quot;b&quot;           
##  [56] &quot;be&quot;           &quot;became&quot;       &quot;because&quot;      &quot;become&quot;       &quot;becomes&quot;     
##  [61] &quot;becoming&quot;     &quot;been&quot;         &quot;before&quot;       &quot;beforehand&quot;   &quot;behind&quot;      
##  [66] &quot;being&quot;        &quot;believe&quot;      &quot;below&quot;        &quot;beside&quot;       &quot;besides&quot;     
##  [71] &quot;best&quot;         &quot;better&quot;       &quot;between&quot;      &quot;beyond&quot;       &quot;both&quot;        
##  [76] &quot;brief&quot;        &quot;but&quot;          &quot;by&quot;           &quot;c&quot;            &quot;c&#39;mon&quot;       
##  [81] &quot;c&#39;s&quot;          &quot;came&quot;         &quot;can&quot;          &quot;can&#39;t&quot;        &quot;cannot&quot;      
##  [86] &quot;cant&quot;         &quot;cause&quot;        &quot;causes&quot;       &quot;certain&quot;      &quot;certainly&quot;   
##  [91] &quot;changes&quot;      &quot;clearly&quot;      &quot;co&quot;           &quot;com&quot;          &quot;come&quot;        
##  [96] &quot;comes&quot;        &quot;concerning&quot;   &quot;consequently&quot; &quot;consider&quot;     &quot;considering&quot;</code></pre>
<p>That looks pretty comprehensive so far, though the only way we’ll know whether
it’s a good match for our corpus is to process our corpus with it. At first
glance, the extra random letters in this list seem like they could be a big
help, on the off chance there’s some noise from OCR. If you look at the first
novel in the corpus, for example, there are a bunch of stray <em>p</em>’s, which is
likely from a pattern for marking pages (“p. 7”):</p>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="working-with-unstructured-data.html#cb492-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">str_sub</span>(cleaned[[<span class="dv">1</span>]], <span class="dv">1</span>, <span class="dv">1000</span>))</span></code></pre></div>
<pre><code>## VATHEK   AN ARABIAN TALE     BY  WILLIAM BECKFORD  ESQ     p   VATHEK   Vathek  ninth Caliph   a  of the race of the Abassides  was the son of Motassem  and the grandson of Haroun Al Raschid   From an early accession to the throne  and the talents he possessed to adorn it  his subjects were induced to expect that his reign would be long and happy   His figure was pleasing and majestic  but when he was angry  one of his eyes became so terrible   b  that no person could bear to behold it  and the wretch upon whom it was fixed instantly fell backward  and sometimes expired   For fear  however  of depopulating his dominions  and making his palace desolate  he but rarely gave way to his anger   Being much addicted to women  and the pleasures of the table  he sought by his affability to procure agreeable companions  and he succeeded the better  p   as his generosity was unbounded and his indulgences unrestrained  for he was by no means scrupulous  nor did he think  with the Caliph Omar Ben A</code></pre>
<p>Our stop word list would take care of this. With it, we could return to our
original collection of novels, split them on spaces as before, and filter out
everything that’s stored in our <code>stop_list</code> variable. Before we did the
filtering, though, we’d need to transform the novels into lowercase (which can
be done with <code>R</code>’s <code>tolower()</code> function).</p>
</div>
<div id="tokenizers" class="section level3" number="19.5.3">
<h3><span class="header-section-number">19.5.3</span> Tokenizers</h3>
<p>This whole process, which we call <strong>tokenizing</strong>, is ultimately straightforward
so far, but it would be nice to collapse all its steps. Luckily, there are
packages we can use to streamline our process. <code>tokenizers</code> has functions that
split a text vector, turn words into lowercase forms, and remove stop words,
all in a few lines of code.</p>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="working-with-unstructured-data.html#cb494-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tokenizers)</span>
<span id="cb494-2"><a href="working-with-unstructured-data.html#cb494-2" aria-hidden="true" tabindex="-1"></a>tokenized <span class="ot">&lt;-</span> <span class="fu">lapply</span>(files, <span class="cf">function</span>(x) <span class="fu">tokenize_words</span>(x, </span>
<span id="cb494-3"><a href="working-with-unstructured-data.html#cb494-3" aria-hidden="true" tabindex="-1"></a>                                                    <span class="at">stopwords=</span><span class="fu">stopwords</span>(<span class="st">&quot;SMART&quot;</span>),</span>
<span id="cb494-4"><a href="working-with-unstructured-data.html#cb494-4" aria-hidden="true" tabindex="-1"></a>                                                    <span class="at">strip_punct=</span><span class="cn">TRUE</span>,</span>
<span id="cb494-5"><a href="working-with-unstructured-data.html#cb494-5" aria-hidden="true" tabindex="-1"></a>                                                    <span class="at">strip_numeric=</span><span class="cn">TRUE</span>))</span></code></pre></div>
<p>We can compare our tokenized output with the text data we had been working with
earlier:</p>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb495-1"><a href="working-with-unstructured-data.html#cb495-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(<span class="at">untokenized=</span>frankenstein[[<span class="dv">1</span>]][<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>], <span class="at">tokenized=</span>tokenized[[<span class="dv">6</span>]][[<span class="dv">1</span>]][<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span></code></pre></div>
<pre><code>## $untokenized
## [1] &quot;FRANKENSTEIN&quot; &quot;OR&quot;           &quot;THE&quot;          &quot;MODERN&quot;       &quot;PROMETHEUS&quot;  
## [6] &quot;BY&quot;           &quot;MARY&quot;         &quot;W&quot;            &quot;SHELLEY&quot;     
## 
## $tokenized
## [1] &quot;frankenstein&quot; &quot;modern&quot;       &quot;prometheus&quot;   &quot;mary&quot;         &quot;shelley&quot;</code></pre>
<p>From the title alone we can see how much of a difference tokenizing with stop
words makes. And while we lose a bit of information by doing this, what we can
is a much clearer picture of key words we’d want to further analyze.</p>
</div>
<div id="document-chunking-and-n-grams" class="section level3" number="19.5.4">
<h3><span class="header-section-number">19.5.4</span> Document Chunking and N-grams</h3>
<p>Finally, it’s possible to change the way we separate out our text data. Instead
of tokenizing on words, we could use <code>tokenizers</code> to break apart our texts on
paragraphs (<code>tokenize_paragraphs()</code>), sentences (<code>tokenize_sentences</code>), and
more. There might be valuable information to be learned about the average
sentence length of a novel, for example, so we might chunk it accordingly.</p>
<p>We might also want to see whether a text contains repeated phrases, or if two or
three words often occur in the same sequence. We could investigate this by
adjusting the window around which we tokenize individual words. So far we’ve
used the “unigram,” or a single word, as our basic unit of counting, but we
could break our texts into “bigrams” (two word phrases), “trigrams” (three word
phrases), or, well any sequence of <em>n</em> units. Generally, you’ll see these
sequences referred to as <strong>n-grams</strong>:</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb497-1"><a href="working-with-unstructured-data.html#cb497-1" aria-hidden="true" tabindex="-1"></a>frankenstein_bigrams <span class="ot">&lt;-</span> <span class="fu">tokenize_ngrams</span>(files[[<span class="dv">6</span>]], <span class="at">n=</span><span class="dv">2</span>, <span class="at">stopwords=</span><span class="fu">stopwords</span>(<span class="st">&quot;SMART&quot;</span>))</span></code></pre></div>
<p>Here, <code>n=2</code> sets the n-gram window at two:</p>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="working-with-unstructured-data.html#cb498-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(frankenstein_bigrams[[<span class="dv">1</span>]], <span class="dv">30</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;frankenstein modern&quot;   &quot;modern prometheus&quot;     &quot;prometheus mary&quot;      
##  [4] &quot;mary shelley&quot;          &quot;shelley preface&quot;       &quot;preface event&quot;        
##  [7] &quot;event fiction&quot;         &quot;fiction founded&quot;       &quot;founded supposed&quot;     
## [10] &quot;supposed dr&quot;           &quot;dr darwin&quot;             &quot;darwin physiological&quot; 
## [13] &quot;physiological writers&quot; &quot;writers germany&quot;       &quot;germany impossible&quot;   
## [16] &quot;impossible occurrence&quot; &quot;occurrence supposed&quot;   &quot;supposed remotest&quot;    
## [19] &quot;remotest degree&quot;       &quot;degree faith&quot;          &quot;faith imagination&quot;    
## [22] &quot;imagination assuming&quot;  &quot;assuming basis&quot;        &quot;basis work&quot;           
## [25] &quot;work fancy&quot;            &quot;fancy considered&quot;      &quot;considered weaving&quot;   
## [28] &quot;weaving series&quot;        &quot;series supernatural&quot;   &quot;supernatural terrors&quot;</code></pre>
<p>Note though that, for this function, we’d need to do some preprocessing on our
own to remove numeric characters and punctuation; <code>tokenize_ngrams()</code> won’t do
it for us.</p>
</div>
</div>
<div id="counting-terms" class="section level2" number="19.6">
<h2><span class="header-section-number">19.6</span> Counting Terms</h2>
<p>Let’s return to our single word counts. Now that we’ve transformed our novels
into bags of single words, we can start with some analysis. Simply counting the
number of times a word appears in some data can tell us a lot about a text. The
following steps should feel familiar: we did them with OCR.</p>
<p>Let’s look at <em>Wuthering Heights</em>, which is our ninth text:</p>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="working-with-unstructured-data.html#cb500-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb500-2"><a href="working-with-unstructured-data.html#cb500-2" aria-hidden="true" tabindex="-1"></a>wuthering_heights <span class="ot">&lt;-</span> <span class="fu">table</span>(tokenized[[<span class="dv">9</span>]])</span>
<span id="cb500-3"><a href="working-with-unstructured-data.html#cb500-3" aria-hidden="true" tabindex="-1"></a>wuthering_heights <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">word=</span><span class="fu">names</span>(wuthering_heights), <span class="at">count=</span><span class="fu">as.numeric</span>(wuthering_heights))</span>
<span id="cb500-4"><a href="working-with-unstructured-data.html#cb500-4" aria-hidden="true" tabindex="-1"></a>wuthering_heights <span class="ot">&lt;-</span> <span class="fu">arrange</span>(wuthering_heights, <span class="fu">desc</span>(count))</span>
<span id="cb500-5"><a href="working-with-unstructured-data.html#cb500-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(wuthering_heights, <span class="dv">30</span>)</span></code></pre></div>
<pre><code>##          word count
## 1  heathcliff   422
## 2      linton   348
## 3   catherine   339
## 4          mr   312
## 5      master   185
## 6     hareton   169
## 7    answered   156
## 8        till   151
## 9       house   144
## 10       door   133
## 11        mrs   133
## 12     joseph   130
## 13       miss   129
## 14       time   127
## 15       back   121
## 16    thought   118
## 17      cathy   117
## 18       good   117
## 19    replied   117
## 20   earnshaw   116
## 21       eyes   116
## 22      cried   114
## 23      young   107
## 24        day   106
## 25     father   106
## 26      asked   105
## 27       make   105
## 28      edgar   104
## 29      night   104
## 30       made   102</code></pre>
<p>Looks good! The two main characters in this novel are named Heathcliff and
Catherine, so it makes sense that these words would appear a lot. You can see,
however, that we might want to fine tune our stop word list so that it removes
“mr” and “mrs” from the text. Though again, it depends on our research question.
If we’re exploring gender roles in nineteenth-century literature, we’d probably
keep those words in.</p>
<p>In addition to fine tuning stop words, pausing here at these counts would be a
good way to check whether some other form of textual noise is present in your
data, which you haven’t yet caught. There’s nothing like that here, but you
might imagine how consistent OCR noise could make itself known in this view.</p>
<div id="term-frequency" class="section level3" number="19.6.1">
<h3><span class="header-section-number">19.6.1</span> Term Frequency</h3>
<p>After you’ve done your fine tuning, it would be good to get a <strong>term frequency</strong>
number for each word in this data frame. Raw counts are nice, but expressing
those counts in proportion to the total words in a document will tell us more
information about a word’s contribution to the document as a whole. We can get
term frequencies for our words by dividing a word’s count by document length
(which is the sum of all words in the document).</p>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="working-with-unstructured-data.html#cb502-1" aria-hidden="true" tabindex="-1"></a>wuthering_heights<span class="sc">$</span>term_frequency <span class="ot">&lt;-</span> <span class="fu">sapply</span>(wuthering_heights<span class="sc">$</span>count, <span class="cf">function</span>(x) (x<span class="sc">/</span><span class="fu">sum</span>(wuthering_heights<span class="sc">$</span>count)))</span>
<span id="cb502-2"><a href="working-with-unstructured-data.html#cb502-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(wuthering_heights, <span class="dv">30</span>)</span></code></pre></div>
<pre><code>##          word count term_frequency
## 1  heathcliff   422    0.009619549
## 2      linton   348    0.007932709
## 3   catherine   339    0.007727552
## 4          mr   312    0.007112084
## 5      master   185    0.004217101
## 6     hareton   169    0.003852379
## 7    answered   156    0.003556042
## 8        till   151    0.003442066
## 9       house   144    0.003282500
## 10       door   133    0.003031754
## 11        mrs   133    0.003031754
## 12     joseph   130    0.002963368
## 13       miss   129    0.002940573
## 14       time   127    0.002894983
## 15       back   121    0.002758212
## 16    thought   118    0.002689827
## 17      cathy   117    0.002667031
## 18       good   117    0.002667031
## 19    replied   117    0.002667031
## 20   earnshaw   116    0.002644236
## 21       eyes   116    0.002644236
## 22      cried   114    0.002598646
## 23      young   107    0.002439080
## 24        day   106    0.002416285
## 25     father   106    0.002416285
## 26      asked   105    0.002393490
## 27       make   105    0.002393490
## 28      edgar   104    0.002370695
## 29      night   104    0.002370695
## 30       made   102    0.002325104</code></pre>
</div>
<div id="plotting-term-frequency" class="section level3" number="19.6.2">
<h3><span class="header-section-number">19.6.2</span> Plotting Term Frequency</h3>
<p>Let’s plot the top 50 words in <em>Wuthering Heights</em>. We’ll call <code>fct_reorder()</code>
in the <code>aes()</code> field of <code>ggplot</code> to sort words in the descending order of their
term frequency.</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="working-with-unstructured-data.html#cb504-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb504-2"><a href="working-with-unstructured-data.html#cb504-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>wuthering_heights[<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>, ], <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">fct_reorder</span>(word, <span class="sc">-</span>term_frequency), <span class="at">y=</span>term_frequency)) <span class="sc">+</span></span>
<span id="cb504-3"><a href="working-with-unstructured-data.html#cb504-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span> </span>
<span id="cb504-4"><a href="working-with-unstructured-data.html#cb504-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>, <span class="at">vjust=</span><span class="fl">0.5</span>, <span class="at">hjust=</span><span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb504-5"><a href="working-with-unstructured-data.html#cb504-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Top 50 words in Wuthering Heights&quot;</span>, <span class="at">x=</span><span class="st">&quot;Word&quot;</span>, <span class="at">y=</span><span class="st">&quot;Term Frequency&quot;</span>)</span></code></pre></div>
<p><img src="19_unstructured_data_files/figure-html/unnamed-chunk-24-1.png" width="960" /></p>
<p>This is a good start for creating a high-level view of the novel, but further
tuning might be in order. We’ve already mentioned “mrs” and “mr” as two words
that we could cut out of the text. Another option would be to collapse these
two words together into a <strong>base form</strong> by <strong>lemmatizing</strong> them. Though this
would overweight their base form (which in this case is “mr”) in terms of term
frequency, it would also free up space to see other terms in the document. Other
examples of lemmatized words would be transforming “fishing,” “fished,” and
“fisher” all into “fish.”</p>
<p>That said, like all preprocessing, lemmatizing words is an
<em>interpretive decision</em>, which comes with its own consequences. Maybe it’s okay
to transform “mr” and “mrs” into “mr” for some analyses, but it’s also the case
that we’d be erasing potentially important gender differences in the text—and
would do so by overweighting the masculine form of the word. Regardless of what
you decide, it’s important to keep track of these decisions as you make them
because they will impact the kinds of claims you make about your data later on.</p>
</div>
<div id="comparing-term-frequencies-across-documents" class="section level3" number="19.6.3">
<h3><span class="header-section-number">19.6.3</span> Comparing Term Frequencies Across Documents</h3>
<p>Term frequency is helpful if we want to start comparing words across two texts.
We can make some comparisons by transforming the above code into a function:</p>
<div class="sourceCode" id="cb505"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb505-1"><a href="working-with-unstructured-data.html#cb505-1" aria-hidden="true" tabindex="-1"></a>term_table <span class="ot">&lt;-</span> <span class="cf">function</span>(text) {</span>
<span id="cb505-2"><a href="working-with-unstructured-data.html#cb505-2" aria-hidden="true" tabindex="-1"></a>  term_tab <span class="ot">&lt;-</span> <span class="fu">table</span>(text)</span>
<span id="cb505-3"><a href="working-with-unstructured-data.html#cb505-3" aria-hidden="true" tabindex="-1"></a>  term_tab <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">word=</span><span class="fu">names</span>(term_tab), <span class="at">count=</span><span class="fu">as.numeric</span>(term_tab))</span>
<span id="cb505-4"><a href="working-with-unstructured-data.html#cb505-4" aria-hidden="true" tabindex="-1"></a>  term_tab<span class="sc">$</span>term_frequency <span class="ot">&lt;-</span> <span class="fu">sapply</span>(term_tab<span class="sc">$</span>count, <span class="cf">function</span>(x) (x<span class="sc">/</span><span class="fu">sum</span>(term_tab<span class="sc">$</span>count)))</span>
<span id="cb505-5"><a href="working-with-unstructured-data.html#cb505-5" aria-hidden="true" tabindex="-1"></a>  term_tab <span class="ot">&lt;-</span> <span class="fu">arrange</span>(term_tab, <span class="fu">desc</span>(count))</span>
<span id="cb505-6"><a href="working-with-unstructured-data.html#cb505-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(term_tab)</span>
<span id="cb505-7"><a href="working-with-unstructured-data.html#cb505-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>We already have a term table for <em>Wuthering Heights</em>. Let’s make one for <em>Dracula</em>.</p>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="working-with-unstructured-data.html#cb506-1" aria-hidden="true" tabindex="-1"></a>dracula <span class="ot">&lt;-</span> <span class="fu">term_table</span>(tokenized[[<span class="dv">18</span>]])</span>
<span id="cb506-2"><a href="working-with-unstructured-data.html#cb506-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dracula, <span class="dv">30</span>)</span></code></pre></div>
<pre><code>##         word count term_frequency
## 1       time   387    0.007280458
## 2        van   321    0.006038829
## 3    helsing   299    0.005624953
## 4       back   261    0.004910076
## 5       room   231    0.004345699
## 6       good   225    0.004232824
## 7       lucy   225    0.004232824
## 8        man   224    0.004214012
## 9       dear   219    0.004119949
## 10      mina   217    0.004082324
## 11     night   217    0.004082324
## 12      hand   209    0.003931823
## 13      face   205    0.003856573
## 14      door   201    0.003781323
## 15      made   193    0.003630822
## 16      poor   192    0.003612010
## 17     sleep   190    0.003574385
## 18      eyes   186    0.003499135
## 19    looked   185    0.003480322
## 20    friend   183    0.003442697
## 21     great   182    0.003423884
## 22  jonathan   182    0.003423884
## 23        dr   178    0.003348634
## 24    things   174    0.003273384
## 25      make   163    0.003066446
## 26       day   160    0.003010008
## 27 professor   155    0.002915946
## 28     count   153    0.002878320
## 29     found   153    0.002878320
## 30   thought   153    0.002878320</code></pre>
<p>Now we can compare the relative frequency of a word across two novels:</p>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="working-with-unstructured-data.html#cb508-1" aria-hidden="true" tabindex="-1"></a>comparison_words <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;dark&quot;</span>, <span class="st">&quot;night&quot;</span>, <span class="st">&quot;ominous&quot;</span>)</span>
<span id="cb508-2"><a href="working-with-unstructured-data.html#cb508-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> comparison_words) {</span>
<span id="cb508-3"><a href="working-with-unstructured-data.html#cb508-3" aria-hidden="true" tabindex="-1"></a>  wh <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">wh=</span><span class="fu">subset</span>(wuthering_heights, word<span class="sc">==</span>i))</span>
<span id="cb508-4"><a href="working-with-unstructured-data.html#cb508-4" aria-hidden="true" tabindex="-1"></a>  drac <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">drac=</span><span class="fu">subset</span>(dracula, word<span class="sc">==</span>i))</span>
<span id="cb508-5"><a href="working-with-unstructured-data.html#cb508-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(wh)</span>
<span id="cb508-6"><a href="working-with-unstructured-data.html#cb508-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(drac)</span>
<span id="cb508-7"><a href="working-with-unstructured-data.html#cb508-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## $wh
##     word count term_frequency
## 183 dark    32   0.0007294445
## 
## $drac
##    word count term_frequency
## 90 dark    77    0.001448566
## 
## $wh
##     word count term_frequency
## 29 night   104    0.002370695
## 
## $drac
##     word count term_frequency
## 11 night   217    0.004082324
## 
## $wh
##         word count term_frequency
## 7283 ominous     1   2.279514e-05
## 
## $drac
##         word count term_frequency
## 7217 ominous     1   1.881255e-05</code></pre>
<p>Not bad! We might be able to make a few generalizations from this, but to say
anything definitively, we’ll need to scale our method. Doing so wouldn’t be
easy with this setup as it stands now. While it’s true that we could write some
functions to roll through these two data frames and systematically compare the
words in each, it would take a lot of work to do so. Luckily, the <code>tm</code> package
(which we’ve used to make our stop word list) features generalized functions
for just this kind of thing.</p>
</div>
</div>
<div id="working-with-the-text-mining-package" class="section level2" number="19.7">
<h2><span class="header-section-number">19.7</span> Working with the Text Mining Package</h2>
<p>To start working with <code>tm</code>, let’s go back to our collection of files. Because
almost all preprocessing involves some kind of manual correction, it’s valuable
to know how to clean texts by hand, but <code>tm</code> has a good workflow for automating
much of this process.</p>
<div id="making-a-corpus" class="section level3" number="19.7.1">
<h3><span class="header-section-number">19.7.1</span> Making a Corpus</h3>
<p>The package works on the basis of a corpus object (a “corpus” is a collection
of texts). To make one, we call the <code>Corpus()</code> function, specifying with
<code>VectorSource()</code> (because our texts are vectors).</p>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="working-with-unstructured-data.html#cb510-1" aria-hidden="true" tabindex="-1"></a>corpus <span class="ot">&lt;-</span> <span class="fu">Corpus</span>(<span class="fu">VectorSource</span>(files))</span></code></pre></div>
<p>A <code>tm</code> corpus works somewhat like a database. It has a section for “content,”
which contains text data, as well as various metadata sections, which we could
populate with additional information about our texts, if we wished. We’ll ignore
the metadata field for now, as we’ve already recorded this information in the
<code>C19_novels</code> data frame.</p>
</div>
<div id="corpus-preprocessing" class="section level3" number="19.7.2">
<h3><span class="header-section-number">19.7.2</span> Corpus Preprocessing</h3>
<p>Packaging everything up like this makes our data more manageable, but we’ve lost
all the preprocessing work we did earlier. To get our novels back in a workable
form, we’ll need to run a series of transformations on the corpus with
<code>tm_map()</code>. You can think of this function as a cognate to the <code>*apply()</code> family.</p>
<p>First, let’s convert to lowercase:</p>
<div class="sourceCode" id="cb511"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb511-1"><a href="working-with-unstructured-data.html#cb511-1" aria-hidden="true" tabindex="-1"></a>corpus <span class="ot">&lt;-</span> <span class="fu">tm_map</span>(corpus, <span class="fu">content_transformer</span>(tolower))</span></code></pre></div>
<p>You may see a “transformation drops documents” warning after this. You can
disregard it. It has to do with the way <code>tm</code> references text changes against
a corpus’s metadata, which we’ve left blank.</p>
<p>Here’s a sample from our result;</p>
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb512-1"><a href="working-with-unstructured-data.html#cb512-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(corpus[[<span class="dv">10</span>]]<span class="sc">$</span>content, <span class="dv">1</span>, <span class="dv">1000</span>)</span></code></pre></div>
<pre><code>## [1] &quot;the house of the seven gables   by  nathaniel hawthorne   the house of seven gables   by  nathaniel hawthorne     i the old pyncheon family halfway down a by-street of one of our new england towns stands a rusty wooden house, with seven acutely peaked gables, facing towards various points of the compass, and a huge, clustered chimney in the midst. the street is pyncheon street; the house is the old pyncheon house; and an elm-tree, of wide circumference, rooted before the door, is familiar to every town-born child by the title of the pyncheon elm. on my occasional visits to the town aforesaid, i seldom failed to turn down pyncheon street, for the sake of passing through the shadow of these two antiquities,—the great elm-tree and the weather-beaten edifice.  the aspect of the venerable mansion has always affected me like a human countenance, bearing the traces not merely of outward storm and sunshine, but expressive also, of the long lapse of mortal life, and accompanying vicissitudes th&quot;</code></pre>
<p>Back to lowercase!</p>
<p>Now, let’s remove numbers, punctuation, and words on our stop words list. We’ll
also take out any extra white spaces, just in case some have crept in. Note the
order of operations here: because our stop words list takes into account
punctuated words, like “don’t” or “i’m,” we want to remove stop words <em>before</em>
removing punctuation. If we didn’t do this, <code>removeWords()</code> wouldn’t catch the
un-puncutated “dont” or “im.” This won’t always be the case, since we can use
different stop word lists, which may have a different set of terms, but in this
instance, the order in which we preprocess matters.</p>
<p>All that said, we’re going to strip out one piece of punctuation before doing
anything else. The <code>removePunctuation()</code> function doesn’t factor in a particular
kind of em dash, and this character will “stick” to words if we don’t take it
out. We’ll have to remove it manually with <code>str_replace_all()</code>. This should
make clear the fact that preprocessing is highly iterative—I (Tyler) only
know about the em dash quirk because I’ve run <code>removePunctuation()</code> before
without this additional step and found some problems in text data later on.</p>
<div class="sourceCode" id="cb514"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb514-1"><a href="working-with-unstructured-data.html#cb514-1" aria-hidden="true" tabindex="-1"></a>corpus <span class="ot">&lt;-</span> <span class="fu">tm_map</span>(corpus, removeNumbers)</span>
<span id="cb514-2"><a href="working-with-unstructured-data.html#cb514-2" aria-hidden="true" tabindex="-1"></a>corpus <span class="ot">&lt;-</span> <span class="fu">tm_map</span>(corpus, <span class="cf">function</span>(x) <span class="fu">str_replace_all</span>(x, <span class="st">&quot;—&quot;</span>, <span class="st">&quot; &quot;</span>))</span>
<span id="cb514-3"><a href="working-with-unstructured-data.html#cb514-3" aria-hidden="true" tabindex="-1"></a>corpus <span class="ot">&lt;-</span> <span class="fu">tm_map</span>(corpus, removeWords, <span class="fu">stopwords</span>(<span class="st">&quot;SMART&quot;</span>))</span>
<span id="cb514-4"><a href="working-with-unstructured-data.html#cb514-4" aria-hidden="true" tabindex="-1"></a>corpus <span class="ot">&lt;-</span> <span class="fu">tm_map</span>(corpus, removePunctuation)</span>
<span id="cb514-5"><a href="working-with-unstructured-data.html#cb514-5" aria-hidden="true" tabindex="-1"></a>corpus <span class="ot">&lt;-</span> <span class="fu">tm_map</span>(corpus, stripWhitespace)</span></code></pre></div>
<p>Oftentimes, this preprocessing can take a while, so now would be a good place
to save your data. That way, you can retrieve your corpus later on.</p>
<div class="sourceCode" id="cb515"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb515-1"><a href="working-with-unstructured-data.html#cb515-1" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(corpus, <span class="st">&quot;./data/C19_novels_cleaned.rds&quot;</span>)</span></code></pre></div>
<p>Loading it back in is straightforward:</p>
<div class="sourceCode" id="cb516"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb516-1"><a href="working-with-unstructured-data.html#cb516-1" aria-hidden="true" tabindex="-1"></a>corpus <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;./data/C19_novels_cleaned.rds&quot;</span>)</span></code></pre></div>
</div>
<div id="document-term-matrix" class="section level3" number="19.7.3">
<h3><span class="header-section-number">19.7.3</span> Document Term Matrix</h3>
<p>The advantage of using a <code>tm</code> corpus is that it makes comparing data easier.
Remember that, in our old workflow, looking at the respective term frequencies
in two documents entailed a fair bit of code. And further, we left off before
generalizing that code to the corpus as a whole. But what if we wanted to look
at a term across multiple documents?</p>
<p>To do so, we need to create what’s called a <strong>document-term matrix</strong>, or DTM. A
DTM describes the frequency of terms across an entire corpus (rather than just
one document). Rows of the matrix correspond to documents, while columns
correspond to the terms. For a given document, we count the number of times that
term appears and enter that number in the column in question. We do this <em>even if</em>
the count is 0; key to the way a DTM works is that it’s a <em>corpus-wide</em>
representation of text data, so it matters if a text does or doesn’t contain a
term.</p>
<p>Here’s a simple example with three documents:</p>
<ul>
<li>Document 1: “I like cats”</li>
<li>Document 2: “I like dogs”</li>
<li>Document 3: “I like both cats and dogs”</li>
</ul>
<p>Transforming these into a document-term matrix would yield:</p>
<table>
<thead>
<tr class="header">
<th align="center">n_doc</th>
<th align="center">I</th>
<th align="center">like</th>
<th align="center">both</th>
<th align="center">cats</th>
<th align="center">and</th>
<th align="center">dogs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<p>Representing texts in this way is incredibly useful because it enables us to
easily discern similarities and differences in our corpus. For example, we can
see that each of the above documents contain the words “I” and “like.” Given
that, if we wanted to know what makes documents unique, we can ignore those two
words and focus on the rest of the values.</p>
<p>Now, imagine doing this for thousands of words! What patterns might emerge?</p>
<p>Let’s try it on our corpus. We can transform a <code>tm</code> corpus object into a DTM
by calling <code>DocumentTermMatrix()</code>.</p>
<div class="sourceCode" id="cb517"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb517-1"><a href="working-with-unstructured-data.html#cb517-1" aria-hidden="true" tabindex="-1"></a>dtm <span class="ot">&lt;-</span> <span class="fu">DocumentTermMatrix</span>(corpus)</span></code></pre></div>
<p>This object is quite similar to the one that results from <code>Corpus()</code>: it
contains a fair bit of metadata, as well as an all-important “dimnames” field,
which records the documents in the matrix and the entire term vocabulary. We
access all of this information with the same syntax we use for data frames.</p>
<p>Let’s look around a bit and get some high-level info.</p>
</div>
<div id="corpus-analytics" class="section level3" number="19.7.4">
<h3><span class="header-section-number">19.7.4</span> Corpus Analytics</h3>
<p>Number of columns in the DTM (i.e. the vocabulary size):</p>
<div class="sourceCode" id="cb518"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb518-1"><a href="working-with-unstructured-data.html#cb518-1" aria-hidden="true" tabindex="-1"></a>dtm<span class="sc">$</span>ncol</span></code></pre></div>
<pre><code>## [1] 36718</code></pre>
<p>Number of rows in the DTM (i.e. the number of documents this matrix represents):</p>
<div class="sourceCode" id="cb520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb520-1"><a href="working-with-unstructured-data.html#cb520-1" aria-hidden="true" tabindex="-1"></a>dtm<span class="sc">$</span>nrow</span></code></pre></div>
<pre><code>## [1] 18</code></pre>
<p>Right now, the document names are just a numbers in a vector:</p>
<div class="sourceCode" id="cb522"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb522-1"><a href="working-with-unstructured-data.html#cb522-1" aria-hidden="true" tabindex="-1"></a>dtm<span class="sc">$</span>dimnames<span class="sc">$</span>Docs</span></code></pre></div>
<pre><code>##  [1] &quot;1&quot;  &quot;2&quot;  &quot;3&quot;  &quot;4&quot;  &quot;5&quot;  &quot;6&quot;  &quot;7&quot;  &quot;8&quot;  &quot;9&quot;  &quot;10&quot; &quot;11&quot; &quot;12&quot; &quot;13&quot; &quot;14&quot; &quot;15&quot;
## [16] &quot;16&quot; &quot;17&quot; &quot;18&quot;</code></pre>
<p>But they’re ordered according to the sequence in which the corpus was originally
created. This means we can use our metadata from way back when to associate a
document with its title:</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="working-with-unstructured-data.html#cb524-1" aria-hidden="true" tabindex="-1"></a>dtm<span class="sc">$</span>dimnames<span class="sc">$</span>Docs <span class="ot">&lt;-</span> C19_novels<span class="sc">$</span>title</span>
<span id="cb524-2"><a href="working-with-unstructured-data.html#cb524-2" aria-hidden="true" tabindex="-1"></a>dtm<span class="sc">$</span>dimnames<span class="sc">$</span>Docs</span></code></pre></div>
<pre><code>##  [1] &quot;Vathek&quot;                        &quot;ASicilianRomance&quot;             
##  [3] &quot;TheMysteriesofUdolpho&quot;         &quot;TheMonk&quot;                      
##  [5] &quot;SenseandSensibility&quot;           &quot;Frankenstein&quot;                 
##  [7] &quot;Ivanhoe&quot;                       &quot;TheNarrativeofArthurGordonPym&quot;
##  [9] &quot;WutheringHeights&quot;              &quot;TheHouseoftheSevenGables&quot;     
## [11] &quot;NorthandSouth&quot;                 &quot;TheWomaninWhite&quot;              
## [13] &quot;GreatExpectations&quot;             &quot;PortraitofaLady&quot;              
## [15] &quot;TreasureIsland&quot;                &quot;JekyllandHyde&quot;                
## [17] &quot;ThePictureofDorianGray&quot;        &quot;Dracula&quot;</code></pre>
<p>With this information associated, we can use <code>inspect()</code> to get a high-level
view of the corpus.</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="working-with-unstructured-data.html#cb526-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(dtm)</span></code></pre></div>
<pre><code>## &lt;&lt;DocumentTermMatrix (documents: 18, terms: 36718)&gt;&gt;
## Non-/sparse entries: 146004/514920
## Sparsity           : 78%
## Maximal term length: 44
## Weighting          : term frequency (tf)
## Sample             :
##                           Terms
## Docs                       back day emily eyes good long made man thought time
##   Dracula                   261 161     0  186  222  147  192 253     153  384
##   GreatExpectations         239 215     0  180  248  169  300 319     237  363
##   Ivanhoe                    77 154     0  100  287  148  151 237      46  182
##   NorthandSouth             177 265     0  197  292  209  232 283     331  407
##   PortraitofaLady           210 239     0  226  463  184  378 328     302  334
##   TheHouseoftheSevenGables   76 110     0   72   93  135  143 253      60   96
##   TheMonk                    81 105     0  184   76  102  167  94      72  163
##   TheMysteriesofUdolpho     116 166  2227  225  179  344  316 225     341  364
##   TheWomaninWhite           417 355     0  233  185  184  244 485     183  686
##   WutheringHeights          116 103     0  116   99   96  102  89     118  121</code></pre>
<p>Of special note here is <strong>sparsity</strong>. Sparsity measures the amount of 0s in the
data. This happens when a document does not contain a term that appears
elsewhere in the corpus. In our case, of the 660,924 entries in this matrix,
80% of them are 0. Such is the way of working with DTMs: they’re big, expansive
data structures that have a lot of empty space.</p>
<p>We can zoom in and filter on term counts with <code>findFreqTerms()</code>. Here are terms
that appear more than 1,000 times in the corpus:</p>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="working-with-unstructured-data.html#cb528-1" aria-hidden="true" tabindex="-1"></a><span class="fu">findFreqTerms</span>(dtm, <span class="dv">1000</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;answered&quot; &quot;appeared&quot; &quot;asked&quot;    &quot;back&quot;     &quot;day&quot;      &quot;dear&quot;    
##  [7] &quot;death&quot;    &quot;door&quot;     &quot;eyes&quot;     &quot;face&quot;     &quot;father&quot;   &quot;felt&quot;    
## [13] &quot;found&quot;    &quot;friend&quot;   &quot;gave&quot;     &quot;give&quot;     &quot;good&quot;     &quot;great&quot;   
## [19] &quot;hand&quot;     &quot;hands&quot;    &quot;head&quot;     &quot;hear&quot;     &quot;heard&quot;    &quot;heart&quot;   
## [25] &quot;hope&quot;     &quot;knew&quot;     &quot;lady&quot;     &quot;leave&quot;    &quot;left&quot;     &quot;life&quot;    
## [31] &quot;light&quot;    &quot;long&quot;     &quot;looked&quot;   &quot;love&quot;     &quot;made&quot;     &quot;make&quot;    
## [37] &quot;man&quot;      &quot;men&quot;      &quot;mind&quot;     &quot;moment&quot;   &quot;morning&quot;  &quot;mother&quot;  
## [43] &quot;night&quot;    &quot;part&quot;     &quot;passed&quot;   &quot;people&quot;   &quot;person&quot;   &quot;place&quot;   
## [49] &quot;poor&quot;     &quot;present&quot;  &quot;put&quot;      &quot;replied&quot;  &quot;returned&quot; &quot;round&quot;   
## [55] &quot;side&quot;     &quot;speak&quot;    &quot;stood&quot;    &quot;thing&quot;    &quot;thou&quot;     &quot;thought&quot; 
## [61] &quot;till&quot;     &quot;time&quot;     &quot;told&quot;     &quot;turned&quot;   &quot;voice&quot;    &quot;woman&quot;   
## [67] &quot;words&quot;    &quot;world&quot;    &quot;young&quot;    &quot;count&quot;    &quot;house&quot;    &quot;madame&quot;  
## [73] &quot;room&quot;     &quot;sir&quot;      &quot;emily&quot;    &quot;margaret&quot; &quot;miss&quot;     &quot;mrs&quot;     
## [79] &quot;isabel&quot;</code></pre>
<p>Using <code>findAssocs()</code>, we can also track which words rise and fall in usage
alongside a given word. (The number in the third argument position of this
function is a cutoff for the strength of a correlation.)</p>
<p>Here’s “boat”:</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb530-1"><a href="working-with-unstructured-data.html#cb530-1" aria-hidden="true" tabindex="-1"></a><span class="fu">findAssocs</span>(dtm, <span class="st">&quot;boat&quot;</span>, .<span class="dv">85</span>)</span></code></pre></div>
<pre><code>## $boat
##   boarding     bucket      geese    pickled       rags figurehead    gunwale 
##       0.90       0.90       0.90       0.90       0.90       0.89       0.89 
##    tumbled    loading 
##       0.88       0.85</code></pre>
<p>Here’s “writing” (there are a lot of terms, so we’ll limit to 15):</p>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb532-1"><a href="working-with-unstructured-data.html#cb532-1" aria-hidden="true" tabindex="-1"></a>writing <span class="ot">&lt;-</span> <span class="fu">findAssocs</span>(dtm, <span class="st">&quot;writing&quot;</span>, .<span class="dv">85</span>)</span>
<span id="cb532-2"><a href="working-with-unstructured-data.html#cb532-2" aria-hidden="true" tabindex="-1"></a>writing[[<span class="dv">1</span>]][<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>]</span></code></pre></div>
<pre><code>##       letter     messages    inquiries    hindrance  certificate        dears 
##         0.98         0.98         0.97         0.97         0.97         0.97 
##     drawings    anonymous         copy     disposal explanations   indirectly 
##         0.96         0.96         0.96         0.96         0.96         0.96 
##   mercifully     madhouse     outburst 
##         0.96         0.96         0.96</code></pre>
</div>
<div id="corpus-term-counts" class="section level3" number="19.7.5">
<h3><span class="header-section-number">19.7.5</span> Corpus Term Counts</h3>
<p>From here, it would be useful to get a full count of all the terms in the corpus.
We can transform the DTM into a matrix and then a data frame.</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="working-with-unstructured-data.html#cb534-1" aria-hidden="true" tabindex="-1"></a>term_counts <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(dtm)</span>
<span id="cb534-2"><a href="working-with-unstructured-data.html#cb534-2" aria-hidden="true" tabindex="-1"></a>term_counts <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">sort</span>(<span class="fu">colSums</span>(term_counts), <span class="at">decreasing=</span><span class="cn">TRUE</span>))</span>
<span id="cb534-3"><a href="working-with-unstructured-data.html#cb534-3" aria-hidden="true" tabindex="-1"></a>term_counts <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="at">newColName=</span><span class="fu">rownames</span>(term_counts), term_counts)</span>
<span id="cb534-4"><a href="working-with-unstructured-data.html#cb534-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(term_counts) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;term&quot;</span>, <span class="st">&quot;count&quot;</span>)</span></code></pre></div>
<p>As before, let’s plot the top 50 terms in these counts, but this time, they will
cover the entire corpus:</p>
<div class="sourceCode" id="cb535"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb535-1"><a href="working-with-unstructured-data.html#cb535-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>term_counts[<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>, ], <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">fct_reorder</span>(term, <span class="sc">-</span>count), <span class="at">y=</span>count)) <span class="sc">+</span></span>
<span id="cb535-2"><a href="working-with-unstructured-data.html#cb535-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span> </span>
<span id="cb535-3"><a href="working-with-unstructured-data.html#cb535-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>, <span class="at">vjust=</span><span class="fl">0.5</span>, <span class="at">hjust=</span><span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb535-4"><a href="working-with-unstructured-data.html#cb535-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Top 50 words in 18 Nineteenth-Century Novels&quot;</span>, <span class="at">x=</span><span class="st">&quot;Word&quot;</span>, <span class="at">y=</span><span class="st">&quot;Count&quot;</span>)</span></code></pre></div>
<p><img src="19_unstructured_data_files/figure-html/unnamed-chunk-45-1.png" width="960" /></p>
<p>This looks good, though the words here are all pretty common. In fact, many of
them are simply the most common words in the English language. “Time” is the
64th-most frequent word in English; “make” is the 50th. As it stands, then,
this graph doesn’t tell us very much about the <em>specificity</em> of our particular
collection of texts; if we ran the same process on English novels from the
twentieth century, we’d probably produce very similar output.</p>
</div>
<div id="tfidf-scores" class="section level3" number="19.7.6">
<h3><span class="header-section-number">19.7.6</span> tf–idf Scores</h3>
<p>Given this, if we want to know what makes our corpus special, we need a measure
of uniqueness for the terms it contains. One of the most common ways to do this
is to get what’s called a <strong>tf–idf</strong> score (short for “term frequency—inverse
document frequency”) for each term in our corpus. tf–idf is a weighting method. ß
a <strong>tf–idf</strong> score (short for “term frequency—inverse document frequency”).
It increases proportionally to the number of times a word appears in a
document but is importantly offset by the number of documents in the corpus that
contain this term. This offset adjusts for common words across a corpus, pushing
their scores down while boosting the scores of rarer terms in the corpus.</p>
<p>Inverse document frequency can be expressed as:</p>
<p><span class="math display">\[\begin{align*}
idf_i = log(\frac{n}{df_i})
\end{align*}\]</span></p>
<p>Where <span class="math inline">\(idf_i\)</span> is the idf score for term <span class="math inline">\(i\)</span>, <span class="math inline">\(df_i\)</span> is the number of documents
that contain <span class="math inline">\(i\)</span>, and <span class="math inline">\(n\)</span> is the total number of documents.</p>
<p>A tf-idf score can be calculated by the following:</p>
<p><span class="math display">\[\begin{align*}
w_i,_j = tf_i,_j \times idf_i
\end{align*}\]</span></p>
<p>Where <span class="math inline">\(w_i,_j\)</span> is the tf–idf score of term <span class="math inline">\(i\)</span> in document <span class="math inline">\(j\)</span>, <span class="math inline">\(tf_i,_j\)</span> is
the term frequency for <span class="math inline">\(i\)</span> in <span class="math inline">\(j\)</span>, and <span class="math inline">\(idf_i\)</span> is the inverse document score.</p>
<p>While it’s good to know the underlying equations here, you won’t be tested on
the math specifically. And as it happens, <code>tm</code> has a way to perform the above
math for each term in a corpus. We can implement tf–idf scores when making a
document-term matrix:</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="working-with-unstructured-data.html#cb536-1" aria-hidden="true" tabindex="-1"></a>dtm_tfidf <span class="ot">&lt;-</span> <span class="fu">DocumentTermMatrix</span>(corpus, <span class="at">control=</span><span class="fu">list</span>(<span class="at">weighting=</span>weightTfIdf))</span>
<span id="cb536-2"><a href="working-with-unstructured-data.html#cb536-2" aria-hidden="true" tabindex="-1"></a>dtm_tfidf<span class="sc">$</span>dimnames<span class="sc">$</span>Docs <span class="ot">&lt;-</span> C19_novels<span class="sc">$</span>title</span></code></pre></div>
<p>To see what difference it makes, let’s plot the top terms in our corpus using
their tf–idf scores.</p>
<div class="sourceCode" id="cb537"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb537-1"><a href="working-with-unstructured-data.html#cb537-1" aria-hidden="true" tabindex="-1"></a>tfidf_counts <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(dtm_tfidf)</span>
<span id="cb537-2"><a href="working-with-unstructured-data.html#cb537-2" aria-hidden="true" tabindex="-1"></a>tfidf_counts <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">sort</span>(<span class="fu">colSums</span>(tfidf_counts), <span class="at">decreasing=</span><span class="cn">TRUE</span>))</span>
<span id="cb537-3"><a href="working-with-unstructured-data.html#cb537-3" aria-hidden="true" tabindex="-1"></a>tfidf_counts <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="at">newColName=</span><span class="fu">rownames</span>(tfidf_counts), tfidf_counts)</span>
<span id="cb537-4"><a href="working-with-unstructured-data.html#cb537-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tfidf_counts) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;term&quot;</span>, <span class="st">&quot;tfidf&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb538-1"><a href="working-with-unstructured-data.html#cb538-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>tfidf_counts[<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>, ], <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">fct_reorder</span>(term, <span class="sc">-</span>tfidf), <span class="at">y=</span>tfidf)) <span class="sc">+</span></span>
<span id="cb538-2"><a href="working-with-unstructured-data.html#cb538-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span> </span>
<span id="cb538-3"><a href="working-with-unstructured-data.html#cb538-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>, <span class="at">vjust=</span><span class="fl">0.5</span>, <span class="at">hjust=</span><span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb538-4"><a href="working-with-unstructured-data.html#cb538-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Words with the 50-highest tf--idf scores in 18 Nineteenth-Century Novels&quot;</span>, <span class="at">x=</span><span class="st">&quot;Word&quot;</span>, <span class="at">y=</span><span class="st">&quot;TF-IDF&quot;</span>)</span></code></pre></div>
<p><img src="19_unstructured_data_files/figure-html/unnamed-chunk-48-1.png" width="960" /></p>
<p>Lots of names! That makes sense: heavily weighted terms in these novels are
going to be terms that are unique to each text. Main characters’ names are used
a lot in novels, and the main character names in these novels are all unique.</p>
<p>To see in more concrete way how tf–idf scores might make a difference in the
way we analyze our corpus, we’ll do two last things. First, we’ll look again at
term correlations, using the same words from above with <code>findAssoscs()</code>, but
this time we’ll use tf–idf scores.</p>
<p>Here’s “boat”:</p>
<div class="sourceCode" id="cb539"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb539-1"><a href="working-with-unstructured-data.html#cb539-1" aria-hidden="true" tabindex="-1"></a><span class="fu">findAssocs</span>(dtm_tfidf, <span class="st">&quot;boat&quot;</span>, .<span class="dv">85</span>)</span></code></pre></div>
<pre><code>## $boat
##       shore    boarding      bucket       geese     pickled     gunwale 
##        0.96        0.93        0.93        0.93        0.93        0.92 
##         sea      rudder  figurehead        rags       boats     pistols 
##        0.91        0.91        0.91        0.91        0.90        0.90 
##    thumping      sailed        crew         oar       sails     tumbled 
##        0.90        0.89        0.89        0.89        0.89        0.89 
##    bowsprit     inkling     muskets  navigation  scoundrels     shipped 
##        0.89        0.89        0.89        0.89        0.89        0.89 
##      anchor    rattling       shark      splash    steering       board 
##        0.88        0.88        0.88        0.88        0.88        0.87 
##      pistol      seamen    bulwarks    capsized      musket        deck 
##        0.87        0.87        0.87        0.87        0.87        0.86 
##     loading         aft       avast       belay      berths   broadside 
##        0.86        0.86        0.86        0.86        0.86        0.86 
##      cables    cruising    diagonal  freshwater     headway      hornet 
##        0.86        0.86        0.86        0.86        0.86        0.86 
##     jibboom     jupiter    mainland marlinspike     monthly musketballs 
##        0.86        0.86        0.86        0.86        0.86        0.86 
##     nettled outnumbered      patted     plumped     riggers    schooner 
##        0.86        0.86        0.86        0.86        0.86        0.86 
##   schooners   seaworthy    swamping      tiller     tonnage       towed 
##        0.86        0.86        0.86        0.86        0.86        0.86 
##       yawed        mate    trinkets        dirk    mainmast     squalls 
##        0.86        0.85        0.85        0.85        0.85        0.85</code></pre>
<p>Here’s “writing”:</p>
<div class="sourceCode" id="cb541"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb541-1"><a href="working-with-unstructured-data.html#cb541-1" aria-hidden="true" tabindex="-1"></a><span class="fu">findAssocs</span>(dtm_tfidf, <span class="st">&quot;writing&quot;</span>, .<span class="dv">85</span>)</span></code></pre></div>
<pre><code>## $writing
##     messages    hindrance    inquiries     disposal       london  certificate 
##         0.90         0.89         0.88         0.87         0.87         0.87 
##         copy lifeinterest        dears     madhouse 
##         0.86         0.86         0.86         0.86</code></pre>
<p>There’s a bit more semantic focus in these results, especially for “boat.” And
notice also the difference in the number of returns: “writing” might be fairly
ubiquitous in our corpus, or its usage might not have much focus. On the other
hand, “boat” correlates highly with other seafaring terms. Most probably this
is because only a few novels talk about boats.</p>
<p>Finally, we can disaggregate our giant term count graph from above to focus
more closely on the uniqueness of individual novels in our corpus. First, we’ll
make a data frame from our tf–idf DTM. We’ll transpose the DTM so the
documents are our variables (columns) and the corpus vocabulary terms are our
observations (or rows). Don’t forget the <code>t</code>!</p>
<div class="sourceCode" id="cb543"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb543-1"><a href="working-with-unstructured-data.html#cb543-1" aria-hidden="true" tabindex="-1"></a>tfidf_df <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(dtm_tfidf)</span>
<span id="cb543-2"><a href="working-with-unstructured-data.html#cb543-2" aria-hidden="true" tabindex="-1"></a>tfidf_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(tfidf_df))</span>
<span id="cb543-3"><a href="working-with-unstructured-data.html#cb543-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tfidf_df) <span class="ot">&lt;-</span> C19_novels<span class="sc">$</span>title</span></code></pre></div>
<p>With this data frame made, we can order our rows by the highest value for a given
column. In other words, we can find out not only the top terms for a novel, but
the top most <em>unique</em> terms in that novel.</p>
<p>Here’s <em>Dracula</em>:</p>
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb544-1"><a href="working-with-unstructured-data.html#cb544-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(tfidf_df[<span class="fu">order</span>(tfidf_df<span class="sc">$</span>Dracula, <span class="at">decreasing=</span><span class="cn">TRUE</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>],])</span></code></pre></div>
<pre><code>##  [1] &quot;helsing&quot;      &quot;mina&quot;         &quot;lucy&quot;         &quot;harker&quot;       &quot;jonathan&quot;    
##  [6] &quot;van&quot;          &quot;seward&quot;       &quot;godalming&quot;    &quot;quincey&quot;      &quot;morris&quot;      
## [11] &quot;professor&quot;    &quot;diary&quot;        &quot;arthur&quot;       &quot;renfield&quot;     &quot;westenra&quot;    
## [16] &quot;whilst&quot;       &quot;undead&quot;       &quot;…&quot;            &quot;dracula&quot;      &quot;tonight&quot;     
## [21] &quot;whitby&quot;       &quot;count&quot;        &quot;varna&quot;        &quot;carfax&quot;       &quot;journal&quot;     
## [26] &quot;hawkins&quot;      &quot;madam&quot;        &quot;galatz&quot;       &quot;pier&quot;         &quot;vampire&quot;     
## [31] &quot;wolves&quot;       &quot;tomorrow&quot;     &quot;czarina&quot;      &quot;boxes&quot;        &quot;telegram&quot;    
## [36] &quot;hypnotic&quot;     &quot;garlic&quot;       &quot;today&quot;        &quot;holmwood&quot;     &quot;phonograph&quot;  
## [41] &quot;transylvania&quot; &quot;piccadilly&quot;   &quot;slovaks&quot;      &quot;cliff&quot;        &quot;exeter&quot;      
## [46] &quot;mrs&quot;          &quot;hypnotize&quot;    &quot;shorthand&quot;    &quot;skinsky&quot;      &quot;szgany&quot;</code></pre>
<p>Here’s <em>Frankenstein</em>:</p>
<div class="sourceCode" id="cb546"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb546-1"><a href="working-with-unstructured-data.html#cb546-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(tfidf_df[<span class="fu">order</span>(tfidf_df<span class="sc">$</span>Frankenstein, <span class="at">decreasing=</span><span class="cn">TRUE</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>],])</span></code></pre></div>
<pre><code>##  [1] &quot;clerval&quot;      &quot;justine&quot;      &quot;elizabeth&quot;    &quot;felix&quot;        &quot;geneva&quot;      
##  [6] &quot;frankenstein&quot; &quot;safie&quot;        &quot;dæmon&quot;        &quot;cottagers&quot;    &quot;ingolstadt&quot;  
## [11] &quot;kirwin&quot;       &quot;mont&quot;         &quot;agatha&quot;       &quot;victor&quot;       &quot;ernest&quot;      
## [16] &quot;sledge&quot;       &quot;krempe&quot;       &quot;lacey&quot;        &quot;waldman&quot;      &quot;agrippa&quot;     
## [21] &quot;walton&quot;       &quot;mountains&quot;    &quot;creator&quot;      &quot;cottage&quot;      &quot;beaufort&quot;    
## [26] &quot;hovel&quot;        &quot;switzerland&quot;  &quot;blanc&quot;        &quot;cornelius&quot;    &quot;william&quot;     
## [31] &quot;protectors&quot;   &quot;moritz&quot;       &quot;henry&quot;        &quot;labours&quot;      &quot;ice&quot;         
## [36] &quot;chamounix&quot;    &quot;glacier&quot;      &quot;jura&quot;         &quot;werter&quot;       &quot;endeavoured&quot; 
## [41] &quot;lake&quot;         &quot;leghorn&quot;      &quot;monster&quot;      &quot;rhine&quot;        &quot;magistrate&quot;  
## [46] &quot;murderer&quot;     &quot;belrive&quot;      &quot;lavenza&quot;      &quot;salêve&quot;       &quot;saville&quot;</code></pre>
<p>And here’s <em>Sense and Sensibility</em>:</p>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb548-1"><a href="working-with-unstructured-data.html#cb548-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(tfidf_df[<span class="fu">order</span>(tfidf_df<span class="sc">$</span>SenseandSensibility, <span class="at">decreasing=</span><span class="cn">TRUE</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>],])</span></code></pre></div>
<pre><code>##  [1] &quot;elinor&quot;     &quot;marianne&quot;   &quot;dashwood&quot;   &quot;jennings&quot;   &quot;willoughby&quot;
##  [6] &quot;lucy&quot;       &quot;brandon&quot;    &quot;ferrars&quot;    &quot;colonel&quot;    &quot;barton&quot;    
## [11] &quot;edward&quot;     &quot;mrs&quot;        &quot;middleton&quot;  &quot;norland&quot;    &quot;palmer&quot;    
## [16] &quot;steele&quot;     &quot;dashwoods&quot;  &quot;delaford&quot;   &quot;steeles&quot;    &quot;cleveland&quot; 
## [21] &quot;mama&quot;       &quot;fanny&quot;      &quot;middletons&quot; &quot;allenham&quot;   &quot;sister&quot;    
## [26] &quot;morton&quot;     &quot;devonshire&quot; &quot;combe&quot;      &quot;charlotte&quot;  &quot;margaret&quot;  
## [31] &quot;miss&quot;       &quot;park&quot;       &quot;exeter&quot;     &quot;magna&quot;      &quot;berkeley&quot;  
## [36] &quot;john&quot;       &quot;harley&quot;     &quot;beaux&quot;      &quot;behaviour&quot;  &quot;robert&quot;    
## [41] &quot;cottage&quot;    &quot;sisters&quot;    &quot;longstaple&quot; &quot;smith&quot;      &quot;pianoforte&quot;
## [46] &quot;daughters&quot;  &quot;likewise&quot;   &quot;nancy&quot;      &quot;motherlaw&quot;  &quot;parsonage&quot;</code></pre>
<p>Names still rank high, but we can see in these results other words that indeed
seem to be particular to each novel.</p>
</div>
<div id="basic-similarity-measures" class="section level3" number="19.7.7">
<h3><span class="header-section-number">19.7.7</span> Basic Similarity Measures</h3>
</div>
<div id="document-clustering" class="section level3" number="19.7.8">
<h3><span class="header-section-number">19.7.8</span> Document Clustering</h3>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="working-with-unstructured-data.html#cb550-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cluster)</span>
<span id="cb550-2"><a href="working-with-unstructured-data.html#cb550-2" aria-hidden="true" tabindex="-1"></a>labs <span class="ot">&lt;-</span> <span class="fu">paste</span>(C19_novels<span class="sc">$</span>title, C19_novels<span class="sc">$</span>genre)</span>
<span id="cb550-3"><a href="working-with-unstructured-data.html#cb550-3" aria-hidden="true" tabindex="-1"></a>distances <span class="ot">&lt;-</span> <span class="fu">scale</span>(<span class="fu">dist</span>(<span class="fu">as.matrix</span>(dtm_tfidf)))</span>
<span id="cb550-4"><a href="working-with-unstructured-data.html#cb550-4" aria-hidden="true" tabindex="-1"></a>clust <span class="ot">&lt;-</span> <span class="fu">agnes</span>(distances, <span class="at">metric=</span><span class="st">&quot;manhattan&quot;</span>, <span class="at">method=</span><span class="st">&quot;weighted&quot;</span>)</span>
<span id="cb550-5"><a href="working-with-unstructured-data.html#cb550-5" aria-hidden="true" tabindex="-1"></a><span class="fu">pltree</span>(clust, <span class="at">cex=</span><span class="fl">0.6</span>, <span class="at">hang=</span><span class="sc">-</span><span class="dv">1</span>, <span class="at">main=</span><span class="st">&quot;Term Frequency Vector Distances&quot;</span>, <span class="at">lab=</span>labs)</span></code></pre></div>
<p><img src="19_unstructured_data_files/figure-html/unnamed-chunk-55-1.png" width="960" /></p>

<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-anKeyplayerPackageLocating2016" class="csl-entry">
An, Weihua, and Yu-Hsin Liu. 2016. <span>“Keyplayer: <span>An R Package</span> for <span>Locating Key Players</span> in <span>Social Networks</span>.”</span> <em>The R Journal</em> 8 (1): 257. <a href="https://doi.org/10.32614/RJ-2016-018">https://doi.org/10.32614/RJ-2016-018</a>.
</div>
<div id="ref-balabanApplicationsGraphTheory1985" class="csl-entry">
Balaban, Alexandru T. 1985. <span>“Applications of Graph Theory in Chemistry.”</span> <em>Journal of Chemical Information and Modeling</em> 25 (3): 334–43. <a href="https://doi.org/10.1021/ci00047a033">https://doi.org/10.1021/ci00047a033</a>.
</div>
<div id="ref-bassettNetworkNeuroscience2017" class="csl-entry">
Bassett, Danielle S., and Olaf Sporns. 2017. <span>“Network Neuroscience.”</span> <em>Nature Neuroscience</em> 20 (3): 353–64. <a href="https://doi.org/10.1038/nn.4502">https://doi.org/10.1038/nn.4502</a>.
</div>
<div id="ref-fanGraphbasedMethodSocial2019" class="csl-entry">
Fan, Chao, and Ali Mostafavi. 2019. <span>“A Graph-Based Method for Social Sensing of Infrastructure Disruptions in Disasters.”</span> <em>Computer-Aided Civil and Infrastructure Engineering</em> 34 (12): 1055–70. <a href="https://doi.org/10.1111/mice.12457">https://doi.org/10.1111/mice.12457</a>.
</div>
<div id="ref-kadushinUnderstandingSocialNetworks2012" class="csl-entry">
Kadushin, Charles. 2012. <em>Understanding <span>Social Networks</span>: <span>Theories</span>, <span>Concepts</span>, and <span>Findings</span></em>. <span>New York, NY</span>: <span>Oxford University Press</span>.
</div>
<div id="ref-krebsMappingNetworksTerrorist2002" class="csl-entry">
Krebs, Valdis E. 2002. <span>“Mapping Networks of Terrorist Cells.”</span> <em>Connections</em> 24 (3): 43–52.
</div>
<div id="ref-morenoWhoShallSurvive1953" class="csl-entry">
Moreno, Jacob L. 1953. <span>“Who <span>Shall Survive</span>?: <span>Foundations</span> of <span>Sociometry</span>, <span>Group Psychotherapy</span> and <span>Sociodrama</span>.”</span> In. <span>Beacon, N.Y.</span>: <span>Beacon House Inc.</span>
</div>
<div id="ref-pageMethodNodeRanking2001" class="csl-entry">
Page, Lawrence. 2001. Method for node ranking in a linked database. US6285999B1, issued September 2001. <a href="https://patents.google.com/patent/US6285999/en">https://patents.google.com/patent/US6285999/en</a>.
</div>
<div id="ref-robinsIntroductionExponentialRandom2007" class="csl-entry">
Robins, Garry, Pip Pattison, Yuval Kalish, and Dean Lusher. 2007. <span>“An Introduction to Exponential Random Graph (p*) Models for Social Networks.”</span> <em>Social Networks</em>, Special <span>section</span>: <span>Advances</span> in <span>Exponential Random Graph</span> (p*) <span>Models</span>, 29 (2): 173–91. <a href="https://doi.org/10.1016/j.socnet.2006.08.002">https://doi.org/10.1016/j.socnet.2006.08.002</a>.
</div>
<div id="ref-robinsRecentDevelopmentsExponential2007" class="csl-entry">
Robins, Garry, Tom Snijders, Peng Wang, Mark Handcock, and Philippa Pattison. 2007. <span>“Recent Developments in Exponential Random Graph (p*) Models for Social Networks.”</span> <em>Social Networks</em>, Special <span>section</span>: <span>Advances</span> in <span>Exponential Random Graph</span> (p*) <span>Models</span>, 29 (2): 192–215. <a href="https://doi.org/10.1016/j.socnet.2006.08.003">https://doi.org/10.1016/j.socnet.2006.08.003</a>.
</div>
<div id="ref-wassermanSocialNetworkAnalysis1994" class="csl-entry">
Wasserman, Stanley, and Katherine Faust. 1994. <em>Social Network Analysis: <span>Methods</span> and Applications</em>. <span>Cambridge, UK</span>: <span>Cambridge University Press</span>.
</div>
</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-forensics.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ucdavisdatalab/adventures_in_data_science/edit/master/19_unstructured_data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ucdavisdatalab/adventures_in_data_science/blob/master/19_unstructured_data.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
