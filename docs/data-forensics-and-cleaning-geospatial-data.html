<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>20 Data Forensics and Cleaning - Geospatial Data | Adventures in Data Science</title>
  <meta name="description" content="20 Data Forensics and Cleaning - Geospatial Data | Adventures in Data Science" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="20 Data Forensics and Cleaning - Geospatial Data | Adventures in Data Science" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://ucdavisdatalab.github.io/adventures_in_data_science/" />
  
  
  <meta name="github-repo" content="ucdavisdatalab/adventures_in_data_science" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="20 Data Forensics and Cleaning - Geospatial Data | Adventures in Data Science" />
  
  
  

<meta name="author" content="Dr. Carl G. Stahmer" />
<meta name="author" content="Dr. Pamela L. Reynolds" />
<meta name="author" content="Dr. Tyler Shoemaker" />
<meta name="author" content="Carrie Alexander" />
<meta name="author" content="Arthur Koehl" />
<meta name="author" content="Nick Ulle" />
<meta name="author" content="Jared Joseph" />
<meta name="author" content="Dr. Wesley Brooks" />
<meta name="author" content="Dr. Michele Tobias" />


<meta name="date" content="2021-03-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="working-with-unstructured-data.html"/>

<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>
<link href="libs/vis-4.20.1/vis.css" rel="stylesheet" />
<script src="libs/vis-4.20.1/vis.min.js"></script>
<script src="libs/visNetwork-binding-2.0.9/visNetwork.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://datalab.ucdavis.edu/">
  <img src="img/datalab-logo-full-color-rgb.png" style="height: 100%; width: 100%; object-fit: contain" />
</a></li>
<li><a href="./" style="font-size: 18px">Adventures in Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="1" data-path="working-with-the-command-line.html"><a href="working-with-the-command-line.html"><i class="fa fa-check"></i><b>1</b> Working with the Command Line</a>
<ul>
<li class="chapter" data-level="1.1" data-path="working-with-the-command-line.html"><a href="working-with-the-command-line.html#interacting-with-the-command-line"><i class="fa fa-check"></i><b>1.1</b> Interacting with the Command Line</a></li>
<li class="chapter" data-level="1.2" data-path="working-with-the-command-line.html"><a href="working-with-the-command-line.html#common-command-line-commands"><i class="fa fa-check"></i><b>1.2</b> Common Command Line Commands</a></li>
<li class="chapter" data-level="1.3" data-path="working-with-the-command-line.html"><a href="working-with-the-command-line.html#command-line-text-editors"><i class="fa fa-check"></i><b>1.3</b> Command Line Text Editors</a></li>
<li class="chapter" data-level="1.4" data-path="working-with-the-command-line.html"><a href="working-with-the-command-line.html#basic-vim-commands"><i class="fa fa-check"></i><b>1.4</b> Basic Vim Commands</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html"><i class="fa fa-check"></i><b>2</b> Introduction to Version Control</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#what-is-version-control"><i class="fa fa-check"></i><b>2.1</b> What is Version Control?</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#software-assisted-version-control"><i class="fa fa-check"></i><b>2.2</b> Software Assisted Version Control</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#local-vs-server-based-version-control"><i class="fa fa-check"></i><b>2.3</b> Local vs Server Based Version Control</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#central-version-control-systems"><i class="fa fa-check"></i><b>2.4</b> Central Version Control Systems</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#distributed-version-control-systems"><i class="fa fa-check"></i><b>2.5</b> Distributed Version Control Systems</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#the-best-of-both-worlds"><i class="fa fa-check"></i><b>2.6</b> The Best of Both Worlds</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#vcs-and-the-computer-file-system"><i class="fa fa-check"></i><b>2.7</b> VCS and the Computer File System</a></li>
<li class="chapter" data-level="2.8" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#how-computers-store-and-access-information"><i class="fa fa-check"></i><b>2.8</b> How Computers Store and Access Information</a></li>
<li class="chapter" data-level="2.9" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#how-vcs-manage-your-files"><i class="fa fa-check"></i><b>2.9</b> How VCS Manage Your Files</a></li>
<li class="chapter" data-level="2.10" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#graph-based-data-management"><i class="fa fa-check"></i><b>2.10</b> Graph-Based Data Management</a></li>
<li class="chapter" data-level="2.11" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#additional-resources"><i class="fa fa-check"></i><b>2.11</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction-to-git.html"><a href="introduction-to-git.html"><i class="fa fa-check"></i><b>3</b> Introduction to Git</a>
<ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#save-stage-commit"><i class="fa fa-check"></i><b>3.1</b> Save, Stage, Commit</a></li>
<li class="chapter" data-level="3.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#creating-your-first-repo"><i class="fa fa-check"></i><b>3.2</b> Creating Your First Repo</a></li>
<li class="chapter" data-level="3.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#checking-the-status-of-a-repo"><i class="fa fa-check"></i><b>3.3</b> Checking the Status of a Repo</a></li>
<li class="chapter" data-level="3.4" data-path="introduction-to-git.html"><a href="introduction-to-git.html#version-of-a-file"><i class="fa fa-check"></i><b>3.4</b> Version of a File</a></li>
<li class="chapter" data-level="3.5" data-path="introduction-to-git.html"><a href="introduction-to-git.html#view-a-history-of-your-commits"><i class="fa fa-check"></i><b>3.5</b> View a History of Your Commits</a></li>
<li class="chapter" data-level="3.6" data-path="introduction-to-git.html"><a href="introduction-to-git.html#comparing-commits"><i class="fa fa-check"></i><b>3.6</b> Comparing Commits</a></li>
<li class="chapter" data-level="3.7" data-path="introduction-to-git.html"><a href="introduction-to-git.html#comparing-files"><i class="fa fa-check"></i><b>3.7</b> Comparing Files</a></li>
<li class="chapter" data-level="3.8" data-path="introduction-to-git.html"><a href="introduction-to-git.html#to-view-an-earlier-commit"><i class="fa fa-check"></i><b>3.8</b> To View an Earlier Commit</a></li>
<li class="chapter" data-level="3.9" data-path="introduction-to-git.html"><a href="introduction-to-git.html#undoing-things"><i class="fa fa-check"></i><b>3.9</b> Undoing Things</a></li>
<li class="chapter" data-level="3.10" data-path="introduction-to-git.html"><a href="introduction-to-git.html#when-things-go-wrong"><i class="fa fa-check"></i><b>3.10</b> When Things go Wrong!</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="git-branching.html"><a href="git-branching.html"><i class="fa fa-check"></i><b>4</b> Git Branching</a>
<ul>
<li class="chapter" data-level="4.1" data-path="git-branching.html"><a href="git-branching.html#merging-branches"><i class="fa fa-check"></i><b>4.1</b> Merging Branches</a></li>
<li class="chapter" data-level="4.2" data-path="git-branching.html"><a href="git-branching.html#branching-workflows"><i class="fa fa-check"></i><b>4.2</b> Branching Workflows</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>5</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="5.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#learning-objectives"><i class="fa fa-check"></i><b>5.1</b> Learning objectives</a></li>
<li class="chapter" data-level="5.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#before-we-start"><i class="fa fa-check"></i><b>5.2</b> Before We Start</a></li>
<li class="chapter" data-level="5.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#mathematical-operations"><i class="fa fa-check"></i><b>5.3</b> Mathematical Operations</a></li>
<li class="chapter" data-level="5.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#help"><i class="fa fa-check"></i><b>5.4</b> HELP!</a></li>
<li class="chapter" data-level="5.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#calls"><i class="fa fa-check"></i><b>5.5</b> Calls</a></li>
<li class="chapter" data-level="5.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#variables"><i class="fa fa-check"></i><b>5.6</b> Variables</a></li>
<li class="chapter" data-level="5.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-types-and-classes"><i class="fa fa-check"></i><b>5.7</b> Data Types and Classes</a></li>
<li class="chapter" data-level="5.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#vectors"><i class="fa fa-check"></i><b>5.8</b> Vectors</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basic-statistics-on-vectors"><i class="fa fa-check"></i><b>5.8.1</b> Basic Statistics on Vectors</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="introduction-to-r.html"><a href="introduction-to-r.html#matrices-arrays-lists"><i class="fa fa-check"></i><b>5.9</b> Matrices, Arrays &amp; Lists</a></li>
<li class="chapter" data-level="5.10" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-frames"><i class="fa fa-check"></i><b>5.10</b> Data Frames</a>
<ul>
<li class="chapter" data-level="5.10.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#inspecting-data-frames"><i class="fa fa-check"></i><b>5.10.1</b> Inspecting Data Frames</a></li>
</ul></li>
<li class="chapter" data-level="5.11" data-path="introduction-to-r.html"><a href="introduction-to-r.html#subsetting"><i class="fa fa-check"></i><b>5.11</b> Subsetting</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="control-structures.html"><a href="control-structures.html"><i class="fa fa-check"></i><b>6</b> Control Structures</a>
<ul>
<li class="chapter" data-level="6.1" data-path="control-structures.html"><a href="control-structures.html#if-statement"><i class="fa fa-check"></i><b>6.1</b> <em>If</em> Statement</a></li>
<li class="chapter" data-level="6.2" data-path="control-structures.html"><a href="control-structures.html#relationship-operators"><i class="fa fa-check"></i><b>6.2</b> Relationship Operators</a></li>
<li class="chapter" data-level="6.3" data-path="control-structures.html"><a href="control-structures.html#if-else-statement"><i class="fa fa-check"></i><b>6.3</b> <em>If Else</em> Statement</a></li>
<li class="chapter" data-level="6.4" data-path="control-structures.html"><a href="control-structures.html#ifelse-statement"><i class="fa fa-check"></i><b>6.4</b> <em>ifelse</em> Statement</a></li>
<li class="chapter" data-level="6.5" data-path="control-structures.html"><a href="control-structures.html#the-switch-statement"><i class="fa fa-check"></i><b>6.5</b> The <em>switch</em> Statement</a></li>
<li class="chapter" data-level="6.6" data-path="control-structures.html"><a href="control-structures.html#the-which-statement"><i class="fa fa-check"></i><b>6.6</b> The <em>which</em> Statement</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="iterating-loops.html"><a href="iterating-loops.html"><i class="fa fa-check"></i><b>7</b> Iterating (Loops)</a>
<ul>
<li class="chapter" data-level="7.1" data-path="iterating-loops.html"><a href="iterating-loops.html#for-i-in-x-loops"><i class="fa fa-check"></i><b>7.1</b> For <em>i</em> in <em>x</em> Loops</a></li>
<li class="chapter" data-level="7.2" data-path="iterating-loops.html"><a href="iterating-loops.html#while-loops"><i class="fa fa-check"></i><b>7.2</b> <em>While</em> Loops</a></li>
<li class="chapter" data-level="7.3" data-path="iterating-loops.html"><a href="iterating-loops.html#repeat-loops"><i class="fa fa-check"></i><b>7.3</b> <em>Repeat</em> Loops</a></li>
<li class="chapter" data-level="7.4" data-path="iterating-loops.html"><a href="iterating-loops.html#break-and-next"><i class="fa fa-check"></i><b>7.4</b> <em>Break</em> and <em>Next</em></a></li>
<li class="chapter" data-level="7.5" data-path="iterating-loops.html"><a href="iterating-loops.html#iterating-data.frame-rows-in-r"><i class="fa fa-check"></i><b>7.5</b> Iterating Data.Frame Rows in R</a></li>
<li class="chapter" data-level="7.6" data-path="iterating-loops.html"><a href="iterating-loops.html#lapply"><i class="fa fa-check"></i><b>7.6</b> <em>lapply()</em></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="packages-and-functions.html"><a href="packages-and-functions.html"><i class="fa fa-check"></i><b>8</b> Packages and Functions</a>
<ul>
<li class="chapter" data-level="8.1" data-path="packages-and-functions.html"><a href="packages-and-functions.html#learning-objectives-1"><i class="fa fa-check"></i><b>8.1</b> Learning objectives</a></li>
<li class="chapter" data-level="8.2" data-path="packages-and-functions.html"><a href="packages-and-functions.html#what-is-a-function"><i class="fa fa-check"></i><b>8.2</b> What is a function?</a></li>
<li class="chapter" data-level="8.3" data-path="packages-and-functions.html"><a href="packages-and-functions.html#what-is-the-basic-syntax-of-a-function-in-r"><i class="fa fa-check"></i><b>8.3</b> What is the basic syntax of a function in R?</a></li>
<li class="chapter" data-level="8.4" data-path="packages-and-functions.html"><a href="packages-and-functions.html#step-1-building-a-function"><i class="fa fa-check"></i><b>8.4</b> Step 1: Building a function</a></li>
<li class="chapter" data-level="8.5" data-path="packages-and-functions.html"><a href="packages-and-functions.html#step-2-calling-the-function"><i class="fa fa-check"></i><b>8.5</b> Step 2: Calling the function</a></li>
<li class="chapter" data-level="8.6" data-path="packages-and-functions.html"><a href="packages-and-functions.html#a-function-can-have-more-than-one-argument"><i class="fa fa-check"></i><b>8.6</b> A function can have more than one argument</a></li>
<li class="chapter" data-level="8.7" data-path="packages-and-functions.html"><a href="packages-and-functions.html#using-a-package-and-function-to-graph-data-and-export-a-.png"><i class="fa fa-check"></i><b>8.7</b> Using a package and function to graph data and export a .png</a></li>
<li class="chapter" data-level="8.8" data-path="packages-and-functions.html"><a href="packages-and-functions.html#saving-functions-and-calling-them-from-another-file"><i class="fa fa-check"></i><b>8.8</b> Saving functions and calling them from another file</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="file-input-and-output.html"><a href="file-input-and-output.html"><i class="fa fa-check"></i><b>9</b> File Input and Output</a>
<ul>
<li class="chapter" data-level="9.1" data-path="file-input-and-output.html"><a href="file-input-and-output.html#objectives"><i class="fa fa-check"></i><b>9.1</b> Objectives</a></li>
<li class="chapter" data-level="9.2" data-path="file-input-and-output.html"><a href="file-input-and-output.html#basic-idea"><i class="fa fa-check"></i><b>9.2</b> Basic Idea</a></li>
<li class="chapter" data-level="9.3" data-path="file-input-and-output.html"><a href="file-input-and-output.html#file-formats"><i class="fa fa-check"></i><b>9.3</b> File Formats</a></li>
<li class="chapter" data-level="9.4" data-path="file-input-and-output.html"><a href="file-input-and-output.html#filesystems-and-paths"><i class="fa fa-check"></i><b>9.4</b> Filesystems and Paths</a></li>
<li class="chapter" data-level="9.5" data-path="file-input-and-output.html"><a href="file-input-and-output.html#get-and-set-working-directory"><i class="fa fa-check"></i><b>9.5</b> get and set working directory</a></li>
<li class="chapter" data-level="9.6" data-path="file-input-and-output.html"><a href="file-input-and-output.html#saving-and-loading-r-data"><i class="fa fa-check"></i><b>9.6</b> saving and loading R data</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="file-input-and-output.html"><a href="file-input-and-output.html#rds"><i class="fa fa-check"></i><b>9.6.1</b> rds</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="file-input-and-output.html"><a href="file-input-and-output.html#reading-and-writing-text-data"><i class="fa fa-check"></i><b>9.7</b> Reading and Writing Text data</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="file-input-and-output.html"><a href="file-input-and-output.html#tabular-data"><i class="fa fa-check"></i><b>9.7.1</b> tabular data</a></li>
<li class="chapter" data-level="9.7.2" data-path="file-input-and-output.html"><a href="file-input-and-output.html#read-and-write-table"><i class="fa fa-check"></i><b>9.7.2</b> read and write table</a></li>
<li class="chapter" data-level="9.7.3" data-path="file-input-and-output.html"><a href="file-input-and-output.html#csv-format"><i class="fa fa-check"></i><b>9.7.3</b> CSV format</a></li>
<li class="chapter" data-level="9.7.4" data-path="file-input-and-output.html"><a href="file-input-and-output.html#non-tabular-data"><i class="fa fa-check"></i><b>9.7.4</b> Non tabular data</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="file-input-and-output.html"><a href="file-input-and-output.html#urls-as-files"><i class="fa fa-check"></i><b>9.8</b> URLS as files</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html"><i class="fa fa-check"></i><b>10</b> Strings and Regular Expressions</a>
<ul>
<li class="chapter" data-level="10.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#printing-output"><i class="fa fa-check"></i><b>10.1</b> Printing Output</a></li>
<li class="chapter" data-level="10.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#escape-sequences"><i class="fa fa-check"></i><b>10.2</b> Escape Sequences</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#raw-strings"><i class="fa fa-check"></i><b>10.2.1</b> Raw Strings</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#character-encodings"><i class="fa fa-check"></i><b>10.3</b> Character Encodings</a></li>
<li class="chapter" data-level="10.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#the-tidyverse"><i class="fa fa-check"></i><b>10.4</b> The Tidyverse</a></li>
<li class="chapter" data-level="10.5" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#the-stringr-package"><i class="fa fa-check"></i><b>10.5</b> The stringr Package</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#splitting-strings"><i class="fa fa-check"></i><b>10.5.1</b> Splitting Strings</a></li>
<li class="chapter" data-level="10.5.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#replacing-parts-of-strings"><i class="fa fa-check"></i><b>10.5.2</b> Replacing Parts of Strings</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#regular-expressions"><i class="fa fa-check"></i><b>10.6</b> Regular Expressions</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#the-wildcard"><i class="fa fa-check"></i><b>10.6.1</b> The Wildcard</a></li>
<li class="chapter" data-level="10.6.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#escape-sequences-1"><i class="fa fa-check"></i><b>10.6.2</b> Escape Sequences</a></li>
<li class="chapter" data-level="10.6.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#anchors"><i class="fa fa-check"></i><b>10.6.3</b> Anchors</a></li>
<li class="chapter" data-level="10.6.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#character-classes"><i class="fa fa-check"></i><b>10.6.4</b> Character Classes</a></li>
<li class="chapter" data-level="10.6.5" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#quantifiers"><i class="fa fa-check"></i><b>10.6.5</b> Quantifiers</a></li>
<li class="chapter" data-level="10.6.6" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#groups"><i class="fa fa-check"></i><b>10.6.6</b> Groups</a></li>
<li class="chapter" data-level="10.6.7" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#extracting-matches"><i class="fa fa-check"></i><b>10.6.7</b> Extracting Matches</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>11</b> Data Structures</a>
<ul>
<li class="chapter" data-level="11.1" data-path="data-structures.html"><a href="data-structures.html#tabular-data-1"><i class="fa fa-check"></i><b>11.1</b> Tabular Data</a></li>
<li class="chapter" data-level="11.2" data-path="data-structures.html"><a href="data-structures.html#tree-document-data-structures"><i class="fa fa-check"></i><b>11.2</b> Tree / Document Data Structures</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="data-structures.html"><a href="data-structures.html#structuring-data-as-xml"><i class="fa fa-check"></i><b>11.2.1</b> Structuring Data as XML</a></li>
<li class="chapter" data-level="11.2.2" data-path="data-structures.html"><a href="data-structures.html#structuring-data-as-json"><i class="fa fa-check"></i><b>11.2.2</b> Structuring Data as JSON</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="data-structures.html"><a href="data-structures.html#relational-databases"><i class="fa fa-check"></i><b>11.3</b> Relational Databases</a></li>
<li class="chapter" data-level="11.4" data-path="data-structures.html"><a href="data-structures.html#non-hierarchical-relational-data"><i class="fa fa-check"></i><b>11.4</b> Non-Hierarchical Relational Data</a></li>
<li class="chapter" data-level="11.5" data-path="data-structures.html"><a href="data-structures.html#geospatial-data"><i class="fa fa-check"></i><b>11.5</b> Geospatial Data</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="how-the-web-works.html"><a href="how-the-web-works.html"><i class="fa fa-check"></i><b>12</b> How the Web Works</a>
<ul>
<li class="chapter" data-level="12.1" data-path="how-the-web-works.html"><a href="how-the-web-works.html#client-server-architecture"><i class="fa fa-check"></i><b>12.1</b> Client-Server Architecture</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="how-the-web-works.html"><a href="how-the-web-works.html#communication-between-clients-and-servers"><i class="fa fa-check"></i><b>12.1.1</b> Communication Between Clients and Servers</a></li>
<li class="chapter" data-level="12.1.2" data-path="how-the-web-works.html"><a href="how-the-web-works.html#domain-name-resolution"><i class="fa fa-check"></i><b>12.1.2</b> Domain Name Resolution</a></li>
<li class="chapter" data-level="12.1.3" data-path="how-the-web-works.html"><a href="how-the-web-works.html#request-routing"><i class="fa fa-check"></i><b>12.1.3</b> Request Routing</a></li>
<li class="chapter" data-level="12.1.4" data-path="how-the-web-works.html"><a href="how-the-web-works.html#the-server-response"><i class="fa fa-check"></i><b>12.1.4</b> The Server Response</a></li>
<li class="chapter" data-level="12.1.5" data-path="how-the-web-works.html"><a href="how-the-web-works.html#internet-transfer-protocols"><i class="fa fa-check"></i><b>12.1.5</b> Internet Transfer Protocols</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="how-the-web-works.html"><a href="how-the-web-works.html#understanding-urls"><i class="fa fa-check"></i><b>12.2</b> Understanding URLs</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="how-the-web-works.html"><a href="how-the-web-works.html#dynamic-files"><i class="fa fa-check"></i><b>12.2.1</b> Dynamic Files</a></li>
<li class="chapter" data-level="12.2.2" data-path="how-the-web-works.html"><a href="how-the-web-works.html#query-strings"><i class="fa fa-check"></i><b>12.2.2</b> Query Strings</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="web-scraping.html"><a href="web-scraping.html"><i class="fa fa-check"></i><b>13</b> Web Scraping</a>
<ul>
<li class="chapter" data-level="13.1" data-path="web-scraping.html"><a href="web-scraping.html#getting-data-from-the-web"><i class="fa fa-check"></i><b>13.1</b> Getting Data from the Web</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="web-scraping.html"><a href="web-scraping.html#whats-in-a-web-page"><i class="fa fa-check"></i><b>13.1.1</b> What’s in a Web Page?</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="web-scraping.html"><a href="web-scraping.html#rs-xml-parsers"><i class="fa fa-check"></i><b>13.2</b> R’s XML Parsers</a></li>
<li class="chapter" data-level="13.3" data-path="web-scraping.html"><a href="web-scraping.html#xpath"><i class="fa fa-check"></i><b>13.3</b> XPath</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="web-scraping.html"><a href="web-scraping.html#predicates"><i class="fa fa-check"></i><b>13.3.1</b> Predicates</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="web-scraping.html"><a href="web-scraping.html#the-web-scraping-workflow"><i class="fa fa-check"></i><b>13.4</b> The Web Scraping Workflow</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="web-scraping.html"><a href="web-scraping.html#being-polite"><i class="fa fa-check"></i><b>13.4.1</b> Being Polite</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="web-scraping.html"><a href="web-scraping.html#case-study-ca-cities"><i class="fa fa-check"></i><b>13.5</b> Case Study: CA Cities</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="web-scraping.html"><a href="web-scraping.html#data-cleaning"><i class="fa fa-check"></i><b>13.5.1</b> Data Cleaning</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="web-scraping.html"><a href="web-scraping.html#case-study-the-ca-aggie"><i class="fa fa-check"></i><b>13.6</b> Case Study: The CA Aggie</a></li>
<li class="chapter" data-level="13.7" data-path="web-scraping.html"><a href="web-scraping.html#css-selectors"><i class="fa fa-check"></i><b>13.7</b> CSS Selectors</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="optical-character-recognition.html"><a href="optical-character-recognition.html"><i class="fa fa-check"></i><b>14</b> Optical Character Recognition</a>
<ul>
<li class="chapter" data-level="14.1" data-path="optical-character-recognition.html"><a href="optical-character-recognition.html#loading-page-images"><i class="fa fa-check"></i><b>14.1</b> Loading Page Images</a></li>
<li class="chapter" data-level="14.2" data-path="optical-character-recognition.html"><a href="optical-character-recognition.html#running-ocr"><i class="fa fa-check"></i><b>14.2</b> Running OCR</a></li>
<li class="chapter" data-level="14.3" data-path="optical-character-recognition.html"><a href="optical-character-recognition.html#accuracy"><i class="fa fa-check"></i><b>14.3</b> Accuracy</a></li>
<li class="chapter" data-level="14.4" data-path="optical-character-recognition.html"><a href="optical-character-recognition.html#unreadable-text"><i class="fa fa-check"></i><b>14.4</b> Unreadable Text</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="data-visualization.html"><a href="data-visualization.html"><i class="fa fa-check"></i><b>15</b> Data Visualization</a>
<ul>
<li class="chapter" data-level="15.1" data-path="data-visualization.html"><a href="data-visualization.html#factors"><i class="fa fa-check"></i><b>15.1</b> Factors</a></li>
<li class="chapter" data-level="15.2" data-path="data-visualization.html"><a href="data-visualization.html#r-graphics-overview"><i class="fa fa-check"></i><b>15.2</b> R Graphics Overview</a></li>
<li class="chapter" data-level="15.3" data-path="data-visualization.html"><a href="data-visualization.html#the-grammar-of-graphics"><i class="fa fa-check"></i><b>15.3</b> The Grammar of Graphics</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="data-visualization.html"><a href="data-visualization.html#making-a-plot"><i class="fa fa-check"></i><b>15.3.1</b> Making a Plot</a></li>
<li class="chapter" data-level="15.3.2" data-path="data-visualization.html"><a href="data-visualization.html#saving-plots"><i class="fa fa-check"></i><b>15.3.2</b> Saving Plots</a></li>
<li class="chapter" data-level="15.3.3" data-path="data-visualization.html"><a href="data-visualization.html#example-bar-plot"><i class="fa fa-check"></i><b>15.3.3</b> Example: Bar Plot</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="data-visualization.html"><a href="data-visualization.html#designing-a-visualization"><i class="fa fa-check"></i><b>15.4</b> Designing a Visualization</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="network-analysis.html"><a href="network-analysis.html"><i class="fa fa-check"></i><b>16</b> Network Analysis</a>
<ul>
<li class="chapter" data-level="16.1" data-path="network-analysis.html"><a href="network-analysis.html#overview-1"><i class="fa fa-check"></i><b>16.1</b> Overview</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="network-analysis.html"><a href="network-analysis.html#while-you-wait"><i class="fa fa-check"></i><b>16.1.1</b> While you wait</a></li>
<li class="chapter" data-level="16.1.2" data-path="network-analysis.html"><a href="network-analysis.html#learning-objectives-2"><i class="fa fa-check"></i><b>16.1.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="16.1.3" data-path="network-analysis.html"><a href="network-analysis.html#roadmap"><i class="fa fa-check"></i><b>16.1.3</b> Roadmap</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="network-analysis.html"><a href="network-analysis.html#what-is-network-analysis"><i class="fa fa-check"></i><b>16.2</b> What is Network Analysis</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="network-analysis.html"><a href="network-analysis.html#networks-in-research---social-sciences"><i class="fa fa-check"></i><b>16.2.1</b> Networks in research - Social Sciences</a></li>
<li class="chapter" data-level="16.2.2" data-path="network-analysis.html"><a href="network-analysis.html#networks-in-research---neuroscience"><i class="fa fa-check"></i><b>16.2.2</b> Networks in research - Neuroscience</a></li>
<li class="chapter" data-level="16.2.3" data-path="network-analysis.html"><a href="network-analysis.html#networks-in-research---chemistry"><i class="fa fa-check"></i><b>16.2.3</b> Networks in research - Chemistry</a></li>
<li class="chapter" data-level="16.2.4" data-path="network-analysis.html"><a href="network-analysis.html#networks-in-research---the-internet"><i class="fa fa-check"></i><b>16.2.4</b> Networks in research - The Internet</a></li>
<li class="chapter" data-level="16.2.5" data-path="network-analysis.html"><a href="network-analysis.html#networks-in-research---infrastructure"><i class="fa fa-check"></i><b>16.2.5</b> Networks in research - Infrastructure</a></li>
<li class="chapter" data-level="16.2.6" data-path="network-analysis.html"><a href="network-analysis.html#networks-in-research---security"><i class="fa fa-check"></i><b>16.2.6</b> Networks in research - Security</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="network-analysis.html"><a href="network-analysis.html#network-data"><i class="fa fa-check"></i><b>16.3</b> Network Data</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="network-analysis.html"><a href="network-analysis.html#edgelist"><i class="fa fa-check"></i><b>16.3.1</b> Edgelist</a></li>
<li class="chapter" data-level="16.3.2" data-path="network-analysis.html"><a href="network-analysis.html#adjacency-matrix"><i class="fa fa-check"></i><b>16.3.2</b> Adjacency Matrix</a></li>
<li class="chapter" data-level="16.3.3" data-path="network-analysis.html"><a href="network-analysis.html#edge-weights"><i class="fa fa-check"></i><b>16.3.3</b> Edge Weights</a></li>
<li class="chapter" data-level="16.3.4" data-path="network-analysis.html"><a href="network-analysis.html#attributes"><i class="fa fa-check"></i><b>16.3.4</b> Attributes</a></li>
<li class="chapter" data-level="16.3.5" data-path="network-analysis.html"><a href="network-analysis.html#create-an-example-network"><i class="fa fa-check"></i><b>16.3.5</b> Create an Example Network</a></li>
<li class="chapter" data-level="16.3.6" data-path="network-analysis.html"><a href="network-analysis.html#components"><i class="fa fa-check"></i><b>16.3.6</b> Components</a></li>
<li class="chapter" data-level="16.3.7" data-path="network-analysis.html"><a href="network-analysis.html#limitations-of-network-data"><i class="fa fa-check"></i><b>16.3.7</b> Limitations of Network Data</a></li>
<li class="chapter" data-level="16.3.8" data-path="network-analysis.html"><a href="network-analysis.html#projected-networks"><i class="fa fa-check"></i><b>16.3.8</b> Projected Networks</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="network-analysis.html"><a href="network-analysis.html#graph-level-properties"><i class="fa fa-check"></i><b>16.4</b> Graph Level Properties</a>
<ul>
<li class="chapter" data-level="16.4.1" data-path="network-analysis.html"><a href="network-analysis.html#directed-or-un-directed"><i class="fa fa-check"></i><b>16.4.1</b> Directed or Un-directed</a></li>
<li class="chapter" data-level="16.4.2" data-path="network-analysis.html"><a href="network-analysis.html#density"><i class="fa fa-check"></i><b>16.4.2</b> Density</a></li>
<li class="chapter" data-level="16.4.3" data-path="network-analysis.html"><a href="network-analysis.html#centralization"><i class="fa fa-check"></i><b>16.4.3</b> Centralization</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="network-analysis.html"><a href="network-analysis.html#node-level-properties"><i class="fa fa-check"></i><b>16.5</b> Node Level Properties</a>
<ul>
<li class="chapter" data-level="16.5.1" data-path="network-analysis.html"><a href="network-analysis.html#degree"><i class="fa fa-check"></i><b>16.5.1</b> Degree</a></li>
<li class="chapter" data-level="16.5.2" data-path="network-analysis.html"><a href="network-analysis.html#geodesic-distance"><i class="fa fa-check"></i><b>16.5.2</b> Geodesic Distance</a></li>
<li class="chapter" data-level="16.5.3" data-path="network-analysis.html"><a href="network-analysis.html#centrality"><i class="fa fa-check"></i><b>16.5.3</b> Centrality</a></li>
</ul></li>
<li class="chapter" data-level="16.6" data-path="network-analysis.html"><a href="network-analysis.html#network-workflow"><i class="fa fa-check"></i><b>16.6</b> Network Workflow</a></li>
<li class="chapter" data-level="16.7" data-path="network-analysis.html"><a href="network-analysis.html#network-tools"><i class="fa fa-check"></i><b>16.7</b> Network Tools</a>
<ul>
<li class="chapter" data-level="16.7.1" data-path="network-analysis.html"><a href="network-analysis.html#network-models"><i class="fa fa-check"></i><b>16.7.1</b> Network Models</a></li>
<li class="chapter" data-level="16.7.2" data-path="network-analysis.html"><a href="network-analysis.html#network-visualization"><i class="fa fa-check"></i><b>16.7.2</b> Network Visualization</a></li>
</ul></li>
<li class="chapter" data-level="16.8" data-path="network-analysis.html"><a href="network-analysis.html#references"><i class="fa fa-check"></i><b>16.8</b> References</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="statistics.html"><a href="statistics.html"><i class="fa fa-check"></i><b>17</b> Statistics</a>
<ul>
<li class="chapter" data-level="17.1" data-path="statistics.html"><a href="statistics.html#introduction"><i class="fa fa-check"></i><b>17.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="statistics.html"><a href="statistics.html#mice_pot-dataset"><i class="fa fa-check"></i><b>17.1.1</b> <code>mice_pot</code> dataset</a></li>
<li class="chapter" data-level="17.1.2" data-path="statistics.html"><a href="statistics.html#barnacles-dataset"><i class="fa fa-check"></i><b>17.1.2</b> <code>barnacles</code> dataset</a></li>
<li class="chapter" data-level="17.1.3" data-path="statistics.html"><a href="statistics.html#sample-and-population"><i class="fa fa-check"></i><b>17.1.3</b> Sample and population</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="statistics.html"><a href="statistics.html#uses-of-simulation"><i class="fa fa-check"></i><b>17.2</b> Uses of simulation</a></li>
<li class="chapter" data-level="17.3" data-path="statistics.html"><a href="statistics.html#mathematical-statistics"><i class="fa fa-check"></i><b>17.3</b> Mathematical statistics</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="statistics.html"><a href="statistics.html#law-of-large-numbers"><i class="fa fa-check"></i><b>17.3.1</b> Law of large numbers</a></li>
<li class="chapter" data-level="17.3.2" data-path="statistics.html"><a href="statistics.html#central-limit-theorem"><i class="fa fa-check"></i><b>17.3.2</b> Central limit theorem</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="statistics.html"><a href="statistics.html#statistical-inference"><i class="fa fa-check"></i><b>17.4</b> Statistical inference</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="statistics.html"><a href="statistics.html#confidence-intervals"><i class="fa fa-check"></i><b>17.4.1</b> Confidence intervals</a></li>
<li class="chapter" data-level="17.4.2" data-path="statistics.html"><a href="statistics.html#two-population-test"><i class="fa fa-check"></i><b>17.4.2</b> Two-population test</a></li>
<li class="chapter" data-level="17.4.3" data-path="statistics.html"><a href="statistics.html#hypothesis-tests-for-non-normal-data"><i class="fa fa-check"></i><b>17.4.3</b> Hypothesis tests for non-normal data</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="statistics.html"><a href="statistics.html#regression"><i class="fa fa-check"></i><b>17.5</b> Regression</a>
<ul>
<li class="chapter" data-level="17.5.1" data-path="statistics.html"><a href="statistics.html#fitting-a-regression-line"><i class="fa fa-check"></i><b>17.5.1</b> Fitting a regression line</a></li>
<li class="chapter" data-level="17.5.2" data-path="statistics.html"><a href="statistics.html#assumptions-and-diagnostics"><i class="fa fa-check"></i><b>17.5.2</b> Assumptions and diagnostics</a></li>
<li class="chapter" data-level="17.5.3" data-path="statistics.html"><a href="statistics.html#functions-for-inspecting-regression-fits"><i class="fa fa-check"></i><b>17.5.3</b> Functions for inspecting regression fits</a></li>
<li class="chapter" data-level="17.5.4" data-path="statistics.html"><a href="statistics.html#a-model-that-fails-diagnostics"><i class="fa fa-check"></i><b>17.5.4</b> A model that fails diagnostics</a></li>
<li class="chapter" data-level="17.5.5" data-path="statistics.html"><a href="statistics.html#predictions-and-variability"><i class="fa fa-check"></i><b>17.5.5</b> Predictions and variability</a></li>
</ul></li>
<li class="chapter" data-level="17.6" data-path="statistics.html"><a href="statistics.html#model-selection"><i class="fa fa-check"></i><b>17.6</b> Model selection</a></li>
<li class="chapter" data-level="17.7" data-path="statistics.html"><a href="statistics.html#cross-validation"><i class="fa fa-check"></i><b>17.7</b> Cross-validation</a></li>
<li class="chapter" data-level="17.8" data-path="statistics.html"><a href="statistics.html#references-1"><i class="fa fa-check"></i><b>17.8</b> References</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="data-forensics.html"><a href="data-forensics.html"><i class="fa fa-check"></i><b>18</b> Data Forensics</a>
<ul>
<li class="chapter" data-level="18.1" data-path="data-forensics.html"><a href="data-forensics.html#introduction-1"><i class="fa fa-check"></i><b>18.1</b> Introduction</a></li>
<li class="chapter" data-level="18.2" data-path="data-forensics.html"><a href="data-forensics.html#tidy-data"><i class="fa fa-check"></i><b>18.2</b> Tidy Data</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="data-forensics.html"><a href="data-forensics.html#columns-into-rows"><i class="fa fa-check"></i><b>18.2.1</b> Columns into Rows</a></li>
<li class="chapter" data-level="18.2.2" data-path="data-forensics.html"><a href="data-forensics.html#rows-into-columns"><i class="fa fa-check"></i><b>18.2.2</b> Rows into Columns</a></li>
<li class="chapter" data-level="18.2.3" data-path="data-forensics.html"><a href="data-forensics.html#separating-values"><i class="fa fa-check"></i><b>18.2.3</b> Separating Values</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="data-forensics.html"><a href="data-forensics.html#data-types"><i class="fa fa-check"></i><b>18.3</b> Data Types</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="data-forensics.html"><a href="data-forensics.html#dates"><i class="fa fa-check"></i><b>18.3.1</b> Dates</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="data-forensics.html"><a href="data-forensics.html#special-values"><i class="fa fa-check"></i><b>18.4</b> Special Values</a>
<ul>
<li class="chapter" data-level="18.4.1" data-path="data-forensics.html"><a href="data-forensics.html#reasoning-about-missing-values"><i class="fa fa-check"></i><b>18.4.1</b> Reasoning about Missing Values</a></li>
</ul></li>
<li class="chapter" data-level="18.5" data-path="data-forensics.html"><a href="data-forensics.html#outliers"><i class="fa fa-check"></i><b>18.5</b> Outliers</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html"><i class="fa fa-check"></i><b>19</b> Working with Unstructured Data</a>
<ul>
<li class="chapter" data-level="19.1" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#preliminaries"><i class="fa fa-check"></i><b>19.1</b> Preliminaries</a></li>
<li class="chapter" data-level="19.2" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#from-file-names-to-metadata"><i class="fa fa-check"></i><b>19.2</b> From File Names to Metadata</a></li>
<li class="chapter" data-level="19.3" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#loading-a-corpus"><i class="fa fa-check"></i><b>19.3</b> Loading a Corpus</a></li>
<li class="chapter" data-level="19.4" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#preprocessing"><i class="fa fa-check"></i><b>19.4</b> Preprocessing</a>
<ul>
<li class="chapter" data-level="19.4.1" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#tokenizing-and-bags-of-words"><i class="fa fa-check"></i><b>19.4.1</b> Tokenizing and Bags of Words</a></li>
<li class="chapter" data-level="19.4.2" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#text-normalization"><i class="fa fa-check"></i><b>19.4.2</b> Text Normalization</a></li>
<li class="chapter" data-level="19.4.3" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#stop-words"><i class="fa fa-check"></i><b>19.4.3</b> Stop Words</a></li>
<li class="chapter" data-level="19.4.4" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#tokenizers"><i class="fa fa-check"></i><b>19.4.4</b> Tokenizers</a></li>
<li class="chapter" data-level="19.4.5" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#document-chunking-and-n-grams"><i class="fa fa-check"></i><b>19.4.5</b> Document Chunking and N-grams</a></li>
</ul></li>
<li class="chapter" data-level="19.5" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#counting-terms"><i class="fa fa-check"></i><b>19.5</b> Counting Terms</a>
<ul>
<li class="chapter" data-level="19.5.1" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#term-frequency"><i class="fa fa-check"></i><b>19.5.1</b> Term Frequency</a></li>
<li class="chapter" data-level="19.5.2" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#plotting-term-frequency"><i class="fa fa-check"></i><b>19.5.2</b> Plotting Term Frequency</a></li>
<li class="chapter" data-level="19.5.3" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#comparing-term-frequencies-across-documents"><i class="fa fa-check"></i><b>19.5.3</b> Comparing Term Frequencies Across Documents</a></li>
</ul></li>
<li class="chapter" data-level="19.6" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#text-mining-pipepline"><i class="fa fa-check"></i><b>19.6</b> Text Mining Pipepline</a></li>
<li class="chapter" data-level="19.7" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#document-term-matrix"><i class="fa fa-check"></i><b>19.7</b> Document Term Matrix</a></li>
<li class="chapter" data-level="19.8" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#corpus-analytics"><i class="fa fa-check"></i><b>19.8</b> Corpus Analytics</a>
<ul>
<li class="chapter" data-level="19.8.1" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#corpus-term-counts"><i class="fa fa-check"></i><b>19.8.1</b> Corpus Term Counts</a></li>
<li class="chapter" data-level="19.8.2" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#tfidf-scores"><i class="fa fa-check"></i><b>19.8.2</b> tf–idf Scores</a></li>
<li class="chapter" data-level="19.8.3" data-path="working-with-unstructured-data.html"><a href="working-with-unstructured-data.html#unique-terms-in-a-document"><i class="fa fa-check"></i><b>19.8.3</b> Unique Terms in a Document</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html"><i class="fa fa-check"></i><b>20</b> Data Forensics and Cleaning - Geospatial Data</a>
<ul>
<li class="chapter" data-level="20.1" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#learning-objectives-3"><i class="fa fa-check"></i><b>20.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="20.2" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#what-is-geospatial-data"><i class="fa fa-check"></i><b>20.2</b> What is Geospatial Data?</a>
<ul>
<li class="chapter" data-level="20.2.1" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#attributes-1"><i class="fa fa-check"></i><b>20.2.1</b> Attributes</a></li>
<li class="chapter" data-level="20.2.2" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#coordinate-reference-system"><i class="fa fa-check"></i><b>20.2.2</b> Coordinate Reference System</a></li>
<li class="chapter" data-level="20.2.3" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#coordinates"><i class="fa fa-check"></i><b>20.2.3</b> Coordinates</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#geospatial-data-models"><i class="fa fa-check"></i><b>20.3</b> Geospatial Data Models</a>
<ul>
<li class="chapter" data-level="20.3.1" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#vector-data"><i class="fa fa-check"></i><b>20.3.1</b> Vector Data</a></li>
<li class="chapter" data-level="20.3.2" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#raster-data"><i class="fa fa-check"></i><b>20.3.2</b> Raster Data</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#data-structures-applied-to-geospatial-data"><i class="fa fa-check"></i><b>20.4</b> Data Structures Applied to Geospatial Data</a></li>
<li class="chapter" data-level="20.5" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#cleaning-geospatial-data"><i class="fa fa-check"></i><b>20.5</b> Cleaning Geospatial Data</a>
<ul>
<li class="chapter" data-level="20.5.1" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#example-data"><i class="fa fa-check"></i><b>20.5.1</b> Example Data</a></li>
<li class="chapter" data-level="20.5.2" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#making-location-data-usable"><i class="fa fa-check"></i><b>20.5.2</b> Making Location Data Usable</a></li>
<li class="chapter" data-level="20.5.3" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#cleaning-location-data"><i class="fa fa-check"></i><b>20.5.3</b> Cleaning Location Data</a></li>
<li class="chapter" data-level="20.5.4" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#cleaning-attribute-data"><i class="fa fa-check"></i><b>20.5.4</b> Cleaning Attribute Data</a></li>
<li class="chapter" data-level="20.5.5" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#checking-coordinate-reference-systems"><i class="fa fa-check"></i><b>20.5.5</b> Checking Coordinate Reference Systems</a></li>
</ul></li>
<li class="chapter" data-level="20.6" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#conclusions"><i class="fa fa-check"></i><b>20.6</b> Conclusions</a></li>
<li class="chapter" data-level="20.7" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#optional-further-reading"><i class="fa fa-check"></i><b>20.7</b> Optional Further Reading:</a></li>
<li class="chapter" data-level="20.8" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#citations"><i class="fa fa-check"></i><b>20.8</b> Citations</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Adventures in Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-forensics-and-cleaning---geospatial-data" class="section level1" number="20">
<h1><span class="header-section-number">20</span> Data Forensics and Cleaning - Geospatial Data</h1>
<div id="learning-objectives-3" class="section level2" number="20.1">
<h2><span class="header-section-number">20.1</span> Learning Objectives</h2>
<p>This lecture is designed to introduce you to the basics of geospatial data.</p>
<p>By the end of this lecture you will</p>
<ul>
<li>understand the main components of geospatial data are locations, attributes, and a coordinate reference system</li>
<li>understand how geospatial data can be represented with different data models</li>
<li>understand that the data structures we were already familiar with can be modified to contain spatial data.</li>
<li>learn some common processes for cleaning our geospatial data</li>
</ul>
</div>
<div id="what-is-geospatial-data" class="section level2" number="20.2">
<h2><span class="header-section-number">20.2</span> What is Geospatial Data?</h2>
<p>Geospatial data (also known as spatial data, GIS data, and other names) is information that can be attributed to a real-world location or can relate to each other in space.</p>
<p>Technically, “geospatial” refers to locations on Earth, while “spatial” can be locations anywhere, including other planets or even ficticious places (like J.R.R. Tolkien’s hand-drawn maps for his novels), but quite often the terms are used interchangably.</p>
<p>You use geospatial data every day on your smart phone through spatially-enabled apps like Google Maps, food delivery apps, fitness trackers, weather, or games like Pokemon Go.</p>
<p><strong>(geo)Spatial Data = Attributes + Locations</strong></p>
<p><strong>Location = Coordinate Reference System (CRS) + Coordinates</strong></p>
<p>So…</p>
<p><strong>(geo)Spatial Data = Attributes + Coordinate Reference System (CRS) + Coordinates</strong></p>
<div id="attributes-1" class="section level3" number="20.2.1">
<h3><span class="header-section-number">20.2.1</span> Attributes</h3>
<p>Attributes are pieces of information about a location. For example, if I’m mapping gas stations, my attributes might be something like the price of gas, the address of the station, and the company that runs it (Shell, Arco, etc.). This isn’t the same thing as metadata, which is information about the entire dataset such as who made the data, when they made it, and how the data was created.</p>
</div>
<div id="coordinate-reference-system" class="section level3" number="20.2.2">
<h3><span class="header-section-number">20.2.2</span> Coordinate Reference System</h3>
<p>The earth is generally round. Maps are generally flat, with a few exceptions. If you were to try to flatten out the earth, you would create some fairly major distortions. Next time you eat an orange or a tangerine, try taking off the peel and then try to create a flat solid sheet of peel from it. You’ll end up needing to cut it or smash it to get a flat surface. The same things happens to geospatial data when we try to translate it from a round globe to a flat map. But, there are ways to minimize distortions.</p>
<p>A <strong>coordinate reference system</strong> (sometimes called a <strong>projection</strong>) is a set of mathematical formulas that translate measurements on a round globe to a flat piece of paper. The coordinate reference system also specifies the linear units of measure (i.e. feet, meters, decimal degrees, or something else) and a set of reference lines.</p>
<p>For our purposes, we can think of coordinate reference systems coming in two flavors. One is <strong>geographic coordinate systems</strong>. For simplicity’s sake, we can think of these as coordinate reference systems that apply to latitude and longitude coordinates. <strong>Projected coordinate systems</strong> translate latitude and longitude coordinates into linear units from a specified baseline and aim to reduce some aspect of the distortion introduced in the round to flat translation. (I am very much simplifying this concept so we can learn the basics without getting overwhelmed.)</p>
<p>To work with more than one digital spatial dataset, the coordinate reference systems must match. If they don’t match, you can transform your data into a different coordinate reference system.</p>
</div>
<div id="coordinates" class="section level3" number="20.2.3">
<h3><span class="header-section-number">20.2.3</span> Coordinates</h3>
<p>Coordinates are given in the distance (in the linear units specified in the CRS) from the baselines (specified in the CRS). Coordinates can be plotted just like coordinates on a graph (cartesian coordinate system). Sometimes we refer to these as X and Y, just like a graph, but sometimes you’ll hear people refer to the cardinal directions (north, south, east, and west).</p>
<p>Let’s take a moment to talk about latitude and longitude. You’re probably at least a little familiar with latitude (Y) and longitude (X), but this is a special case that’s more complex than we probably initially realize. Latitude and longitude are angular measurements (with units in degrees) from a set of baselines - usually the Equator and the Greenwhich Meridian. We can plot latitude and longitude on a cartesian coordinate system, but this introduces major distortions increasing as you approach the poles. You never want to use straight latitude/longitude coordinates (commonly in North America, you’ll see data in the geographic coordinate reference system called WGS84) for an analysis. Always translate them into a projected coordinate system first. In addition, because the units are degrees, they are rather hard for us to interpret when we make measurements. How many degrees is it from the UC Davis campus to your appartment? It’s probably a very small fraction of a degree. Area measurements make even less sense. (What is a square degree and what does that look like?) Latitude/longitude coordinates are a great starting place, we just need to handle them correctly.</p>
</div>
</div>
<div id="geospatial-data-models" class="section level2" number="20.3">
<h2><span class="header-section-number">20.3</span> Geospatial Data Models</h2>
<p>Now we have an idea of what makes data spatial, but what does spatial data look like in a computer? There are two common data models for geospatial data: Vector and Raster.</p>
<table>
<thead>
<tr class="header">
<th>Data Model</th>
<th>Geometry</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Vector</td>
<td>Points</td>
<td>Very small things, like cities at world scale</td>
</tr>
<tr class="even">
<td>.</td>
<td>Lines</td>
<td>Linear things, like roads at city scale</td>
</tr>
<tr class="odd">
<td>.</td>
<td>Polygons</td>
<td>Larger things that take up space, like parks at a city scale</td>
</tr>
<tr class="even">
<td>Raster</td>
<td>Grid</td>
<td>Digital Photo</td>
</tr>
</tbody>
</table>
<div class="figure">
<img src="img/geometries_data_types.png" alt="" />
<p class="caption">A visual table of raster vs. vector data as continuous and discrete data.</p>
</div>
<div id="vector-data" class="section level3" number="20.3.1">
<h3><span class="header-section-number">20.3.1</span> Vector Data</h3>
<p>Vector data represents discrete objects in the real world with points, lines, and polygons in the dataset.</p>
<p>If you were to draw a map to your house for a friend, you would typically use vector data - roads would be lines, a shopping center included as an important landmark might be a rectangle of sorts, and your house might be a point (perhaps represented by a star or a house icon).</p>
<p>For this lecture, <strong>we will focus on point data</strong>.</p>
</div>
<div id="raster-data" class="section level3" number="20.3.2">
<h3><span class="header-section-number">20.3.2</span> Raster Data</h3>
<p>Raster data represents continuous fields or discrete objects on a grid, storing measurements or category codes in each cell of the grid.</p>
<p>Digital photos are raster data you are already familiar with. If you zoom in far enough on a digital photo, you’ll see that photo is made up of pixels, which appear as colored squares. Pixels are cells in a regular grid and each contains the digital code that corresponds to the color that should be displayed there. Satellite images (like you see in Google Maps) are a very similar situation.</p>
</div>
</div>
<div id="data-structures-applied-to-geospatial-data" class="section level2" number="20.4">
<h2><span class="header-section-number">20.4</span> Data Structures Applied to Geospatial Data</h2>
<p>In the lecture on Data Structures (week 6), you learned that data can be structured in a number of ways, including <strong>tabular</strong>, <strong>tree</strong> (XML and JSON), <strong>relational databases</strong>, and <strong>non-hierarchical data</strong>. All of these structures can include spatial information.</p>
<table>
<colgroup>
<col width="48%" />
<col width="29%" />
<col width="21%" />
</colgroup>
<thead>
<tr class="header">
<th>Data Structure</th>
<th>Example File Type</th>
<th>How it’s implemented</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Tabular</td>
<td>CSV</td>
<td>One or more columns hold spatial data (like Latitude &amp; Longitude)</td>
</tr>
<tr class="even">
<td>Tree</td>
<td>geoJSON</td>
<td>Tags in the structure indicate spatial information like geometry type and vertex locations</td>
</tr>
<tr class="odd">
<td>Relational Database</td>
<td>PostGIS or Spatialite</td>
<td>One column holds the “geometry” information (vertexes &amp; CRS)</td>
</tr>
<tr class="even">
<td>Non-Hierarchical Relational Data</td>
<td>Spatial Graph Databases</td>
<td>Nodes have locations associated with them, edges represent flow (think: transportation networks or stream networks)</td>
</tr>
</tbody>
</table>
<p>For visualization purposes, geospatial software typically show all of these data structures as a map where each entity is linked with a table of the attribute data - one row of data in the table relates to one entity on the map. So regardless of the underlying data structure, you can think of these as interactive maps like you find on Google Maps.</p>
</div>
<div id="cleaning-geospatial-data" class="section level2" number="20.5">
<h2><span class="header-section-number">20.5</span> Cleaning Geospatial Data</h2>
<p>What Can Go Wrong?</p>
<ol style="list-style-type: decimal">
<li>Location data isn’t usable</li>
<li>Location data is incorrect</li>
<li>Attribute data is incorrect</li>
<li>Coordinate Reference System (CRS) is improperly defined</li>
</ol>
<div id="example-data" class="section level3" number="20.5.1">
<h3><span class="header-section-number">20.5.1</span> Example Data</h3>
<p>The dataset we’ll be working with as an example contains locations and attributes about lake monsters. Lake monsters are fictional creatures like sea monsters, but they live in lakes and not the ocean. The most famous lake monster is probably Nessie, who lives in Loch Ness. The dataset we’re working with today is the early stages of a now much cleaner dataset. This data came from a Wikipedia page and the locations were geocoded (a process that matches text locations with real-world locations). We’ll walk through some common processes and challenges with point data stored in a csv file.</p>
</div>
<div id="making-location-data-usable" class="section level3" number="20.5.2">
<h3><span class="header-section-number">20.5.2</span> Making Location Data Usable</h3>
<p>Someone sends you a CSV file. At first glance, nothing looks amiss. There is a column for latitude and another for longitude, but how is it formatted? It’s degrees-minutes-seconds (DMS)! DMS looks like this: 34° 36’ 31.774" - 34 degrees, 36 minutes, 31.447 seconds - and sometimes people put in the symbols for degree (°), minutes (’), and seconds ("), and sometimes not. The computer can’t read this format, especially the symbols. It has to be converted to decimal degrees (DD), which looks like this: 34.60882611</p>
<p>To convert it, we need to know that there are 60 minutes in a degree and 60 seconds in a minute.</p>
<p><strong>Decimal Degrees = Degrees + (Minutes/60) + (Seconds/3600)</strong></p>
<p>34.60882611 = 34 + (36/60) + (31.447/3600)</p>
<p>First, we need to load the libraries we’ll need and then load the data.</p>
<div class="sourceCode" id="cb557"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb557-1"><a href="data-forensics-and-cleaning-geospatial-data.html#cb557-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load Libraries ----------------------------------------------------------</span></span>
<span id="cb557-2"><a href="data-forensics-and-cleaning-geospatial-data.html#cb557-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;sf&quot;</span>)</span></code></pre></div>
<pre><code>## Linking to GEOS 3.8.0, GDAL 3.0.4, PROJ 6.3.1</code></pre>
<div class="sourceCode" id="cb559"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb559-1"><a href="data-forensics-and-cleaning-geospatial-data.html#cb559-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;mapview&quot;</span>)</span>
<span id="cb559-2"><a href="data-forensics-and-cleaning-geospatial-data.html#cb559-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;gdtools&quot;</span>) <span class="co">#makes the display... dependency of mapview but it&#39;s not loading</span></span>
<span id="cb559-3"><a href="data-forensics-and-cleaning-geospatial-data.html#cb559-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;leafem&quot;</span>) <span class="co">#makes the labels work... dependency of mapview but it&#39;s not loading</span></span>
<span id="cb559-4"><a href="data-forensics-and-cleaning-geospatial-data.html#cb559-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;leaflet&quot;</span>)</span>
<span id="cb559-5"><a href="data-forensics-and-cleaning-geospatial-data.html#cb559-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb559-6"><a href="data-forensics-and-cleaning-geospatial-data.html#cb559-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Data ---------------------------------------------------------------</span></span>
<span id="cb559-7"><a href="data-forensics-and-cleaning-geospatial-data.html#cb559-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb559-8"><a href="data-forensics-and-cleaning-geospatial-data.html#cb559-8" aria-hidden="true" tabindex="-1"></a>monsters.raw<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;data/lake_monsters.csv&quot;</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>, <span class="at">encoding =</span> <span class="st">&quot;latin1&quot;</span>)</span>
<span id="cb559-9"><a href="data-forensics-and-cleaning-geospatial-data.html#cb559-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb559-10"><a href="data-forensics-and-cleaning-geospatial-data.html#cb559-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb559-11"><a href="data-forensics-and-cleaning-geospatial-data.html#cb559-11" aria-hidden="true" tabindex="-1"></a><span class="co">#Explore the data</span></span>
<span id="cb559-12"><a href="data-forensics-and-cleaning-geospatial-data.html#cb559-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(monsters.raw)</span></code></pre></div>
<pre><code>##   fid field_1               Lake        Area        Country     Continent
## 1   1       1      Arenal Lagoon    Alajuela     Costa Rica North America
## 2   2       2    Bangweulu Swamp                     Zambia        Africa
## 3   3       3 Bassenthwaite Lake     England United Kingdom        Europe
## 4   4       4          Bear Lake Idaho, Utah            USA North America
## 5   5       5        Brosno Lake Tver Oblast         Russia        Europe
## 6   6       6   Bueng Khong Long   Bueng Kan       Thailand          Asia
##                          Name       lat         lon        lat_dms
## 1                     unnamed  10.49143  -84.851696 10°29?29.1304?
## 2                      Nsanga -11.14741   29.784582 -11°8?50.6760?
## 3                       Eachy  54.65279   -3.213612 54°39?10.0359?
## 4 Bear Lake Monster, Isabella  42.21721 -111.319881  42°13?1.9643?
## 5               Brosno Dragon  56.82407   31.914652 56°49?26.6520?
## 6                  Phaya Naga  18.02363  104.014360  18°1?25.0676?
##            lon_dms                                 coords_3395    lon_3395
## 1   -84°51?6.1069?  Point (-9445647.63285386 1166706.48735204)  -9445647.6
## 2    29°47?4.4935?  Point (3315604.44829715 -1240572.14607131)   3315604.4
## 3   -3°12?49.0016?   Point (-357737.60213262 7259890.14217639)   -357737.6
## 4 -111°19?11.5709? Point (-12392072.44582391 5164853.16566773) -12392072.4
## 5   31°54?52.7472?   Point (3552722.80948453 7688451.06249625)   3552722.8
## 6   104°0?51.6974?  Point (11578825.63491604 2027100.69217741)  11578825.6
##   lat_3395
## 1  1166706
## 2 -1240572
## 3  7259890
## 4  5164853
## 5  7688451
## 6  2027101</code></pre>
<p>Next, we need to write some functions to deal with our specific DMS data and how its formatted.</p>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb561-1"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Functions ---------------------------------------------------------------</span></span>
<span id="cb561-2"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb561-3"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-3" aria-hidden="true" tabindex="-1"></a><span class="co">#This function splits up the DMS column into three columns - D, M, &amp; S</span></span>
<span id="cb561-4"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-4" aria-hidden="true" tabindex="-1"></a>split.dms<span class="ot">&lt;-</span><span class="cf">function</span>(dms.column){</span>
<span id="cb561-5"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#separate the pieces of the DMS column</span></span>
<span id="cb561-6"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb561-7"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-7" aria-hidden="true" tabindex="-1"></a>  variable<span class="ot">&lt;-</span><span class="fu">do.call</span>(rbind, <span class="at">args=</span><span class="fu">c</span>(<span class="fu">strsplit</span>(dms.column, <span class="st">&#39;[°?]+&#39;</span>))) <span class="co">#makes a matrix of characters</span></span>
<span id="cb561-8"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mode</span>(variable)<span class="ot">=</span><span class="st">&quot;numeric&quot;</span>  <span class="co">#assigning the data type to numeric instead of character</span></span>
<span id="cb561-9"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-9" aria-hidden="true" tabindex="-1"></a>  dms.split<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(variable)</span>
<span id="cb561-10"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb561-11"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-11" aria-hidden="true" tabindex="-1"></a>  split.string<span class="ot">&lt;-</span><span class="fu">strsplit</span>(dms.column, <span class="st">&#39;[°?]+&#39;</span>)</span>
<span id="cb561-12"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb561-13"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb561-14"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   naming the columns</span></span>
<span id="cb561-15"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(dms.split)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;D&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;S&quot;</span>)</span>
<span id="cb561-16"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb561-17"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(dms.split)</span>
<span id="cb561-18"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb561-19"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb561-20"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb561-21"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-21" aria-hidden="true" tabindex="-1"></a><span class="co"># this function coverts a 3 column dataframe of DMS to DD, like the data created by split.dms()</span></span>
<span id="cb561-22"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-22" aria-hidden="true" tabindex="-1"></a>decimaldegrees<span class="ot">&lt;-</span><span class="cf">function</span>(dms.df){</span>
<span id="cb561-23"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-23" aria-hidden="true" tabindex="-1"></a>  dd<span class="ot">&lt;-</span><span class="fu">data.frame</span>()</span>
<span id="cb561-24"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb561-25"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-25" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">dim</span>(dms.df)[<span class="dv">1</span>]){</span>
<span id="cb561-26"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (dms.df[i, <span class="dv">1</span>]<span class="sc">&gt;</span><span class="dv">0</span>){</span>
<span id="cb561-27"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-27" aria-hidden="true" tabindex="-1"></a>      <span class="co">#Decimal Degrees = Degrees + (Minutes/60) + (Seconds/3600)</span></span>
<span id="cb561-28"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-28" aria-hidden="true" tabindex="-1"></a>      dd.row<span class="ot">&lt;-</span>dms.df[i,<span class="dv">1</span>]<span class="sc">+</span>(dms.df[i,<span class="dv">2</span>]<span class="sc">/</span><span class="dv">60</span>)<span class="sc">+</span>(dms.df[i,<span class="dv">3</span>]<span class="sc">/</span><span class="dv">3600</span>)</span>
<span id="cb561-29"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-29" aria-hidden="true" tabindex="-1"></a>      dd<span class="ot">&lt;-</span><span class="fu">rbind</span>(dd, dd.row)</span>
<span id="cb561-30"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-30" aria-hidden="true" tabindex="-1"></a>    } </span>
<span id="cb561-31"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>{</span>
<span id="cb561-32"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-32" aria-hidden="true" tabindex="-1"></a>      <span class="co">#-Decimal Degrees = Degrees - (Minutes/60) - (Seconds/3600)</span></span>
<span id="cb561-33"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-33" aria-hidden="true" tabindex="-1"></a>      dd.row<span class="ot">&lt;-</span>dms.df[i,<span class="dv">1</span>]<span class="sc">-</span>(dms.df[i,<span class="dv">2</span>]<span class="sc">/</span><span class="dv">60</span>)<span class="sc">-</span>(dms.df[i,<span class="dv">3</span>]<span class="sc">/</span><span class="dv">3600</span>)</span>
<span id="cb561-34"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-34" aria-hidden="true" tabindex="-1"></a>      dd<span class="ot">&lt;-</span><span class="fu">rbind</span>(dd, dd.row)</span>
<span id="cb561-35"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-35" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb561-36"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-36" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb561-37"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(dd)</span>
<span id="cb561-38"><a href="data-forensics-and-cleaning-geospatial-data.html#cb561-38" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Finally, we can process our DMS data to convert it to Decimal Degreess (DD).</p>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="data-forensics-and-cleaning-geospatial-data.html#cb562-1" aria-hidden="true" tabindex="-1"></a><span class="co">#   Process Latitude</span></span>
<span id="cb562-2"><a href="data-forensics-and-cleaning-geospatial-data.html#cb562-2" aria-hidden="true" tabindex="-1"></a>dms.split<span class="ot">&lt;-</span><span class="fu">split.dms</span>(monsters.raw<span class="sc">$</span>lat_dms)</span>
<span id="cb562-3"><a href="data-forensics-and-cleaning-geospatial-data.html#cb562-3" aria-hidden="true" tabindex="-1"></a>dd<span class="ot">&lt;-</span><span class="fu">decimaldegrees</span>(dms.split)</span>
<span id="cb562-4"><a href="data-forensics-and-cleaning-geospatial-data.html#cb562-4" aria-hidden="true" tabindex="-1"></a>monsters.df<span class="ot">&lt;-</span><span class="fu">cbind</span>(monsters.raw, dd)</span>
<span id="cb562-5"><a href="data-forensics-and-cleaning-geospatial-data.html#cb562-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(monsters.df)[<span class="dv">15</span>]<span class="ot">&lt;-</span><span class="st">&quot;lat_dd&quot;</span></span>
<span id="cb562-6"><a href="data-forensics-and-cleaning-geospatial-data.html#cb562-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb562-7"><a href="data-forensics-and-cleaning-geospatial-data.html#cb562-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   Process Longitude</span></span>
<span id="cb562-8"><a href="data-forensics-and-cleaning-geospatial-data.html#cb562-8" aria-hidden="true" tabindex="-1"></a>dms.split<span class="ot">&lt;-</span><span class="fu">split.dms</span>(monsters.raw<span class="sc">$</span>lon_dms)</span>
<span id="cb562-9"><a href="data-forensics-and-cleaning-geospatial-data.html#cb562-9" aria-hidden="true" tabindex="-1"></a>dd<span class="ot">&lt;-</span><span class="fu">decimaldegrees</span>(dms.split)</span>
<span id="cb562-10"><a href="data-forensics-and-cleaning-geospatial-data.html#cb562-10" aria-hidden="true" tabindex="-1"></a>monsters.df<span class="ot">&lt;-</span><span class="fu">cbind</span>(monsters.df, dd)</span>
<span id="cb562-11"><a href="data-forensics-and-cleaning-geospatial-data.html#cb562-11" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(monsters.df)[<span class="dv">16</span>]<span class="ot">&lt;-</span><span class="st">&quot;lon_dd&quot;</span></span>
<span id="cb562-12"><a href="data-forensics-and-cleaning-geospatial-data.html#cb562-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb562-13"><a href="data-forensics-and-cleaning-geospatial-data.html#cb562-13" aria-hidden="true" tabindex="-1"></a><span class="co">#   Look at the data</span></span>
<span id="cb562-14"><a href="data-forensics-and-cleaning-geospatial-data.html#cb562-14" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(monsters.df)</span></code></pre></div>
<pre><code>##   fid field_1               Lake        Area        Country     Continent
## 1   1       1      Arenal Lagoon    Alajuela     Costa Rica North America
## 2   2       2    Bangweulu Swamp                     Zambia        Africa
## 3   3       3 Bassenthwaite Lake     England United Kingdom        Europe
## 4   4       4          Bear Lake Idaho, Utah            USA North America
## 5   5       5        Brosno Lake Tver Oblast         Russia        Europe
## 6   6       6   Bueng Khong Long   Bueng Kan       Thailand          Asia
##                          Name       lat         lon        lat_dms
## 1                     unnamed  10.49143  -84.851696 10°29?29.1304?
## 2                      Nsanga -11.14741   29.784582 -11°8?50.6760?
## 3                       Eachy  54.65279   -3.213612 54°39?10.0359?
## 4 Bear Lake Monster, Isabella  42.21721 -111.319881  42°13?1.9643?
## 5               Brosno Dragon  56.82407   31.914652 56°49?26.6520?
## 6                  Phaya Naga  18.02363  104.014360  18°1?25.0676?
##            lon_dms                                 coords_3395    lon_3395
## 1   -84°51?6.1069?  Point (-9445647.63285386 1166706.48735204)  -9445647.6
## 2    29°47?4.4935?  Point (3315604.44829715 -1240572.14607131)   3315604.4
## 3   -3°12?49.0016?   Point (-357737.60213262 7259890.14217639)   -357737.6
## 4 -111°19?11.5709? Point (-12392072.44582391 5164853.16566773) -12392072.4
## 5   31°54?52.7472?   Point (3552722.80948453 7688451.06249625)   3552722.8
## 6   104°0?51.6974?  Point (11578825.63491604 2027100.69217741)  11578825.6
##   lat_3395    lat_dd      lon_dd
## 1  1166706  10.49143  -84.851696
## 2 -1240572 -11.14741   29.784582
## 3  7259890  54.65279   -3.213612
## 4  5164853  42.21721 -111.319881
## 5  7688451  56.82407   31.914652
## 6  2027101  18.02363  104.014360</code></pre>
<p>Another common issue with point data is that the latitude and longitude are not in any form of degrees, but instead are in a projected coordinate system with linear units (usually feet or meters). If the data doesn’t come with metadata, you may be left guessing which coordinate system it is in. With experience, you’ll get better at guessing, but sometimes the data is not usable. Our monsters dataset has latitude and longitude in the World Mercator (EPSG: 3395) projection as well. Let’s briefly look at that here, but we’ll play with that more later in this document.</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="data-forensics-and-cleaning-geospatial-data.html#cb564-1" aria-hidden="true" tabindex="-1"></a>monsters.df[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="dv">13</span><span class="sc">:</span><span class="dv">16</span>]</span></code></pre></div>
<pre><code>##       lon_3395 lat_3395    lat_dd      lon_dd
## 1   -9445647.6  1166706  10.49143  -84.851696
## 2    3315604.4 -1240572 -11.14741   29.784582
## 3    -357737.6  7259890  54.65279   -3.213612
## 4  -12392072.4  5164853  42.21721 -111.319881
## 5    3552722.8  7688451  56.82407   31.914652
## 6   11578825.6  2027101  18.02363  104.014360
## 7   -7845463.9  5433619  43.98618  -70.477001
## 8  -12704546.6  6054836  47.87777 -114.126884
## 9   -9467608.2  5128572  41.97447  -85.048971
## 10 -12525669.2  5011829  41.18707 -112.520000</code></pre>
<p>Note that data preparation and cleaning is the vast majority of the work for all data, not just spatial data. All of the code we just looked at was just to get the data in a usable format. We’ll convert it to a spatial data type and map it in the next section.</p>
</div>
<div id="cleaning-location-data" class="section level3" number="20.5.3">
<h3><span class="header-section-number">20.5.3</span> Cleaning Location Data</h3>
<p>Sometimes, the locations in your dataset are incorrect. This can happen for a number of reasons.</p>
<p>For example, it’s fairly common for data to get truncated or rounded if you open a CSV in Excel. Removing decimal places from coordinate data loses precision.</p>
<p>People often swap their latitude and longitude columns as well, which make data show up in the wrong cartesian coordinate, for example, (-119, 34) is a verry different location than (34, -119)… -119 is actually out of the range of latitude data and will often break your code.</p>
<p>Another common source of error is in the way the data was made. If data is produced by geocoding, turning an address or place name into a coordinate, the location may have been matched badly. If the data was made by an analysis process, an unexpected aspect of the data could cause problems, like a one-to-many join when you thought you had a one-to-one join in a database.</p>
<p>Regardless of how the errors came about, how do we find incorrect locations? Start by mapping the data and see where it lands. Is it where you expect the data to be? Sometimes you can’t tell it’s wrong because the data looks normal.</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="data-forensics-and-cleaning-geospatial-data.html#cb566-1" aria-hidden="true" tabindex="-1"></a><span class="co">#   Convert the monsters dataframe into an SF (spatial) object</span></span>
<span id="cb566-2"><a href="data-forensics-and-cleaning-geospatial-data.html#cb566-2" aria-hidden="true" tabindex="-1"></a><span class="co">#     Note: x is the dataframe, not longitude.</span></span>
<span id="cb566-3"><a href="data-forensics-and-cleaning-geospatial-data.html#cb566-3" aria-hidden="true" tabindex="-1"></a><span class="co">#     Coordinate Reference System (CRS) - we&#39;re using lat/long here so we need WGS84 which is EPSG code 4326 - we just need to tell R what the CRS is, we don&#39;t change it this way.  If we want to change it, we need to use st_transform().</span></span>
<span id="cb566-4"><a href="data-forensics-and-cleaning-geospatial-data.html#cb566-4" aria-hidden="true" tabindex="-1"></a>monsters.sf<span class="ot">&lt;-</span><span class="fu">st_as_sf</span>(<span class="at">x=</span>monsters.df, </span>
<span id="cb566-5"><a href="data-forensics-and-cleaning-geospatial-data.html#cb566-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">coords=</span><span class="fu">c</span>(<span class="st">&quot;lon_dd&quot;</span>, <span class="st">&quot;lat_dd&quot;</span>), </span>
<span id="cb566-6"><a href="data-forensics-and-cleaning-geospatial-data.html#cb566-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb566-7"><a href="data-forensics-and-cleaning-geospatial-data.html#cb566-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb566-8"><a href="data-forensics-and-cleaning-geospatial-data.html#cb566-8" aria-hidden="true" tabindex="-1"></a><span class="co">#     Notice we added a geometry column!</span></span>
<span id="cb566-9"><a href="data-forensics-and-cleaning-geospatial-data.html#cb566-9" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(monsters.sf)</span></code></pre></div>
<pre><code>##  [1] &quot;fid&quot;         &quot;field_1&quot;     &quot;Lake&quot;        &quot;Area&quot;        &quot;Country&quot;    
##  [6] &quot;Continent&quot;   &quot;Name&quot;        &quot;lat&quot;         &quot;lon&quot;         &quot;lat_dms&quot;    
## [11] &quot;lon_dms&quot;     &quot;coords_3395&quot; &quot;lon_3395&quot;    &quot;lat_3395&quot;    &quot;geometry&quot;</code></pre>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb568-1"><a href="data-forensics-and-cleaning-geospatial-data.html#cb568-1" aria-hidden="true" tabindex="-1"></a><span class="co">#     Plot a map</span></span>
<span id="cb568-2"><a href="data-forensics-and-cleaning-geospatial-data.html#cb568-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mapview</span>(monsters.sf)</span></code></pre></div>
<div class="figure">
<img src="img/mapview_monsters.png" alt="" />
<p class="caption">This is a screen capture of the output for the mapview function. Running this code in a regular R session (i.e. not in knitr or bookdown like we need to for this reader) will make an interactive map.</p>
</div>
<p>In the interactive version of this map, you can pan and zoom to different areas to see more detail. Clicking on a point will open a popup with attribute information.</p>
<p>First impressions: This map looks good! The points are all on land masses, none in the ocean. Let’s see if they are on the correct continent…</p>
<div class="sourceCode" id="cb569"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb569-1"><a href="data-forensics-and-cleaning-geospatial-data.html#cb569-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mapview</span>(monsters.sf, <span class="at">zcol=</span><span class="st">&quot;Continent&quot;</span>, <span class="at">legend=</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<div class="figure">
<img src="img/mapview_monsters_byContinent.png" alt="" />
<p class="caption">Map of monster locations by continent</p>
</div>
<p>It’s hard to see, but there’s a point in Michigan that’s the wrong color for North America!</p>
<div class="figure">
<img src="img/mapview_monsters_byContinent_zoom.png" alt="" />
<p class="caption">Map of monster locations by continent zoomed in to the Great Lakes</p>
</div>
<p>Whoops! Lakes of Killarney isn’t in Michigan! That point should be in Ireland! If we zoom in, we can see why the geocoder got confused. The lake names are very similar.</p>
</div>
<div id="cleaning-attribute-data" class="section level3" number="20.5.4">
<h3><span class="header-section-number">20.5.4</span> Cleaning Attribute Data</h3>
<p>Attribute data can be proofed in much the same way tabular data can be proofed. You can look at the statistical properties of numeric data or the unique entities in a list of categorical variables to see if any values are odd or out of place.</p>
<p>With spatial data, we can also map the data and visualize it by attribute values to see if anything is out of place spatially. Labels are another helpful tool. Sometimes cleaning attributes uncovers issues with the locations.</p>
<p>Let’s make sure the lake names match the lakes the points are in. We’ll make a map and if you zoom in enough, the lake names will appear in the background map data.</p>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb570-1"><a href="data-forensics-and-cleaning-geospatial-data.html#cb570-1" aria-hidden="true" tabindex="-1"></a>my.label.options<span class="ot">&lt;-</span><span class="fu">labelOptions</span>(<span class="at">clickable=</span><span class="cn">TRUE</span>) <span class="co">#makes a popup with attribute information</span></span>
<span id="cb570-2"><a href="data-forensics-and-cleaning-geospatial-data.html#cb570-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb570-3"><a href="data-forensics-and-cleaning-geospatial-data.html#cb570-3" aria-hidden="true" tabindex="-1"></a>map.lakename<span class="ot">&lt;-</span><span class="fu">mapview</span>(monsters.sf, <span class="at">zcol=</span><span class="st">&quot;Lake&quot;</span>, <span class="at">legend=</span> <span class="cn">FALSE</span>)</span>
<span id="cb570-4"><a href="data-forensics-and-cleaning-geospatial-data.html#cb570-4" aria-hidden="true" tabindex="-1"></a>labels.lakename<span class="ot">&lt;-</span><span class="fu">addStaticLabels</span>(map.lakename, </span>
<span id="cb570-5"><a href="data-forensics-and-cleaning-geospatial-data.html#cb570-5" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">label=</span>monsters.sf<span class="sc">$</span>Lake,</span>
<span id="cb570-6"><a href="data-forensics-and-cleaning-geospatial-data.html#cb570-6" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">labelOption=</span>my.label.options)</span>
<span id="cb570-7"><a href="data-forensics-and-cleaning-geospatial-data.html#cb570-7" aria-hidden="true" tabindex="-1"></a>labels.lakename</span></code></pre></div>
<div class="figure">
<img src="img/mapview_monsters_byLake.png" alt="" />
<p class="caption">Map of monster locations by lake name zoomed in to the Great Lakes</p>
</div>
<div class="figure">
<img src="img/mapview_monsters_byLake_zoom.png" alt="" />
<p class="caption">Map of monster locations by lake name zoomed in to the Great Lakes</p>
</div>
<p>And for fun, let’s look at the monster names:</p>
<div class="sourceCode" id="cb571"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb571-1"><a href="data-forensics-and-cleaning-geospatial-data.html#cb571-1" aria-hidden="true" tabindex="-1"></a>map.monstername<span class="ot">&lt;-</span><span class="fu">mapview</span>(monsters.sf, <span class="at">zcol=</span><span class="st">&quot;Name&quot;</span>, <span class="at">legend=</span> <span class="cn">FALSE</span>)</span>
<span id="cb571-2"><a href="data-forensics-and-cleaning-geospatial-data.html#cb571-2" aria-hidden="true" tabindex="-1"></a>labels.monstername<span class="ot">&lt;-</span><span class="fu">addStaticLabels</span>(map.monstername, </span>
<span id="cb571-3"><a href="data-forensics-and-cleaning-geospatial-data.html#cb571-3" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">label=</span>monsters.sf<span class="sc">$</span>Name,</span>
<span id="cb571-4"><a href="data-forensics-and-cleaning-geospatial-data.html#cb571-4" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">labelOption=</span>my.label.options)</span>
<span id="cb571-5"><a href="data-forensics-and-cleaning-geospatial-data.html#cb571-5" aria-hidden="true" tabindex="-1"></a>labels.monstername</span></code></pre></div>
<div class="figure">
<img src="img/mapview_monsters_byName.png" alt="" />
<p class="caption">Map of monster locations by monster name zoomed in to the Great Lakes</p>
</div>
<div class="figure">
<img src="img/mapview_monsters_byName_zoom.png" alt="" />
<p class="caption">Map of monster locations by monster name zoomed in to the Great Lakes</p>
</div>
<p>Yikes! That needs some clean-up too! The name column is missing some names and some records have extra information in them.</p>
</div>
<div id="checking-coordinate-reference-systems" class="section level3" number="20.5.5">
<h3><span class="header-section-number">20.5.5</span> Checking Coordinate Reference Systems</h3>
<p>“Why is my California data showing up in Arizona?” is a common question UC Davis researchers ask on the Geospatial email list. Why does this happen? It’s usually because the CRS for their data is impropperly defined. Someone changed the defnition but didn’t reproject the data (the mathematical process of switching CRSs). Using the wrong CRS will often shift data just enough to look really funny on a map, but sometimes it won’t show up at all.</p>
<p>“Why don’t my datasets line up in my map?” Again, it’s your CRS. In this case, they could be correct for all of the datasets you’re using, but each dataset has a different CRS. You can think of CRSs as different dimensions in your favorite SciFi story. Sometimes you can see the other person in the other dimension (CRS), but usually they are too different and you’re nowhere near each other. Datasets have to have the same CRS to make a map or do any analysis.</p>
<p>Our data came with lat/long data in another coordinate reference system - EPSG 3395 “World Mercator,” a world projection centered on Europe. Notice how the coordinates look very different from the lat/long coordinates in EPSG 4326 “WGS 84”</p>
<div class="sourceCode" id="cb572"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb572-1"><a href="data-forensics-and-cleaning-geospatial-data.html#cb572-1" aria-hidden="true" tabindex="-1"></a>monsters.df[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="dv">13</span><span class="sc">:</span><span class="dv">16</span>]</span></code></pre></div>
<pre><code>##       lon_3395 lat_3395    lat_dd      lon_dd
## 1   -9445647.6  1166706  10.49143  -84.851696
## 2    3315604.4 -1240572 -11.14741   29.784582
## 3    -357737.6  7259890  54.65279   -3.213612
## 4  -12392072.4  5164853  42.21721 -111.319881
## 5    3552722.8  7688451  56.82407   31.914652
## 6   11578825.6  2027101  18.02363  104.014360
## 7   -7845463.9  5433619  43.98618  -70.477001
## 8  -12704546.6  6054836  47.87777 -114.126884
## 9   -9467608.2  5128572  41.97447  -85.048971
## 10 -12525669.2  5011829  41.18707 -112.520000</code></pre>
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb574-1"><a href="data-forensics-and-cleaning-geospatial-data.html#cb574-1" aria-hidden="true" tabindex="-1"></a><span class="co">#   Let&#39;s make our World Mercator data spatial so we can explore its CRS</span></span>
<span id="cb574-2"><a href="data-forensics-and-cleaning-geospatial-data.html#cb574-2" aria-hidden="true" tabindex="-1"></a>monsters.sf<span class="fl">.3395</span><span class="ot">&lt;-</span><span class="fu">st_as_sf</span>(<span class="at">x=</span>monsters.df, </span>
<span id="cb574-3"><a href="data-forensics-and-cleaning-geospatial-data.html#cb574-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">coords=</span><span class="fu">c</span>(<span class="st">&quot;lon_3395&quot;</span>, <span class="st">&quot;lat_3395&quot;</span>), </span>
<span id="cb574-4"><a href="data-forensics-and-cleaning-geospatial-data.html#cb574-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">crs =</span> <span class="dv">3395</span>)</span>
<span id="cb574-5"><a href="data-forensics-and-cleaning-geospatial-data.html#cb574-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb574-6"><a href="data-forensics-and-cleaning-geospatial-data.html#cb574-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   st_crs tells us what the CRS is in well known text (WKT) and EPSG (if it&#39;s avaialble)</span></span>
<span id="cb574-7"><a href="data-forensics-and-cleaning-geospatial-data.html#cb574-7" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(monsters.sf)</span></code></pre></div>
<pre><code>## Coordinate Reference System:
##   User input: EPSG:4326 
##   wkt:
## GEOGCRS[&quot;WGS 84&quot;,
##     DATUM[&quot;World Geodetic System 1984&quot;,
##         ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
##             LENGTHUNIT[&quot;metre&quot;,1]]],
##     PRIMEM[&quot;Greenwich&quot;,0,
##         ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##     CS[ellipsoidal,2],
##         AXIS[&quot;geodetic latitude (Lat)&quot;,north,
##             ORDER[1],
##             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##         AXIS[&quot;geodetic longitude (Lon)&quot;,east,
##             ORDER[2],
##             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##     USAGE[
##         SCOPE[&quot;unknown&quot;],
##         AREA[&quot;World&quot;],
##         BBOX[-90,-180,90,180]],
##     ID[&quot;EPSG&quot;,4326]]</code></pre>
<div class="sourceCode" id="cb576"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb576-1"><a href="data-forensics-and-cleaning-geospatial-data.html#cb576-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(monsters.sf<span class="fl">.3395</span>)</span></code></pre></div>
<pre><code>## Coordinate Reference System:
##   User input: EPSG:3395 
##   wkt:
## PROJCRS[&quot;WGS 84 / World Mercator&quot;,
##     BASEGEOGCRS[&quot;WGS 84&quot;,
##         DATUM[&quot;World Geodetic System 1984&quot;,
##             ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
##                 LENGTHUNIT[&quot;metre&quot;,1]]],
##         PRIMEM[&quot;Greenwich&quot;,0,
##             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##         ID[&quot;EPSG&quot;,4326]],
##     CONVERSION[&quot;World Mercator&quot;,
##         METHOD[&quot;Mercator (variant A)&quot;,
##             ID[&quot;EPSG&quot;,9804]],
##         PARAMETER[&quot;Latitude of natural origin&quot;,0,
##             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433],
##             ID[&quot;EPSG&quot;,8801]],
##         PARAMETER[&quot;Longitude of natural origin&quot;,0,
##             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433],
##             ID[&quot;EPSG&quot;,8802]],
##         PARAMETER[&quot;Scale factor at natural origin&quot;,1,
##             SCALEUNIT[&quot;unity&quot;,1],
##             ID[&quot;EPSG&quot;,8805]],
##         PARAMETER[&quot;False easting&quot;,0,
##             LENGTHUNIT[&quot;metre&quot;,1],
##             ID[&quot;EPSG&quot;,8806]],
##         PARAMETER[&quot;False northing&quot;,0,
##             LENGTHUNIT[&quot;metre&quot;,1],
##             ID[&quot;EPSG&quot;,8807]]],
##     CS[Cartesian,2],
##         AXIS[&quot;(E)&quot;,east,
##             ORDER[1],
##             LENGTHUNIT[&quot;metre&quot;,1]],
##         AXIS[&quot;(N)&quot;,north,
##             ORDER[2],
##             LENGTHUNIT[&quot;metre&quot;,1]],
##     USAGE[
##         SCOPE[&quot;unknown&quot;],
##         AREA[&quot;World - between 80Â°S and 84Â°N&quot;],
##         BBOX[-80,-180,84,180]],
##     ID[&quot;EPSG&quot;,3395]]</code></pre>
<div class="sourceCode" id="cb578"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb578-1"><a href="data-forensics-and-cleaning-geospatial-data.html#cb578-1" aria-hidden="true" tabindex="-1"></a><span class="co">#   Check to see if they are identical, returning a logical vector</span></span>
<span id="cb578-2"><a href="data-forensics-and-cleaning-geospatial-data.html#cb578-2" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(<span class="fu">st_crs</span>(monsters.sf),</span>
<span id="cb578-3"><a href="data-forensics-and-cleaning-geospatial-data.html#cb578-3" aria-hidden="true" tabindex="-1"></a>          <span class="fu">st_crs</span>(monsters.sf<span class="fl">.3395</span>))</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</div>
</div>
<div id="conclusions" class="section level2" number="20.6">
<h2><span class="header-section-number">20.6</span> Conclusions</h2>
<p>We’ve learned some of the basics of geospatial data. We learned that the main components of geospatial data are locations, attributes, and a coordinate reference system. We saw how geospatial data can be represented with different data models, but we focused on point vector data. We learned that the data structures we were already familiar with can be modified to contain spatial data. And finally, we looked at some common processes for cleaning our geospatial data.</p>
<p>This was a lot to cover, but we just scratched the surface of all your can do with geospatial data science! If you want to learn more, UC Davis has some fantastic introductory classes for GIS (Geographic Information Systems/Science) and Remote Sensing (working satelite data and air photos).</p>
</div>
<div id="optional-further-reading" class="section level2" number="20.7">
<h2><span class="header-section-number">20.7</span> Optional Further Reading:</h2>
<ol style="list-style-type: decimal">
<li>Bolstad, P. 2019. <em>GIS Fundamentals: A first text on geographic information systems</em>. Sixth Edition. XanEdu. Ann Arbor, MI. 764 pp.</li>
<li>Sutton, T., O. Dassau, &amp; M. Sutton. 2021. <em>A Gentle Introduction to GIS</em>. <a href="https://docs.qgis.org/3.16/en/docs/gentle_gis_introduction/preamble.html" class="uri">https://docs.qgis.org/3.16/en/docs/gentle_gis_introduction/preamble.html</a> (accessed on 2021-02-11)</li>
</ol>
</div>
<div id="citations" class="section level2" number="20.8">
<h2><span class="header-section-number">20.8</span> Citations</h2>

<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-anKeyplayerPackageLocating2016" class="csl-entry">
An, Weihua, and Yu-Hsin Liu. 2016. <span>“Keyplayer: <span>An R Package</span> for <span>Locating Key Players</span> in <span>Social Networks</span>.”</span> <em>The R Journal</em> 8 (1): 257. <a href="https://doi.org/10.32614/RJ-2016-018">https://doi.org/10.32614/RJ-2016-018</a>.
</div>
<div id="ref-balabanApplicationsGraphTheory1985" class="csl-entry">
Balaban, Alexandru T. 1985. <span>“Applications of Graph Theory in Chemistry.”</span> <em>Journal of Chemical Information and Modeling</em> 25 (3): 334–43. <a href="https://doi.org/10.1021/ci00047a033">https://doi.org/10.1021/ci00047a033</a>.
</div>
<div id="ref-bassettNetworkNeuroscience2017" class="csl-entry">
Bassett, Danielle S., and Olaf Sporns. 2017. <span>“Network Neuroscience.”</span> <em>Nature Neuroscience</em> 20 (3): 353–64. <a href="https://doi.org/10.1038/nn.4502">https://doi.org/10.1038/nn.4502</a>.
</div>
<div id="ref-fanGraphbasedMethodSocial2019" class="csl-entry">
Fan, Chao, and Ali Mostafavi. 2019. <span>“A Graph-Based Method for Social Sensing of Infrastructure Disruptions in Disasters.”</span> <em>Computer-Aided Civil and Infrastructure Engineering</em> 34 (12): 1055–70. <a href="https://doi.org/10.1111/mice.12457">https://doi.org/10.1111/mice.12457</a>.
</div>
<div id="ref-kadushinUnderstandingSocialNetworks2012" class="csl-entry">
Kadushin, Charles. 2012. <em>Understanding <span>Social Networks</span>: <span>Theories</span>, <span>Concepts</span>, and <span>Findings</span></em>. <span>New York, NY</span>: <span>Oxford University Press</span>.
</div>
<div id="ref-krebsMappingNetworksTerrorist2002" class="csl-entry">
Krebs, Valdis E. 2002. <span>“Mapping Networks of Terrorist Cells.”</span> <em>Connections</em> 24 (3): 43–52.
</div>
<div id="ref-morenoWhoShallSurvive1953" class="csl-entry">
Moreno, Jacob L. 1953. <span>“Who <span>Shall Survive</span>?: <span>Foundations</span> of <span>Sociometry</span>, <span>Group Psychotherapy</span> and <span>Sociodrama</span>.”</span> In. <span>Beacon, N.Y.</span>: <span>Beacon House Inc.</span>
</div>
<div id="ref-pageMethodNodeRanking2001" class="csl-entry">
Page, Lawrence. 2001. Method for node ranking in a linked database. US6285999B1, issued September 2001. <a href="https://patents.google.com/patent/US6285999/en">https://patents.google.com/patent/US6285999/en</a>.
</div>
<div id="ref-robinsIntroductionExponentialRandom2007" class="csl-entry">
Robins, Garry, Pip Pattison, Yuval Kalish, and Dean Lusher. 2007. <span>“An Introduction to Exponential Random Graph (p*) Models for Social Networks.”</span> <em>Social Networks</em>, Special <span>section</span>: <span>Advances</span> in <span>Exponential Random Graph</span> (p*) <span>Models</span>, 29 (2): 173–91. <a href="https://doi.org/10.1016/j.socnet.2006.08.002">https://doi.org/10.1016/j.socnet.2006.08.002</a>.
</div>
<div id="ref-robinsRecentDevelopmentsExponential2007" class="csl-entry">
Robins, Garry, Tom Snijders, Peng Wang, Mark Handcock, and Philippa Pattison. 2007. <span>“Recent Developments in Exponential Random Graph (p*) Models for Social Networks.”</span> <em>Social Networks</em>, Special <span>section</span>: <span>Advances</span> in <span>Exponential Random Graph</span> (p*) <span>Models</span>, 29 (2): 192–215. <a href="https://doi.org/10.1016/j.socnet.2006.08.003">https://doi.org/10.1016/j.socnet.2006.08.003</a>.
</div>
<div id="ref-wassermanSocialNetworkAnalysis1994" class="csl-entry">
Wasserman, Stanley, and Katherine Faust. 1994. <em>Social Network Analysis: <span>Methods</span> and Applications</em>. <span>Cambridge, UK</span>: <span>Cambridge University Press</span>.
</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="working-with-unstructured-data.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ucdavisdatalab/adventures_in_data_science/edit/master/20_data-forensics-geospatial.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ucdavisdatalab/adventures_in_data_science/blob/master/20_data-forensics-geospatial.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
