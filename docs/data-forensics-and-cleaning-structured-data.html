<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>14 Data Forensics and Cleaning: Structured Data | Adventures in Data Science</title>
  <meta name="description" content="14 Data Forensics and Cleaning: Structured Data | Adventures in Data Science" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="14 Data Forensics and Cleaning: Structured Data | Adventures in Data Science" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://ucdavisdatalab.github.io/adventures_in_data_science/" />
  
  
  <meta name="github-repo" content="ucdavisdatalab/adventures_in_data_science" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="14 Data Forensics and Cleaning: Structured Data | Adventures in Data Science" />
  
  
  

<meta name="author" content="Dr. Carl Stahmer" />
<meta name="author" content="Dr. Pamela L. Reynolds" />
<meta name="author" content="Dr. Nick Ulle" />
<meta name="author" content="Dr. Tyler Shoemaker" />
<meta name="author" content="Dr. Michele Tobias" />
<meta name="author" content="Dr. Wesley Brooks" />
<meta name="author" content="Arthur Koehl" />
<meta name="author" content="Carrie Alexander" />
<meta name="author" content="Jared Joseph" />


<meta name="date" content="2022-02-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="check-for-equal-variances---these-are-close-enough.html"/>
<link rel="next" href="data-forensics-and-cleaning-unstructured-data.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>
<link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet" />
<script src="libs/vis-9.1.0/vis-network.min.js"></script>
<script src="libs/visNetwork-binding-2.1.0/visNetwork.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://datalab.ucdavis.edu/">
  <img src="img/datalab-logo-full-color-rgb.png" style="height: 100%; width: 100%; object-fit: contain" />
</a></li>
<li><a href="./" style="font-size: 18px">Adventures in Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="1" data-path="working-with-the-command-line.html"><a href="working-with-the-command-line.html"><i class="fa fa-check"></i><b>1</b> Working with the Command Line</a>
<ul>
<li class="chapter" data-level="1.1" data-path="working-with-the-command-line.html"><a href="working-with-the-command-line.html#interacting-with-the-command-line"><i class="fa fa-check"></i><b>1.1</b> Interacting with the Command Line</a></li>
<li class="chapter" data-level="1.2" data-path="working-with-the-command-line.html"><a href="working-with-the-command-line.html#common-command-line-commands"><i class="fa fa-check"></i><b>1.2</b> Common Command Line Commands</a></li>
<li class="chapter" data-level="1.3" data-path="working-with-the-command-line.html"><a href="working-with-the-command-line.html#command-line-text-editors"><i class="fa fa-check"></i><b>1.3</b> Command Line Text Editors</a></li>
<li class="chapter" data-level="1.4" data-path="working-with-the-command-line.html"><a href="working-with-the-command-line.html#basic-vim-commands"><i class="fa fa-check"></i><b>1.4</b> Basic Vim Commands</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html"><i class="fa fa-check"></i><b>2</b> Introduction to Version Control</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#what-is-version-control"><i class="fa fa-check"></i><b>2.1</b> What is Version Control?</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#software-assisted-version-control"><i class="fa fa-check"></i><b>2.2</b> Software Assisted Version Control</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#local-vs-server-based-version-control"><i class="fa fa-check"></i><b>2.3</b> Local vs Server Based Version Control</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#central-version-control-systems"><i class="fa fa-check"></i><b>2.4</b> Central Version Control Systems</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#distributed-version-control-systems"><i class="fa fa-check"></i><b>2.5</b> Distributed Version Control Systems</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#the-best-of-both-worlds"><i class="fa fa-check"></i><b>2.6</b> The Best of Both Worlds</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#vcs-and-the-computer-file-system"><i class="fa fa-check"></i><b>2.7</b> VCS and the Computer File System</a></li>
<li class="chapter" data-level="2.8" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#how-computers-store-and-access-information"><i class="fa fa-check"></i><b>2.8</b> How Computers Store and Access Information</a></li>
<li class="chapter" data-level="2.9" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#how-vcs-manage-your-files"><i class="fa fa-check"></i><b>2.9</b> How VCS Manage Your Files</a></li>
<li class="chapter" data-level="2.10" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#graph-based-data-management"><i class="fa fa-check"></i><b>2.10</b> Graph-Based Data Management</a></li>
<li class="chapter" data-level="2.11" data-path="introduction-to-version-control.html"><a href="introduction-to-version-control.html#additional-resources"><i class="fa fa-check"></i><b>2.11</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="git-version-control-basics.html"><a href="git-version-control-basics.html"><i class="fa fa-check"></i><b>3</b> Git Version Control Basics</a>
<ul>
<li class="chapter" data-level="3.1" data-path="git-version-control-basics.html"><a href="git-version-control-basics.html#save-stage-commit"><i class="fa fa-check"></i><b>3.1</b> Save, Stage, Commit</a></li>
<li class="chapter" data-level="3.2" data-path="git-version-control-basics.html"><a href="git-version-control-basics.html#creating-your-first-repo"><i class="fa fa-check"></i><b>3.2</b> Creating Your First Repo</a></li>
<li class="chapter" data-level="3.3" data-path="git-version-control-basics.html"><a href="git-version-control-basics.html#checking-the-status-of-a-repo"><i class="fa fa-check"></i><b>3.3</b> Checking the Status of a Repo</a></li>
<li class="chapter" data-level="3.4" data-path="git-version-control-basics.html"><a href="git-version-control-basics.html#version-of-a-file"><i class="fa fa-check"></i><b>3.4</b> Version of a File</a></li>
<li class="chapter" data-level="3.5" data-path="git-version-control-basics.html"><a href="git-version-control-basics.html#view-a-history-of-your-commits"><i class="fa fa-check"></i><b>3.5</b> View a History of Your Commits</a></li>
<li class="chapter" data-level="3.6" data-path="git-version-control-basics.html"><a href="git-version-control-basics.html#comparing-commits"><i class="fa fa-check"></i><b>3.6</b> Comparing Commits</a></li>
<li class="chapter" data-level="3.7" data-path="git-version-control-basics.html"><a href="git-version-control-basics.html#comparing-files"><i class="fa fa-check"></i><b>3.7</b> Comparing Files</a></li>
<li class="chapter" data-level="3.8" data-path="git-version-control-basics.html"><a href="git-version-control-basics.html#to-view-an-earlier-commit"><i class="fa fa-check"></i><b>3.8</b> To View an Earlier Commit</a></li>
<li class="chapter" data-level="3.9" data-path="git-version-control-basics.html"><a href="git-version-control-basics.html#undoing-things"><i class="fa fa-check"></i><b>3.9</b> Undoing Things</a></li>
<li class="chapter" data-level="3.10" data-path="git-version-control-basics.html"><a href="git-version-control-basics.html#when-things-go-wrong"><i class="fa fa-check"></i><b>3.10</b> When Things go Wrong!</a></li>
<li class="chapter" data-level="3.11" data-path="git-version-control-basics.html"><a href="git-version-control-basics.html#git-branching"><i class="fa fa-check"></i><b>3.11</b> Git Branching</a>
<ul>
<li class="chapter" data-level="3.11.1" data-path="git-version-control-basics.html"><a href="git-version-control-basics.html#merging-branches"><i class="fa fa-check"></i><b>3.11.1</b> Merging Branches</a></li>
<li class="chapter" data-level="3.11.2" data-path="git-version-control-basics.html"><a href="git-version-control-basics.html#branching-workflows"><i class="fa fa-check"></i><b>3.11.2</b> Branching Workflows</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="working-with-remote-repositories.html"><a href="working-with-remote-repositories.html"><i class="fa fa-check"></i><b>4</b> Working with Remote Repositories</a>
<ul>
<li class="chapter" data-level="4.1" data-path="working-with-remote-repositories.html"><a href="working-with-remote-repositories.html#github-basics"><i class="fa fa-check"></i><b>4.1</b> GitHub Basics</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="working-with-remote-repositories.html"><a href="working-with-remote-repositories.html#communicating-through-github"><i class="fa fa-check"></i><b>4.1.1</b> Communicating Through GitHub</a></li>
<li class="chapter" data-level="4.1.2" data-path="working-with-remote-repositories.html"><a href="working-with-remote-repositories.html#what-should-i-push-to-github"><i class="fa fa-check"></i><b>4.1.2</b> What Should I Push to GitHub?</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="working-with-remote-repositories.html"><a href="working-with-remote-repositories.html#basic-github-account-setup"><i class="fa fa-check"></i><b>4.2</b> Basic GitHub Account Setup</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="working-with-remote-repositories.html"><a href="working-with-remote-repositories.html#locally-setting-up-your-git-credentials"><i class="fa fa-check"></i><b>4.2.1</b> Locally Setting Up Your Git Credentials</a></li>
<li class="chapter" data-level="4.2.2" data-path="working-with-remote-repositories.html"><a href="working-with-remote-repositories.html#ssh-keys-and-github"><i class="fa fa-check"></i><b>4.2.2</b> SSH Keys and GitHub</a></li>
<li class="chapter" data-level="4.2.3" data-path="working-with-remote-repositories.html"><a href="working-with-remote-repositories.html#connecting-to-github-with-ssh"><i class="fa fa-check"></i><b>4.2.3</b> Connecting to GitHub with SSH</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="working-with-remote-repositories.html"><a href="working-with-remote-repositories.html#github-desktop-or-the-command-line"><i class="fa fa-check"></i><b>4.3</b> GitHub Desktop, or the Command Line?</a></li>
<li class="chapter" data-level="4.4" data-path="working-with-remote-repositories.html"><a href="working-with-remote-repositories.html#sync-with-github"><i class="fa fa-check"></i><b>4.4</b> Sync with GitHub</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="working-with-remote-repositories.html"><a href="working-with-remote-repositories.html#preparing-to-sync-your-repository"><i class="fa fa-check"></i><b>4.4.1</b> Preparing to Sync Your Repository</a></li>
<li class="chapter" data-level="4.4.2" data-path="working-with-remote-repositories.html"><a href="working-with-remote-repositories.html#pushing-a-local-repository"><i class="fa fa-check"></i><b>4.4.2</b> Pushing a Local Repository</a></li>
<li class="chapter" data-level="4.4.3" data-path="working-with-remote-repositories.html"><a href="working-with-remote-repositories.html#tracking-files-remotely"><i class="fa fa-check"></i><b>4.4.3</b> Tracking Files Remotely</a></li>
<li class="chapter" data-level="4.4.4" data-path="working-with-remote-repositories.html"><a href="working-with-remote-repositories.html#pulling-changes-from-a-remote-repository"><i class="fa fa-check"></i><b>4.4.4</b> Pulling Changes from a Remote Repository</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="working-with-remote-repositories.html"><a href="working-with-remote-repositories.html#cloning-a-repository"><i class="fa fa-check"></i><b>4.5</b> Cloning a Repository</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="working-with-remote-repositories.html"><a href="working-with-remote-repositories.html#how-to-clone-a-repository"><i class="fa fa-check"></i><b>4.5.1</b> How to Clone a Repository</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>5</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="5.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#learning-objectives"><i class="fa fa-check"></i><b>5.1</b> Learning objectives</a></li>
<li class="chapter" data-level="5.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#before-we-start"><i class="fa fa-check"></i><b>5.2</b> Before We Start</a></li>
<li class="chapter" data-level="5.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#mathematical-operations"><i class="fa fa-check"></i><b>5.3</b> Mathematical Operations</a></li>
<li class="chapter" data-level="5.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#variables"><i class="fa fa-check"></i><b>5.4</b> Variables</a></li>
<li class="chapter" data-level="5.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#calling-functions"><i class="fa fa-check"></i><b>5.5</b> Calling Functions</a></li>
<li class="chapter" data-level="5.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#help"><i class="fa fa-check"></i><b>5.6</b> HELP!</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#when-something-goes-wrong-and-it-will"><i class="fa fa-check"></i><b>5.6.1</b> When Something Goes Wrong (and it will)</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#vectors"><i class="fa fa-check"></i><b>5.7</b> Vectors</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#indexing-vectors"><i class="fa fa-check"></i><b>5.7.1</b> Indexing Vectors</a></li>
<li class="chapter" data-level="5.7.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#vectorization"><i class="fa fa-check"></i><b>5.7.2</b> Vectorization</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-frames"><i class="fa fa-check"></i><b>5.8</b> Data Frames</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selecting-columns"><i class="fa fa-check"></i><b>5.8.1</b> Selecting Columns</a></li>
<li class="chapter" data-level="5.8.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#inspecting-data"><i class="fa fa-check"></i><b>5.8.2</b> Inspecting Data</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-types-classes"><i class="fa fa-check"></i><b>5.9</b> Data Types &amp; Classes</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#lists"><i class="fa fa-check"></i><b>5.9.1</b> Lists</a></li>
<li class="chapter" data-level="5.9.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#implicit-coercion"><i class="fa fa-check"></i><b>5.9.2</b> Implicit Coercion</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="control-structures.html"><a href="control-structures.html"><i class="fa fa-check"></i><b>6</b> Control Structures</a>
<ul>
<li class="chapter" data-level="6.1" data-path="control-structures.html"><a href="control-structures.html#if-statement"><i class="fa fa-check"></i><b>6.1</b> <em>If</em> Statement</a></li>
<li class="chapter" data-level="6.2" data-path="control-structures.html"><a href="control-structures.html#relationship-operators"><i class="fa fa-check"></i><b>6.2</b> Relationship Operators</a></li>
<li class="chapter" data-level="6.3" data-path="control-structures.html"><a href="control-structures.html#if-else-statement"><i class="fa fa-check"></i><b>6.3</b> <em>If Else</em> Statement</a></li>
<li class="chapter" data-level="6.4" data-path="control-structures.html"><a href="control-structures.html#ifelse-statement"><i class="fa fa-check"></i><b>6.4</b> <em>ifelse</em> Statement</a></li>
<li class="chapter" data-level="6.5" data-path="control-structures.html"><a href="control-structures.html#the-switch-statement"><i class="fa fa-check"></i><b>6.5</b> The <em>switch</em> Statement</a></li>
<li class="chapter" data-level="6.6" data-path="control-structures.html"><a href="control-structures.html#the-which-statement"><i class="fa fa-check"></i><b>6.6</b> The <em>which</em> Statement</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="iterating-loops.html"><a href="iterating-loops.html"><i class="fa fa-check"></i><b>7</b> Iterating (Loops)</a>
<ul>
<li class="chapter" data-level="7.1" data-path="iterating-loops.html"><a href="iterating-loops.html#for-i-in-x-loops"><i class="fa fa-check"></i><b>7.1</b> For <em>i</em> in <em>x</em> Loops</a></li>
<li class="chapter" data-level="7.2" data-path="iterating-loops.html"><a href="iterating-loops.html#while-loops"><i class="fa fa-check"></i><b>7.2</b> <em>While</em> Loops</a></li>
<li class="chapter" data-level="7.3" data-path="iterating-loops.html"><a href="iterating-loops.html#repeat-loops"><i class="fa fa-check"></i><b>7.3</b> <em>Repeat</em> Loops</a></li>
<li class="chapter" data-level="7.4" data-path="iterating-loops.html"><a href="iterating-loops.html#break-and-next"><i class="fa fa-check"></i><b>7.4</b> <em>Break</em> and <em>Next</em></a></li>
<li class="chapter" data-level="7.5" data-path="iterating-loops.html"><a href="iterating-loops.html#iterating-data.frame-rows-in-r"><i class="fa fa-check"></i><b>7.5</b> Iterating Data.Frame Rows in R</a></li>
<li class="chapter" data-level="7.6" data-path="iterating-loops.html"><a href="iterating-loops.html#lapply"><i class="fa fa-check"></i><b>7.6</b> <em>lapply()</em></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>8</b> Functions</a>
<ul>
<li class="chapter" data-level="8.1" data-path="functions.html"><a href="functions.html#learning-objectives-1"><i class="fa fa-check"></i><b>8.1</b> Learning objectives</a></li>
<li class="chapter" data-level="8.2" data-path="functions.html"><a href="functions.html#what-is-a-function"><i class="fa fa-check"></i><b>8.2</b> What is a function?</a></li>
<li class="chapter" data-level="8.3" data-path="functions.html"><a href="functions.html#what-is-the-basic-syntax-of-a-function-in-r"><i class="fa fa-check"></i><b>8.3</b> What is the basic syntax of a function in R?</a></li>
<li class="chapter" data-level="8.4" data-path="functions.html"><a href="functions.html#building-and-calling-functions"><i class="fa fa-check"></i><b>8.4</b> Building and calling functions</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="functions.html"><a href="functions.html#step-1-building-the-function"><i class="fa fa-check"></i><b>8.4.1</b> Step 1: Building the function</a></li>
<li class="chapter" data-level="8.4.2" data-path="functions.html"><a href="functions.html#step-2-calling-the-function"><i class="fa fa-check"></i><b>8.4.2</b> Step 2: Calling the function</a></li>
<li class="chapter" data-level="8.4.3" data-path="functions.html"><a href="functions.html#example-function-with-one-argument"><i class="fa fa-check"></i><b>8.4.3</b> Example function with one argument</a></li>
<li class="chapter" data-level="8.4.4" data-path="functions.html"><a href="functions.html#example-function-with-more-than-one-argument"><i class="fa fa-check"></i><b>8.4.4</b> Example function with more than one argument</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="functions.html"><a href="functions.html#saving-functions-and-sourcing-them-from-another-file"><i class="fa fa-check"></i><b>8.5</b> Saving functions and sourcing them from another file</a></li>
<li class="chapter" data-level="8.6" data-path="functions.html"><a href="functions.html#saving-functions-and-calling-them-from-another-file"><i class="fa fa-check"></i><b>8.6</b> Saving functions and calling them from another file</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="working-with-files-and-packages.html"><a href="working-with-files-and-packages.html"><i class="fa fa-check"></i><b>9</b> Working with Files and Packages</a>
<ul>
<li class="chapter" data-level="9.1" data-path="working-with-files-and-packages.html"><a href="working-with-files-and-packages.html#learning-objectives-2"><i class="fa fa-check"></i><b>9.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="9.2" data-path="working-with-files-and-packages.html"><a href="working-with-files-and-packages.html#setup"><i class="fa fa-check"></i><b>9.2</b> Setup</a></li>
<li class="chapter" data-level="9.3" data-path="working-with-files-and-packages.html"><a href="working-with-files-and-packages.html#exploring-files"><i class="fa fa-check"></i><b>9.3</b> Exploring Files</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="working-with-files-and-packages.html"><a href="working-with-files-and-packages.html#file-extensions"><i class="fa fa-check"></i><b>9.3.1</b> File Extensions</a></li>
<li class="chapter" data-level="9.3.2" data-path="working-with-files-and-packages.html"><a href="working-with-files-and-packages.html#text-files"><i class="fa fa-check"></i><b>9.3.2</b> Text Files</a></li>
<li class="chapter" data-level="9.3.3" data-path="working-with-files-and-packages.html"><a href="working-with-files-and-packages.html#binary-files"><i class="fa fa-check"></i><b>9.3.3</b> Binary Files</a></li>
<li class="chapter" data-level="9.3.4" data-path="working-with-files-and-packages.html"><a href="working-with-files-and-packages.html#common-data-file-types"><i class="fa fa-check"></i><b>9.3.4</b> Common Data File Types</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="working-with-files-and-packages.html"><a href="working-with-files-and-packages.html#reading-and-writing-files-in-r"><i class="fa fa-check"></i><b>9.4</b> Reading and Writing Files in R</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="working-with-files-and-packages.html"><a href="working-with-files-and-packages.html#the-working-directory"><i class="fa fa-check"></i><b>9.4.1</b> The Working Directory</a></li>
<li class="chapter" data-level="9.4.2" data-path="working-with-files-and-packages.html"><a href="working-with-files-and-packages.html#reading-a-csv-file"><i class="fa fa-check"></i><b>9.4.2</b> Reading a CSV File</a></li>
<li class="chapter" data-level="9.4.3" data-path="working-with-files-and-packages.html"><a href="working-with-files-and-packages.html#reader-functions-for-tabular-data"><i class="fa fa-check"></i><b>9.4.3</b> Reader Functions for Tabular Data</a></li>
<li class="chapter" data-level="9.4.4" data-path="working-with-files-and-packages.html"><a href="working-with-files-and-packages.html#rds"><i class="fa fa-check"></i><b>9.4.4</b> RDS</a></li>
<li class="chapter" data-level="9.4.5" data-path="working-with-files-and-packages.html"><a href="working-with-files-and-packages.html#writing-a-csv"><i class="fa fa-check"></i><b>9.4.5</b> Writing a csv</a></li>
<li class="chapter" data-level="9.4.6" data-path="working-with-files-and-packages.html"><a href="working-with-files-and-packages.html#excel-files-in-r"><i class="fa fa-check"></i><b>9.4.6</b> Excel Files in R</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="working-with-files-and-packages.html"><a href="working-with-files-and-packages.html#packages"><i class="fa fa-check"></i><b>9.5</b> Packages</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="working-with-files-and-packages.html"><a href="working-with-files-and-packages.html#cran"><i class="fa fa-check"></i><b>9.5.1</b> CRAN</a></li>
<li class="chapter" data-level="9.5.2" data-path="working-with-files-and-packages.html"><a href="working-with-files-and-packages.html#using-packages"><i class="fa fa-check"></i><b>9.5.2</b> Using Packages</a></li>
<li class="chapter" data-level="9.5.3" data-path="working-with-files-and-packages.html"><a href="working-with-files-and-packages.html#load-excel-data"><i class="fa fa-check"></i><b>9.5.3</b> Load Excel Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="factors-special-values-and-indexing.html"><a href="factors-special-values-and-indexing.html"><i class="fa fa-check"></i><b>10</b> Factors, Special Values, and Indexing</a>
<ul>
<li class="chapter" data-level="10.1" data-path="factors-special-values-and-indexing.html"><a href="factors-special-values-and-indexing.html#learning-objectives-3"><i class="fa fa-check"></i><b>10.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="10.2" data-path="factors-special-values-and-indexing.html"><a href="factors-special-values-and-indexing.html#factors"><i class="fa fa-check"></i><b>10.2</b> Factors</a></li>
<li class="chapter" data-level="10.3" data-path="factors-special-values-and-indexing.html"><a href="factors-special-values-and-indexing.html#special-values"><i class="fa fa-check"></i><b>10.3</b> Special Values</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="factors-special-values-and-indexing.html"><a href="factors-special-values-and-indexing.html#missing-values"><i class="fa fa-check"></i><b>10.3.1</b> Missing Values</a></li>
<li class="chapter" data-level="10.3.2" data-path="factors-special-values-and-indexing.html"><a href="factors-special-values-and-indexing.html#not-a-number"><i class="fa fa-check"></i><b>10.3.2</b> Not a Number</a></li>
<li class="chapter" data-level="10.3.3" data-path="factors-special-values-and-indexing.html"><a href="factors-special-values-and-indexing.html#null"><i class="fa fa-check"></i><b>10.3.3</b> Null</a></li>
<li class="chapter" data-level="10.3.4" data-path="factors-special-values-and-indexing.html"><a href="factors-special-values-and-indexing.html#infinity"><i class="fa fa-check"></i><b>10.3.4</b> Infinity</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="factors-special-values-and-indexing.html"><a href="factors-special-values-and-indexing.html#indexing"><i class="fa fa-check"></i><b>10.4</b> Indexing</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="factors-special-values-and-indexing.html"><a href="factors-special-values-and-indexing.html#all-elements"><i class="fa fa-check"></i><b>10.4.1</b> All Elements</a></li>
<li class="chapter" data-level="10.4.2" data-path="factors-special-values-and-indexing.html"><a href="factors-special-values-and-indexing.html#by-position"><i class="fa fa-check"></i><b>10.4.2</b> By Position</a></li>
<li class="chapter" data-level="10.4.3" data-path="factors-special-values-and-indexing.html"><a href="factors-special-values-and-indexing.html#by-name"><i class="fa fa-check"></i><b>10.4.3</b> By Name</a></li>
<li class="chapter" data-level="10.4.4" data-path="factors-special-values-and-indexing.html"><a href="factors-special-values-and-indexing.html#by-condition"><i class="fa fa-check"></i><b>10.4.4</b> By Condition</a></li>
<li class="chapter" data-level="10.4.5" data-path="factors-special-values-and-indexing.html"><a href="factors-special-values-and-indexing.html#logic"><i class="fa fa-check"></i><b>10.4.5</b> Logic</a></li>
<li class="chapter" data-level="10.4.6" data-path="factors-special-values-and-indexing.html"><a href="factors-special-values-and-indexing.html#indexing-lists"><i class="fa fa-check"></i><b>10.4.6</b> Indexing Lists</a></li>
<li class="chapter" data-level="10.4.7" data-path="factors-special-values-and-indexing.html"><a href="factors-special-values-and-indexing.html#indexing-data-frames"><i class="fa fa-check"></i><b>10.4.7</b> Indexing Data Frames</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html"><i class="fa fa-check"></i><b>11</b> Strings and Regular Expressions</a>
<ul>
<li class="chapter" data-level="11.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#printing-output"><i class="fa fa-check"></i><b>11.1</b> Printing Output</a></li>
<li class="chapter" data-level="11.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#escape-sequences"><i class="fa fa-check"></i><b>11.2</b> Escape Sequences</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#raw-strings"><i class="fa fa-check"></i><b>11.2.1</b> Raw Strings</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#character-encodings"><i class="fa fa-check"></i><b>11.3</b> Character Encodings</a></li>
<li class="chapter" data-level="11.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#the-tidyverse"><i class="fa fa-check"></i><b>11.4</b> The Tidyverse</a></li>
<li class="chapter" data-level="11.5" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#the-stringr-package"><i class="fa fa-check"></i><b>11.5</b> The stringr Package</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#splitting-strings"><i class="fa fa-check"></i><b>11.5.1</b> Splitting Strings</a></li>
<li class="chapter" data-level="11.5.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#replacing-parts-of-strings"><i class="fa fa-check"></i><b>11.5.2</b> Replacing Parts of Strings</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#regular-expressions"><i class="fa fa-check"></i><b>11.6</b> Regular Expressions</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#the-wildcard"><i class="fa fa-check"></i><b>11.6.1</b> The Wildcard</a></li>
<li class="chapter" data-level="11.6.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#escape-sequences-1"><i class="fa fa-check"></i><b>11.6.2</b> Escape Sequences</a></li>
<li class="chapter" data-level="11.6.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#anchors"><i class="fa fa-check"></i><b>11.6.3</b> Anchors</a></li>
<li class="chapter" data-level="11.6.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#character-classes"><i class="fa fa-check"></i><b>11.6.4</b> Character Classes</a></li>
<li class="chapter" data-level="11.6.5" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#quantifiers"><i class="fa fa-check"></i><b>11.6.5</b> Quantifiers</a></li>
<li class="chapter" data-level="11.6.6" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#groups"><i class="fa fa-check"></i><b>11.6.6</b> Groups</a></li>
<li class="chapter" data-level="11.6.7" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#extracting-matches"><i class="fa fa-check"></i><b>11.6.7</b> Extracting Matches</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>12</b> Data Structures</a>
<ul>
<li class="chapter" data-level="12.1" data-path="data-structures.html"><a href="data-structures.html#tabular-data"><i class="fa fa-check"></i><b>12.1</b> Tabular Data</a></li>
<li class="chapter" data-level="12.2" data-path="data-structures.html"><a href="data-structures.html#tree-document-data-structures"><i class="fa fa-check"></i><b>12.2</b> Tree / Document Data Structures</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="data-structures.html"><a href="data-structures.html#structuring-data-as-xml"><i class="fa fa-check"></i><b>12.2.1</b> Structuring Data as XML</a></li>
<li class="chapter" data-level="12.2.2" data-path="data-structures.html"><a href="data-structures.html#structuring-data-as-json"><i class="fa fa-check"></i><b>12.2.2</b> Structuring Data as JSON</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="check-for-equal-variances---these-are-close-enough.html"><a href="check-for-equal-variances---these-are-close-enough.html"><i class="fa fa-check"></i><b>13</b> check for equal variances - these are close enough</a>
<ul>
<li class="chapter" data-level="13.1" data-path="check-for-equal-variances---these-are-close-enough.html"><a href="check-for-equal-variances---these-are-close-enough.html#section"><i class="fa fa-check"></i><b>13.1</b> [1] 689.4729</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="check-for-equal-variances---these-are-close-enough.html"><a href="check-for-equal-variances---these-are-close-enough.html#hypothesis-tests-for-non-normal-data"><i class="fa fa-check"></i><b>13.1.1</b> Hypothesis tests for non-normal data</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="check-for-equal-variances---these-are-close-enough.html"><a href="check-for-equal-variances---these-are-close-enough.html#regression"><i class="fa fa-check"></i><b>13.2</b> Regression</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="check-for-equal-variances---these-are-close-enough.html"><a href="check-for-equal-variances---these-are-close-enough.html#fitting-a-regression-line"><i class="fa fa-check"></i><b>13.2.1</b> Fitting a regression line</a></li>
<li class="chapter" data-level="13.2.2" data-path="check-for-equal-variances---these-are-close-enough.html"><a href="check-for-equal-variances---these-are-close-enough.html#assumptions-and-diagnostics"><i class="fa fa-check"></i><b>13.2.2</b> Assumptions and diagnostics</a></li>
<li class="chapter" data-level="13.2.3" data-path="check-for-equal-variances---these-are-close-enough.html"><a href="check-for-equal-variances---these-are-close-enough.html#functions-for-inspecting-regression-fits"><i class="fa fa-check"></i><b>13.2.3</b> Functions for inspecting regression fits</a></li>
<li class="chapter" data-level="13.2.4" data-path="check-for-equal-variances---these-are-close-enough.html"><a href="check-for-equal-variances---these-are-close-enough.html#a-model-that-fails-diagnostics"><i class="fa fa-check"></i><b>13.2.4</b> A model that fails diagnostics</a></li>
<li class="chapter" data-level="13.2.5" data-path="check-for-equal-variances---these-are-close-enough.html"><a href="check-for-equal-variances---these-are-close-enough.html#predictions-and-variability"><i class="fa fa-check"></i><b>13.2.5</b> Predictions and variability</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="check-for-equal-variances---these-are-close-enough.html"><a href="check-for-equal-variances---these-are-close-enough.html#model-selection"><i class="fa fa-check"></i><b>13.3</b> Model selection</a></li>
<li class="chapter" data-level="13.4" data-path="check-for-equal-variances---these-are-close-enough.html"><a href="check-for-equal-variances---these-are-close-enough.html#cross-validation"><i class="fa fa-check"></i><b>13.4</b> Cross-validation</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="data-forensics-and-cleaning-structured-data.html"><a href="data-forensics-and-cleaning-structured-data.html"><i class="fa fa-check"></i><b>14</b> Data Forensics and Cleaning: Structured Data</a>
<ul>
<li class="chapter" data-level="14.1" data-path="data-forensics-and-cleaning-structured-data.html"><a href="data-forensics-and-cleaning-structured-data.html#introduction"><i class="fa fa-check"></i><b>14.1</b> Introduction</a></li>
<li class="chapter" data-level="14.2" data-path="data-forensics-and-cleaning-structured-data.html"><a href="data-forensics-and-cleaning-structured-data.html#tidy-data"><i class="fa fa-check"></i><b>14.2</b> Tidy Data</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="data-forensics-and-cleaning-structured-data.html"><a href="data-forensics-and-cleaning-structured-data.html#columns-into-rows"><i class="fa fa-check"></i><b>14.2.1</b> Columns into Rows</a></li>
<li class="chapter" data-level="14.2.2" data-path="data-forensics-and-cleaning-structured-data.html"><a href="data-forensics-and-cleaning-structured-data.html#rows-into-columns"><i class="fa fa-check"></i><b>14.2.2</b> Rows into Columns</a></li>
<li class="chapter" data-level="14.2.3" data-path="data-forensics-and-cleaning-structured-data.html"><a href="data-forensics-and-cleaning-structured-data.html#separating-values"><i class="fa fa-check"></i><b>14.2.3</b> Separating Values</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="data-forensics-and-cleaning-structured-data.html"><a href="data-forensics-and-cleaning-structured-data.html#data-types"><i class="fa fa-check"></i><b>14.3</b> Data Types</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="data-forensics-and-cleaning-structured-data.html"><a href="data-forensics-and-cleaning-structured-data.html#dates"><i class="fa fa-check"></i><b>14.3.1</b> Dates</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="data-forensics-and-cleaning-structured-data.html"><a href="data-forensics-and-cleaning-structured-data.html#special-values-1"><i class="fa fa-check"></i><b>14.4</b> Special Values</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="data-forensics-and-cleaning-structured-data.html"><a href="data-forensics-and-cleaning-structured-data.html#reasoning-about-missing-values"><i class="fa fa-check"></i><b>14.4.1</b> Reasoning about Missing Values</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="data-forensics-and-cleaning-structured-data.html"><a href="data-forensics-and-cleaning-structured-data.html#outliers"><i class="fa fa-check"></i><b>14.5</b> Outliers</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="data-forensics-and-cleaning-unstructured-data.html"><a href="data-forensics-and-cleaning-unstructured-data.html"><i class="fa fa-check"></i><b>15</b> Data Forensics and Cleaning: Unstructured Data</a>
<ul>
<li class="chapter" data-level="15.1" data-path="data-forensics-and-cleaning-unstructured-data.html"><a href="data-forensics-and-cleaning-unstructured-data.html#preliminaries"><i class="fa fa-check"></i><b>15.1</b> Preliminaries</a></li>
<li class="chapter" data-level="15.2" data-path="data-forensics-and-cleaning-unstructured-data.html"><a href="data-forensics-and-cleaning-unstructured-data.html#from-file-names-to-metadata"><i class="fa fa-check"></i><b>15.2</b> From File Names to Metadata</a></li>
<li class="chapter" data-level="15.3" data-path="data-forensics-and-cleaning-unstructured-data.html"><a href="data-forensics-and-cleaning-unstructured-data.html#loading-a-corpus"><i class="fa fa-check"></i><b>15.3</b> Loading a Corpus</a></li>
<li class="chapter" data-level="15.4" data-path="data-forensics-and-cleaning-unstructured-data.html"><a href="data-forensics-and-cleaning-unstructured-data.html#preprocessing"><i class="fa fa-check"></i><b>15.4</b> Preprocessing</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="data-forensics-and-cleaning-unstructured-data.html"><a href="data-forensics-and-cleaning-unstructured-data.html#tokenizing-and-bags-of-words"><i class="fa fa-check"></i><b>15.4.1</b> Tokenizing and Bags of Words</a></li>
<li class="chapter" data-level="15.4.2" data-path="data-forensics-and-cleaning-unstructured-data.html"><a href="data-forensics-and-cleaning-unstructured-data.html#text-normalization"><i class="fa fa-check"></i><b>15.4.2</b> Text Normalization</a></li>
<li class="chapter" data-level="15.4.3" data-path="data-forensics-and-cleaning-unstructured-data.html"><a href="data-forensics-and-cleaning-unstructured-data.html#stop-words"><i class="fa fa-check"></i><b>15.4.3</b> Stop Words</a></li>
<li class="chapter" data-level="15.4.4" data-path="data-forensics-and-cleaning-unstructured-data.html"><a href="data-forensics-and-cleaning-unstructured-data.html#tokenizers"><i class="fa fa-check"></i><b>15.4.4</b> Tokenizers</a></li>
<li class="chapter" data-level="15.4.5" data-path="data-forensics-and-cleaning-unstructured-data.html"><a href="data-forensics-and-cleaning-unstructured-data.html#document-chunking-and-n-grams"><i class="fa fa-check"></i><b>15.4.5</b> Document Chunking and N-grams</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="data-forensics-and-cleaning-unstructured-data.html"><a href="data-forensics-and-cleaning-unstructured-data.html#counting-terms"><i class="fa fa-check"></i><b>15.5</b> Counting Terms</a>
<ul>
<li class="chapter" data-level="15.5.1" data-path="data-forensics-and-cleaning-unstructured-data.html"><a href="data-forensics-and-cleaning-unstructured-data.html#term-frequency"><i class="fa fa-check"></i><b>15.5.1</b> Term Frequency</a></li>
<li class="chapter" data-level="15.5.2" data-path="data-forensics-and-cleaning-unstructured-data.html"><a href="data-forensics-and-cleaning-unstructured-data.html#plotting-term-frequency"><i class="fa fa-check"></i><b>15.5.2</b> Plotting Term Frequency</a></li>
<li class="chapter" data-level="15.5.3" data-path="data-forensics-and-cleaning-unstructured-data.html"><a href="data-forensics-and-cleaning-unstructured-data.html#comparing-term-frequencies-across-documents"><i class="fa fa-check"></i><b>15.5.3</b> Comparing Term Frequencies Across Documents</a></li>
</ul></li>
<li class="chapter" data-level="15.6" data-path="data-forensics-and-cleaning-unstructured-data.html"><a href="data-forensics-and-cleaning-unstructured-data.html#text-mining-pipepline"><i class="fa fa-check"></i><b>15.6</b> Text Mining Pipepline</a></li>
<li class="chapter" data-level="15.7" data-path="data-forensics-and-cleaning-unstructured-data.html"><a href="data-forensics-and-cleaning-unstructured-data.html#document-term-matrix"><i class="fa fa-check"></i><b>15.7</b> Document Term Matrix</a></li>
<li class="chapter" data-level="15.8" data-path="data-forensics-and-cleaning-unstructured-data.html"><a href="data-forensics-and-cleaning-unstructured-data.html#corpus-analytics"><i class="fa fa-check"></i><b>15.8</b> Corpus Analytics</a>
<ul>
<li class="chapter" data-level="15.8.1" data-path="data-forensics-and-cleaning-unstructured-data.html"><a href="data-forensics-and-cleaning-unstructured-data.html#corpus-term-counts"><i class="fa fa-check"></i><b>15.8.1</b> Corpus Term Counts</a></li>
<li class="chapter" data-level="15.8.2" data-path="data-forensics-and-cleaning-unstructured-data.html"><a href="data-forensics-and-cleaning-unstructured-data.html#tfidf-scores"><i class="fa fa-check"></i><b>15.8.2</b> tf–idf Scores</a></li>
<li class="chapter" data-level="15.8.3" data-path="data-forensics-and-cleaning-unstructured-data.html"><a href="data-forensics-and-cleaning-unstructured-data.html#unique-terms-in-a-document"><i class="fa fa-check"></i><b>15.8.3</b> Unique Terms in a Document</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html"><i class="fa fa-check"></i><b>16</b> Data Forensics and Cleaning: Geospatial Data</a>
<ul>
<li class="chapter" data-level="16.1" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#learning-objectives-4"><i class="fa fa-check"></i><b>16.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="16.2" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#what-is-geospatial-data"><i class="fa fa-check"></i><b>16.2</b> What is Geospatial Data?</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#attributes"><i class="fa fa-check"></i><b>16.2.1</b> Attributes</a></li>
<li class="chapter" data-level="16.2.2" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#coordinate-reference-system"><i class="fa fa-check"></i><b>16.2.2</b> Coordinate Reference System</a></li>
<li class="chapter" data-level="16.2.3" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#coordinates"><i class="fa fa-check"></i><b>16.2.3</b> Coordinates</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#geospatial-data-models"><i class="fa fa-check"></i><b>16.3</b> Geospatial Data Models</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#vector-data"><i class="fa fa-check"></i><b>16.3.1</b> Vector Data</a></li>
<li class="chapter" data-level="16.3.2" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#raster-data"><i class="fa fa-check"></i><b>16.3.2</b> Raster Data</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#data-structures-applied-to-geospatial-data"><i class="fa fa-check"></i><b>16.4</b> Data Structures Applied to Geospatial Data</a></li>
<li class="chapter" data-level="16.5" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#cleaning-geospatial-data"><i class="fa fa-check"></i><b>16.5</b> Cleaning Geospatial Data</a>
<ul>
<li class="chapter" data-level="16.5.1" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#example-data"><i class="fa fa-check"></i><b>16.5.1</b> Example Data</a></li>
<li class="chapter" data-level="16.5.2" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#making-location-data-usable"><i class="fa fa-check"></i><b>16.5.2</b> Making Location Data Usable</a></li>
<li class="chapter" data-level="16.5.3" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#cleaning-location-data"><i class="fa fa-check"></i><b>16.5.3</b> Cleaning Location Data</a></li>
<li class="chapter" data-level="16.5.4" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#cleaning-attribute-data"><i class="fa fa-check"></i><b>16.5.4</b> Cleaning Attribute Data</a></li>
<li class="chapter" data-level="16.5.5" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#checking-coordinate-reference-systems"><i class="fa fa-check"></i><b>16.5.5</b> Checking Coordinate Reference Systems</a></li>
</ul></li>
<li class="chapter" data-level="16.6" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#conclusions"><i class="fa fa-check"></i><b>16.6</b> Conclusions</a></li>
<li class="chapter" data-level="16.7" data-path="data-forensics-and-cleaning-geospatial-data.html"><a href="data-forensics-and-cleaning-geospatial-data.html#optional-further-reading"><i class="fa fa-check"></i><b>16.7</b> Optional Further Reading</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>17</b> References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Adventures in Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-forensics-and-cleaning-structured-data" class="section level1" number="14">
<h1><span class="header-section-number">14</span> Data Forensics and Cleaning: Structured Data</h1>
<p>After this lesson, you should be able to:</p>
<ul>
<li>Cleaning:
<ul>
<li>Explain what it means for a data set to be “tidy”</li>
<li>Pivot columns in a data set to make it tidy</li>
<li>Separate values in a column that contains multiple values per cell</li>
<li>Convert columns to appropriate data types</li>
</ul></li>
<li>Forensics:
<ul>
<li>Locate and count missing values in a data set</li>
<li>Explain what it means for a value to be an “outlier”</li>
<li>Locate and count outliers in a data set</li>
</ul></li>
</ul>
<div id="introduction" class="section level2" number="14.1">
<h2><span class="header-section-number">14.1</span> Introduction</h2>
<p>This lesson focuses on how to identify, diagnose, and fix potential problems in
tabular data sets. There are several different kinds of problems that can
arise:</p>
<ul>
<li>Structural (data are transposed or rotated)</li>
<li>Data types (some columns have the wrong types)</li>
<li>Missing values</li>
<li>Outliers (extreme values)</li>
</ul>
<p>We’ll see examples of each of these.</p>
</div>
<div id="tidy-data" class="section level2" number="14.2">
<h2><span class="header-section-number">14.2</span> Tidy Data</h2>
<p>The Tidyverse is so named because many functions in Tidyverse packages require
data frames that are in <em>tidy</em> form. Before we see the requirements for a data
set to be tidy, we need to define or review some terminology from statistics.</p>
<p>A <em>feature</em> (also called a <em>covariate</em> or a <em>variable</em>) is measurement of
something, usually across multiple subjects. For example, we might decide to
measure the heights of everyone in the class. Each person in the class is a
subject, and the height measurement is a feature. Features don’t have to be
quantitative. If we also asked each person their favorite color, then favorite
color would be another feature in our data set. Features are usually, but not
always, the columns in a tabular data set.</p>
<p>An <em>observation</em> is a set of features measured for a single subject or at a
single time. So in the preceding example, the combined height and favorite
color measurement for one student is one observation. Observations are usually,
but not always, the rows in a tabular data set.</p>
<p>Now we can define what it means to be tidy. A tabular data set is tidy if and
only if:</p>
<ol style="list-style-type: decimal">
<li>Each observation has its own row.</li>
<li>Each feature has its own column.</li>
<li>Each value has its own cell.</li>
</ol>
<p>These rules ensure that all of the values are visually organized and are easy
to access with R’s built-in indexing operations. For instance, the <code>$</code> operator
gets a column, and in a tidy data set, columns are features. The rules also
reflect the way statisticians traditionally arrange tabular data sets.</p>
<p>Let’s look at some examples of tidy and untidy data sets. The <strong>tidyr</strong> package
provides examples, and as we’ll see later, it also provides functions to make
untidy data sets tidy. As usual, we first need to load the package:</p>
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb487-1"><a href="data-forensics-and-cleaning-structured-data.html#cb487-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;tidyr&quot;)</span></span>
<span id="cb487-2"><a href="data-forensics-and-cleaning-structured-data.html#cb487-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span></code></pre></div>
<p>Let’s start with an example of tidy data. This data set is included in the
<strong>tidyr</strong> package and records the number of tuberculosis cases across several
different countries and years:</p>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="data-forensics-and-cleaning-structured-data.html#cb488-1" aria-hidden="true" tabindex="-1"></a>table1</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   country      year  cases population
##   &lt;chr&gt;       &lt;int&gt;  &lt;int&gt;      &lt;int&gt;
## 1 Afghanistan  1999    745   19987071
## 2 Afghanistan  2000   2666   20595360
## 3 Brazil       1999  37737  172006362
## 4 Brazil       2000  80488  174504898
## 5 China        1999 212258 1272915272
## 6 China        2000 213766 1280428583</code></pre>
<p>When you first look at a data set, think about what the observations are and
what the features are. If the data set comes with documentation, it may help
you figure this out. Since this data set is a tidy data set, we already know
each row is an observation and each column is a feature.</p>
<p>Features in a data set tend to take one of two roles. Some features are
<em>identifiers</em> that describe the observed subject. These are usually not what
the researcher collecting the data is trying to find out. For example, in the
tuberculosis data set, the <code>country</code> and <code>year</code> columns are identifiers.</p>
<p>Other features are <em>measurements</em>. These are usually the reason the researcher
collected the data. For the tuberculosis data set, the <code>cases</code> and <code>population</code>
columns are measurements.</p>
<p>Thinking about whether features are identifiers or measurements can be helpful
when you need to use <strong>tidyr</strong> to rearrange a data set.</p>
<div id="columns-into-rows" class="section level3" number="14.2.1">
<h3><span class="header-section-number">14.2.1</span> Columns into Rows</h3>
<p>Tidy data rule 1 says each observation must have its own row. Here’s a table
that breaks rule 1:</p>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="data-forensics-and-cleaning-structured-data.html#cb490-1" aria-hidden="true" tabindex="-1"></a>table4a</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   country     `1999` `2000`
## * &lt;chr&gt;        &lt;int&gt;  &lt;int&gt;
## 1 Afghanistan    745   2666
## 2 Brazil       37737  80488
## 3 China       212258 213766</code></pre>
<p>All of the numbers measure the same thing: cases. To make the data tidy, we
must rotate the <code>1999</code> and <code>2000</code> column names into rows, one for each value in
the columns. The new columns are <code>year</code> and <code>cases</code>.</p>
<p>This process means less columns (generally) and more rows, so the data set
becomes longer.</p>
<p>We can use the <code>pivot_longer</code> function to rotate columns into rows. We need to
specify:</p>
<ul>
<li>Columns to rotate as <code>cols</code>.</li>
<li>Name(s) of new identifier column(s) as <code>names_to</code>.</li>
<li>Name(s) of new measuerment column(s) as <code>values_to</code>.</li>
</ul>
<p>Here’s the code:</p>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="data-forensics-and-cleaning-structured-data.html#cb492-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pivot_longer</span>(table4a, <span class="sc">-</span>country, <span class="at">names_to =</span> <span class="st">&quot;year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;cases&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   country     year   cases
##   &lt;chr&gt;       &lt;chr&gt;  &lt;int&gt;
## 1 Afghanistan 1999     745
## 2 Afghanistan 2000    2666
## 3 Brazil      1999   37737
## 4 Brazil      2000   80488
## 5 China       1999  212258
## 6 China       2000  213766</code></pre>
<div id="how-to-pivot-longer-without-tidyr" class="section level4" number="14.2.1.1">
<h4><span class="header-section-number">14.2.1.1</span> How to Pivot Longer without <strong>tidyr</strong></h4>
<p>You also can do this without <strong>tidyr</strong>:</p>
<ol style="list-style-type: decimal">
<li>Subset columns to separate <code>1999</code> and <code>2000</code> into two data frames.</li>
<li>Add a <code>year</code> column to each.</li>
<li>Rename the <code>1999</code> and <code>2000</code> columns to <code>cases</code>.</li>
<li>Stack the two data frames with <code>rbind</code>.</li>
</ol>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="data-forensics-and-cleaning-structured-data.html#cb494-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1</span></span>
<span id="cb494-2"><a href="data-forensics-and-cleaning-structured-data.html#cb494-2" aria-hidden="true" tabindex="-1"></a>df99 <span class="ot">=</span> table4a[<span class="sc">-</span><span class="dv">3</span>]</span>
<span id="cb494-3"><a href="data-forensics-and-cleaning-structured-data.html#cb494-3" aria-hidden="true" tabindex="-1"></a>df00 <span class="ot">=</span> table4a[<span class="sc">-</span><span class="dv">2</span>]</span>
<span id="cb494-4"><a href="data-forensics-and-cleaning-structured-data.html#cb494-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb494-5"><a href="data-forensics-and-cleaning-structured-data.html#cb494-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2</span></span>
<span id="cb494-6"><a href="data-forensics-and-cleaning-structured-data.html#cb494-6" aria-hidden="true" tabindex="-1"></a>df99<span class="sc">$</span>year <span class="ot">=</span> <span class="st">&quot;1999&quot;</span></span>
<span id="cb494-7"><a href="data-forensics-and-cleaning-structured-data.html#cb494-7" aria-hidden="true" tabindex="-1"></a>df00<span class="sc">$</span>year <span class="ot">=</span> <span class="st">&quot;2000&quot;</span></span>
<span id="cb494-8"><a href="data-forensics-and-cleaning-structured-data.html#cb494-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb494-9"><a href="data-forensics-and-cleaning-structured-data.html#cb494-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3</span></span>
<span id="cb494-10"><a href="data-forensics-and-cleaning-structured-data.html#cb494-10" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df99)[<span class="dv">2</span>] <span class="ot">=</span> <span class="st">&quot;cases&quot;</span></span>
<span id="cb494-11"><a href="data-forensics-and-cleaning-structured-data.html#cb494-11" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df00)[<span class="dv">2</span>] <span class="ot">=</span> <span class="st">&quot;cases&quot;</span></span>
<span id="cb494-12"><a href="data-forensics-and-cleaning-structured-data.html#cb494-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb494-13"><a href="data-forensics-and-cleaning-structured-data.html#cb494-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4</span></span>
<span id="cb494-14"><a href="data-forensics-and-cleaning-structured-data.html#cb494-14" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(df99, df00)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   country      cases year 
##   &lt;chr&gt;        &lt;int&gt; &lt;chr&gt;
## 1 Afghanistan    745 1999 
## 2 Brazil       37737 1999 
## 3 China       212258 1999 
## 4 Afghanistan   2666 2000 
## 5 Brazil       80488 2000 
## 6 China       213766 2000</code></pre>
</div>
</div>
<div id="rows-into-columns" class="section level3" number="14.2.2">
<h3><span class="header-section-number">14.2.2</span> Rows into Columns</h3>
<p>Tidy data rule 2 says each feature must have its own column. Let’s look at a
table that breaks rule 2:</p>
<div class="sourceCode" id="cb496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb496-1"><a href="data-forensics-and-cleaning-structured-data.html#cb496-1" aria-hidden="true" tabindex="-1"></a>table2</span></code></pre></div>
<pre><code>## # A tibble: 12 × 4
##    country      year type            count
##    &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;           &lt;int&gt;
##  1 Afghanistan  1999 cases             745
##  2 Afghanistan  1999 population   19987071
##  3 Afghanistan  2000 cases            2666
##  4 Afghanistan  2000 population   20595360
##  5 Brazil       1999 cases           37737
##  6 Brazil       1999 population  172006362
##  7 Brazil       2000 cases           80488
##  8 Brazil       2000 population  174504898
##  9 China        1999 cases          212258
## 10 China        1999 population 1272915272
## 11 China        2000 cases          213766
## 12 China        2000 population 1280428583</code></pre>
<p>Here the <code>count</code> column contains two different features: cases and population.
To make the data tidy, we must rotate the <code>count</code> values into columns, one for
each <code>type</code> value. New columns are <code>cases</code> and <code>population</code>.</p>
<p>This process means less rows and more columns, so the data set becomes wider.</p>
<p>We can use <code>pivot_wider</code> to rotate rows into columns. We need to specify:</p>
<ul>
<li>Column names to rotate as <code>names_from</code>.</li>
<li>Measurements to rotate as <code>values_from</code>.</li>
</ul>
<p>Here’s the code:</p>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="data-forensics-and-cleaning-structured-data.html#cb498-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pivot_wider</span>(table2, <span class="at">names_from =</span> type, <span class="at">values_from =</span> count)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   country      year  cases population
##   &lt;chr&gt;       &lt;int&gt;  &lt;int&gt;      &lt;int&gt;
## 1 Afghanistan  1999    745   19987071
## 2 Afghanistan  2000   2666   20595360
## 3 Brazil       1999  37737  172006362
## 4 Brazil       2000  80488  174504898
## 5 China        1999 212258 1272915272
## 6 China        2000 213766 1280428583</code></pre>
<div id="how-to-pivot-wider-without-tidyr" class="section level4" number="14.2.2.1">
<h4><span class="header-section-number">14.2.2.1</span> How to Pivot Wider without <strong>tidyr</strong></h4>
<p>You can also do this without <strong>tidyr</strong>:</p>
<ol style="list-style-type: decimal">
<li>Subset rows to separate <code>cases</code> and <code>population</code> values.</li>
<li>Remove the <code>type</code> column from each.</li>
<li>Rename the <code>count</code> column to <code>cases</code> and <code>population</code>.</li>
<li>Merge the two subsets by matching <code>country</code> and <code>year</code>.</li>
</ol>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="data-forensics-and-cleaning-structured-data.html#cb500-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1</span></span>
<span id="cb500-2"><a href="data-forensics-and-cleaning-structured-data.html#cb500-2" aria-hidden="true" tabindex="-1"></a>cases <span class="ot">=</span> table2[table2<span class="sc">$</span>type <span class="sc">==</span> <span class="st">&quot;cases&quot;</span>, ]</span>
<span id="cb500-3"><a href="data-forensics-and-cleaning-structured-data.html#cb500-3" aria-hidden="true" tabindex="-1"></a>pop <span class="ot">=</span> table2[table2<span class="sc">$</span>type <span class="sc">==</span> <span class="st">&quot;population&quot;</span>, ]</span>
<span id="cb500-4"><a href="data-forensics-and-cleaning-structured-data.html#cb500-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb500-5"><a href="data-forensics-and-cleaning-structured-data.html#cb500-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2</span></span>
<span id="cb500-6"><a href="data-forensics-and-cleaning-structured-data.html#cb500-6" aria-hidden="true" tabindex="-1"></a>cases <span class="ot">=</span> cases[<span class="sc">-</span><span class="dv">3</span>]</span>
<span id="cb500-7"><a href="data-forensics-and-cleaning-structured-data.html#cb500-7" aria-hidden="true" tabindex="-1"></a>pop <span class="ot">=</span> pop[<span class="sc">-</span><span class="dv">3</span>]</span>
<span id="cb500-8"><a href="data-forensics-and-cleaning-structured-data.html#cb500-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb500-9"><a href="data-forensics-and-cleaning-structured-data.html#cb500-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3</span></span>
<span id="cb500-10"><a href="data-forensics-and-cleaning-structured-data.html#cb500-10" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(cases)[<span class="dv">3</span>] <span class="ot">=</span> <span class="st">&quot;cases&quot;</span></span>
<span id="cb500-11"><a href="data-forensics-and-cleaning-structured-data.html#cb500-11" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(pop)[<span class="dv">3</span>] <span class="ot">=</span> <span class="st">&quot;population&quot;</span></span>
<span id="cb500-12"><a href="data-forensics-and-cleaning-structured-data.html#cb500-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb500-13"><a href="data-forensics-and-cleaning-structured-data.html#cb500-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4</span></span>
<span id="cb500-14"><a href="data-forensics-and-cleaning-structured-data.html#cb500-14" aria-hidden="true" tabindex="-1"></a>tidy <span class="ot">=</span> <span class="fu">cbind</span>(cases, pop[<span class="dv">3</span>])</span></code></pre></div>
<p>This code uses the <code>cbind</code> function to merge the two subsets, but it would be
better to use the <code>merge</code> function. The <code>cbind</code> function does not use
identifier columns to check that the rows in each subset are from the same
observations.</p>
<p>Run <code>vignette("pivot")</code> for more examples of how to use <strong>tidyr</strong>.</p>
</div>
</div>
<div id="separating-values" class="section level3" number="14.2.3">
<h3><span class="header-section-number">14.2.3</span> Separating Values</h3>
<p>Tidy data rule 3 says each value must have its own cell. Here’s a table that
breaks rule 3:</p>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="data-forensics-and-cleaning-structured-data.html#cb501-1" aria-hidden="true" tabindex="-1"></a>table3</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   country      year rate             
## * &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;            
## 1 Afghanistan  1999 745/19987071     
## 2 Afghanistan  2000 2666/20595360    
## 3 Brazil       1999 37737/172006362  
## 4 Brazil       2000 80488/174504898  
## 5 China        1999 212258/1272915272
## 6 China        2000 213766/1280428583</code></pre>
<p>Cells in the <code>rate</code> column contain two values: cases and population. These are
two different features, so to make the data set tidy, we need to separate them
into two different columns.</p>
<p>So how can we separate the <code>rate</code> column? The rate column is a character vector
(you can check this with <code>str(table3)</code>), so we can use the string processing
functions in the <strong>stringr</strong> package. In particular, we can use the
<code>str_split_fixed</code> function:</p>
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb503-1"><a href="data-forensics-and-cleaning-structured-data.html#cb503-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb503-2"><a href="data-forensics-and-cleaning-structured-data.html#cb503-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb503-3"><a href="data-forensics-and-cleaning-structured-data.html#cb503-3" aria-hidden="true" tabindex="-1"></a>columns <span class="ot">=</span> <span class="fu">str_split_fixed</span>(table3<span class="sc">$</span>rate, <span class="fu">fixed</span>(<span class="st">&quot;/&quot;</span>), <span class="dv">2</span>)</span></code></pre></div>
<p>Now we have a character matrix where the values are in separate columns. Now we
need to combine these with the original data frame. There are several ways to
approach this, but to be safe, let’s make a new data frame rather than
overwrite the original. First we make a copy of the original:</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="data-forensics-and-cleaning-structured-data.html#cb504-1" aria-hidden="true" tabindex="-1"></a>tidy_tb <span class="ot">=</span> table3</span></code></pre></div>
<p>Next, we need to assign each column in the character matrix to a column in the
<code>tidy_tb</code> data frame. Since the columns contain numbers, we can also use the
<code>as.numeric</code> function to convert them to the correct data type:</p>
<div class="sourceCode" id="cb505"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb505-1"><a href="data-forensics-and-cleaning-structured-data.html#cb505-1" aria-hidden="true" tabindex="-1"></a>tidy_tb<span class="sc">$</span>cases <span class="ot">=</span> <span class="fu">as.numeric</span>(columns[, <span class="dv">1</span>])</span>
<span id="cb505-2"><a href="data-forensics-and-cleaning-structured-data.html#cb505-2" aria-hidden="true" tabindex="-1"></a>tidy_tb<span class="sc">$</span>population <span class="ot">=</span> <span class="fu">as.numeric</span>(columns[, <span class="dv">2</span>])</span></code></pre></div>
<p>Extracting values, converting to appropriate data types, and then combining
everything into a single data frame is an extremely common pattern in data
science.</p>
<p>Using <strong>stringr</strong> functions is the most general way to separate out values in a
column, but the <strong>tidyr</strong> package also provides a function <code>separate</code>
specifically for the case we just worked through. Either package is appropriate
for solving this problem.</p>
</div>
</div>
<div id="data-types" class="section level2" number="14.3">
<h2><span class="header-section-number">14.3</span> Data Types</h2>
<p>Another problem that can arise with a data set is the data types of the
columns. Recall that R’s most common data types are:</p>
<ul>
<li>character</li>
<li>complex</li>
<li>numeric</li>
<li>integer</li>
<li>logical</li>
</ul>
<p>For each of these data types, there’s a corresponding <code>as.</code> function to convert
to that data type. For instance, <code>as.character</code> converts an object to a string:</p>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="data-forensics-and-cleaning-structured-data.html#cb506-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fl">3.1</span></span>
<span id="cb506-2"><a href="data-forensics-and-cleaning-structured-data.html#cb506-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="data-forensics-and-cleaning-structured-data.html#cb508-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">as.character</span>(x)</span>
<span id="cb508-2"><a href="data-forensics-and-cleaning-structured-data.html#cb508-2" aria-hidden="true" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1] &quot;3.1&quot;</code></pre>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="data-forensics-and-cleaning-structured-data.html#cb510-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(y)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>It’s also a good idea to convert categorical columns into factors with the
<code>factor</code> function, and to convert columns of dates into dates (more about this
in the next section).</p>
<p>Let’s look at some examples using a data set collected from the classified
advertisements website Craigslist. The data set contains information from ads
for rentals in the Sacramento area. First we need to load the data set:</p>
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb512-1"><a href="data-forensics-and-cleaning-structured-data.html#cb512-1" aria-hidden="true" tabindex="-1"></a>cl <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/cl_rentals.csv&quot;</span>)</span></code></pre></div>
<p>Now we can use the <code>str</code> function to check the classes of the columns:</p>
<div class="sourceCode" id="cb513"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb513-1"><a href="data-forensics-and-cleaning-structured-data.html#cb513-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(cl)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    2987 obs. of  20 variables:
##  $ title       : chr  &quot;$1,125 / 1br - 550ft2 - 1Bedroom Prime Location -2520 S Limited Access/Gated $1125 Avail Now (2520 S St)&quot; &quot;$1,449 / 1br - 680ft2 - 1x1 with washer &amp; dryer in unit! Move in ready! (The Phoenix/Sacramento/Folsom/SF)&quot; &quot;$1,449 / 1br - 680ft2 - 1x1 with washer &amp; dryer in unit! Move in ready! (The Phoenix/Sacramento/Folsom/SF)&quot; &quot;$1,479 / 1br - 680ft2 - 1x1 with washer &amp; dryer in unit! Move in ready! (The Phoenix/Sacramento/Folsom/SF)&quot; ...
##  $ text        : chr  &quot;QR Code Link to This Post\n            \n        \n* SEE MY OTHER MIDTOWN 1 bedroom apts-text for web site\n*An&quot;| __truncated__ &quot;QR Code Link to This Post\n            \n        \n Lease our 1x1 Apartment with Che starting at $1449+    Pric&quot;| __truncated__ &quot;QR Code Link to This Post\n            \n        \n Lease our 1x1 Apartment with Che starting at $1449+    Pric&quot;| __truncated__ &quot;QR Code Link to This Post\n            \n        \n Lease our 1x1 Apartment with Che starting at $1479+    Pric&quot;| __truncated__ ...
##  $ latitude    : num  38.6 38.6 38.6 38.6 38.6 ...
##  $ longitude   : num  -121 -121 -121 -121 -121 ...
##  $ city        : chr  &quot;2520 S St&quot; &quot;The Phoenix/Sacramento/Folsom/SF&quot; &quot;The Phoenix/Sacramento/Folsom/SF&quot; &quot;The Phoenix/Sacramento/Folsom/SF&quot; ...
##  $ date_posted : chr  &quot;2021-02-04 15:03:12&quot; &quot;2021-03-02 12:41:17&quot; &quot;2021-03-02 13:26:17&quot; &quot;2021-03-03 10:02:05&quot; ...
##  $ date_updated: chr  &quot;2021-03-03 08:41:39&quot; NA NA NA ...
##  $ price       : int  1125 1449 1449 1479 1414 1441 1615 1660 1877 1611 ...
##  $ deleted     : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ sqft        : int  550 680 680 680 680 680 816 816 916 916 ...
##  $ bedrooms    : int  1 1 1 1 1 1 2 2 2 2 ...
##  $ bathrooms   : num  1 1 1 1 1 1 1 1 2 2 ...
##  $ pets        : chr  NA &quot;both&quot; &quot;both&quot; &quot;both&quot; ...
##  $ laundry     : chr  &quot;shared&quot; &quot;in-unit&quot; &quot;in-unit&quot; &quot;in-unit&quot; ...
##  $ parking     : chr  &quot;off-street&quot; &quot;covered&quot; &quot;covered&quot; &quot;covered&quot; ...
##  $ craigslist  : chr  &quot;sacramento&quot; &quot;sacramento&quot; &quot;sacramento&quot; &quot;sacramento&quot; ...
##  $ shp_place   : chr  &quot;Sacramento&quot; &quot;Sacramento&quot; &quot;Sacramento&quot; &quot;Sacramento&quot; ...
##  $ shp_city    : chr  &quot;Sacramento&quot; &quot;Sacramento&quot; &quot;Sacramento&quot; &quot;Sacramento&quot; ...
##  $ shp_state   : chr  &quot;CA&quot; &quot;CA&quot; &quot;CA&quot; &quot;CA&quot; ...
##  $ shp_county  : chr  &quot;Sacramento&quot; &quot;Sacramento&quot; &quot;Sacramento&quot; &quot;Sacramento&quot; ...</code></pre>
<p>Some of the columns have the wrong types. For instancce, the <code>pets</code>, <code>laundry</code>,
and <code>parking</code> columns all contain categorical data, so they should be factors.
Let’s convert these:</p>
<div class="sourceCode" id="cb515"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb515-1"><a href="data-forensics-and-cleaning-structured-data.html#cb515-1" aria-hidden="true" tabindex="-1"></a>cl<span class="sc">$</span>pets <span class="ot">=</span> <span class="fu">factor</span>(cl<span class="sc">$</span>pets)</span>
<span id="cb515-2"><a href="data-forensics-and-cleaning-structured-data.html#cb515-2" aria-hidden="true" tabindex="-1"></a>cl<span class="sc">$</span>laundry <span class="ot">=</span> <span class="fu">factor</span>(cl<span class="sc">$</span>laundry)</span>
<span id="cb515-3"><a href="data-forensics-and-cleaning-structured-data.html#cb515-3" aria-hidden="true" tabindex="-1"></a>cl<span class="sc">$</span>parking <span class="ot">=</span> <span class="fu">factor</span>(cl<span class="sc">$</span>parking)</span></code></pre></div>
<p>There’s another way we could’ve done this that uses only two lines of code, no
matter how many columns there are:</p>
<div class="sourceCode" id="cb516"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb516-1"><a href="data-forensics-and-cleaning-structured-data.html#cb516-1" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;pets&quot;</span>, <span class="st">&quot;laundry&quot;</span>, <span class="st">&quot;parking&quot;</span>)</span>
<span id="cb516-2"><a href="data-forensics-and-cleaning-structured-data.html#cb516-2" aria-hidden="true" tabindex="-1"></a>cl[cols] <span class="ot">=</span> <span class="fu">lapply</span>(cl[cols], factor)</span></code></pre></div>
<p>You can use whichever approach is more convenient and makes more sense to you.
If there were other columns to convert, we’d go through the same steps with the
appropriate conversion function.</p>
<p>The <code>read.csv</code> function does a good job at identifying columns of numbers, so
it’s rarely necessary to convert columns of numbers manually. However, you may
have to do this for data you got some other way (rather than loading a file).
For instance, it’s common to make these conversions when scraping data from the
web.</p>
<div id="dates" class="section level3" number="14.3.1">
<h3><span class="header-section-number">14.3.1</span> Dates</h3>
<p>The <code>as.Date</code> function converts times and dates to R’s <code>Date</code> class. This is
data type allows us to do computations on dates, such as sorting by date or
finding the number of days between two dates.</p>
<p>How does <code>as.Date</code> work? We can use it to convert just about any date. The
syntax is:</p>
<pre><code>as.Date(x, format)</code></pre>
<p>The parameter <code>x</code> is a string to convert to a date. The parameter <code>format</code> is a
string that explains how the date is formatted. In the format string, a percent
sign <code>%</code> followed by a character is called a specification and has special
meaning. The most useful are:</p>
<table>
<thead>
<tr class="header">
<th>Specification</th>
<th>Description</th>
<th>January 29, 2015</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>%Y</td>
<td>4-digit year</td>
<td>2015</td>
</tr>
<tr class="even">
<td>%y</td>
<td>2-digit year</td>
<td>15</td>
</tr>
<tr class="odd">
<td>%m</td>
<td>2-digit month</td>
<td>01</td>
</tr>
<tr class="even">
<td>%B</td>
<td>full month name</td>
<td>January</td>
</tr>
<tr class="odd">
<td>%b</td>
<td>short month name</td>
<td>Jan</td>
</tr>
<tr class="even">
<td>%d</td>
<td>day of month</td>
<td>29</td>
</tr>
<tr class="odd">
<td>%%</td>
<td>literal %</td>
<td>%</td>
</tr>
</tbody>
</table>
<p>You can find a complete list in <code>?strptime</code>.</p>
<p>Let’s look at some examples:</p>
<div class="sourceCode" id="cb518"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb518-1"><a href="data-forensics-and-cleaning-structured-data.html#cb518-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.Date</span>(<span class="st">&quot;January 29, 2015&quot;</span>, <span class="st">&quot;%B %d, %Y&quot;</span>)</span>
<span id="cb518-2"><a href="data-forensics-and-cleaning-structured-data.html#cb518-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb518-3"><a href="data-forensics-and-cleaning-structured-data.html#cb518-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as.Date</span>(<span class="st">&quot;01292015&quot;</span>, <span class="st">&quot;%m%d%Y&quot;</span>)</span>
<span id="cb518-4"><a href="data-forensics-and-cleaning-structured-data.html#cb518-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb518-5"><a href="data-forensics-and-cleaning-structured-data.html#cb518-5" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Dec 13, 98&quot;</span>, <span class="st">&quot;Dec 12, 99&quot;</span>, <span class="st">&quot;Jan 1, 16&quot;</span>)</span>
<span id="cb518-6"><a href="data-forensics-and-cleaning-structured-data.html#cb518-6" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x)</span>
<span id="cb518-7"><a href="data-forensics-and-cleaning-structured-data.html#cb518-7" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">as.Date</span>(x, <span class="st">&quot;%b %d, %y&quot;</span>)</span>
<span id="cb518-8"><a href="data-forensics-and-cleaning-structured-data.html#cb518-8" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(y)</span>
<span id="cb518-9"><a href="data-forensics-and-cleaning-structured-data.html#cb518-9" aria-hidden="true" tabindex="-1"></a>y</span>
<span id="cb518-10"><a href="data-forensics-and-cleaning-structured-data.html#cb518-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb518-11"><a href="data-forensics-and-cleaning-structured-data.html#cb518-11" aria-hidden="true" tabindex="-1"></a><span class="co"># You can do arithmetic on dates.</span></span>
<span id="cb518-12"><a href="data-forensics-and-cleaning-structured-data.html#cb518-12" aria-hidden="true" tabindex="-1"></a>y[<span class="dv">2</span>] <span class="sc">-</span> y[<span class="dv">1</span>]</span></code></pre></div>
<p>Now let’s convert the <code>date_posted</code> column in the Craigslist data. It’s always
a good idea to test your format string before saving the results back into the
data frame:</p>
<div class="sourceCode" id="cb519"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb519-1"><a href="data-forensics-and-cleaning-structured-data.html#cb519-1" aria-hidden="true" tabindex="-1"></a>dates <span class="ot">=</span> <span class="fu">as.Date</span>(cl<span class="sc">$</span>date_posted, <span class="st">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)</span>
<span id="cb519-2"><a href="data-forensics-and-cleaning-structured-data.html#cb519-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dates)</span></code></pre></div>
<pre><code>## [1] &quot;2021-02-04&quot; &quot;2021-03-02&quot; &quot;2021-03-02&quot; &quot;2021-03-03&quot; &quot;2021-03-04&quot;
## [6] &quot;2021-03-04&quot;</code></pre>
<p>The <code>as.Date</code> function returns <code>NA</code> if conversion failed, so in this case it
looks like the dates were converted correctly. Now we can save the dates back
into the data frame. We can also do the same thing for the other column of
dates, <code>date_updated</code>:</p>
<div class="sourceCode" id="cb521"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb521-1"><a href="data-forensics-and-cleaning-structured-data.html#cb521-1" aria-hidden="true" tabindex="-1"></a>cl<span class="sc">$</span>date_posted <span class="ot">=</span> dates</span>
<span id="cb521-2"><a href="data-forensics-and-cleaning-structured-data.html#cb521-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb521-3"><a href="data-forensics-and-cleaning-structured-data.html#cb521-3" aria-hidden="true" tabindex="-1"></a>dates <span class="ot">=</span> <span class="fu">as.Date</span>(cl<span class="sc">$</span>date_updated, <span class="st">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)</span>
<span id="cb521-4"><a href="data-forensics-and-cleaning-structured-data.html#cb521-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dates) <span class="co"># some NAs here because the column already contained NAs</span></span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03&quot; NA           NA           NA           NA          
## [6] NA</code></pre>
<div class="sourceCode" id="cb523"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb523-1"><a href="data-forensics-and-cleaning-structured-data.html#cb523-1" aria-hidden="true" tabindex="-1"></a>cl<span class="sc">$</span>date_updated <span class="ot">=</span> dates</span></code></pre></div>
</div>
</div>
<div id="special-values-1" class="section level2" number="14.4">
<h2><span class="header-section-number">14.4</span> Special Values</h2>
<p>R has four special values:</p>
<ol style="list-style-type: decimal">
<li><code>NA</code>, which represents a <em>missing value</em>.</li>
<li><code>Inf</code>, which represents an infinite value.</li>
<li><code>NaN</code>, read as “not a number,” which represents a value that’s not defined
mathematically. For example: <code>0 / 0</code> or <code>sqrt(-1)</code>.</li>
<li><code>NULL</code>, which represents a value that’s not defined in R.</li>
</ol>
<p>Any R vector can contain a missing value <code>NA</code>. Only numeric and complex vectors
can contain <code>Inf</code> and <code>NaN</code> values. Vectors can’t contain <code>NULL</code> values, but
lists can. In a data frame, each column is a vector, so you’ll generally only
have to deal with <code>NA</code>, <code>Inf</code>, and <code>NaN</code>. Missing values are what you’re most
likely to encounter.</p>
<p>Missing values represent unknown information. Using an unknown value in a
computation produces an unknown result, so we say that missing values are
contagious. Here’s an example:</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="data-forensics-and-cleaning-structured-data.html#cb524-1" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">+</span> <span class="dv">3</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>Because of this property, testing equality on missing values with <code>==</code> returns
a missing value! So if we want to check whether an object is the missing value,
we have to use the <code>is.na</code> function instead:</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="data-forensics-and-cleaning-structured-data.html#cb526-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="data-forensics-and-cleaning-structured-data.html#cb528-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(<span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>There are analogous functions <code>is.infinite</code>, <code>is.nan</code>, and <code>is.null</code> for
checking whether an object is one of the other special values.</p>
<p>The first time you work with a data set, it’s a good idea to check for special
values. If too much data is missing, it might not be possible to produce useful
visualizations and statistics.</p>
<p>We can use <code>is.na</code> together with the <code>table</code> function to check how many values
are missing in a column. Let’s try it with some of the columns in the
Craigslist data:</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb530-1"><a href="data-forensics-and-cleaning-structured-data.html#cb530-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">is.na</span>(cl<span class="sc">$</span>parking))</span></code></pre></div>
<pre><code>## 
## FALSE 
##  2987</code></pre>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb532-1"><a href="data-forensics-and-cleaning-structured-data.html#cb532-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">is.na</span>(cl<span class="sc">$</span>sqft))</span></code></pre></div>
<pre><code>## 
## FALSE  TRUE 
##  2640   347</code></pre>
<p>Some people prefer to use <code>is.na</code> with the <code>sum</code> function to count missing
values, so you may see that as well. The <code>summary</code> function is another way to
count missing values, but keep in mind that it only shows the missing values
for some data types:</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="data-forensics-and-cleaning-structured-data.html#cb534-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(cl)</span></code></pre></div>
<pre><code>##     title               text              latitude       longitude     
##  Length:2987        Length:2987        Min.   :33.99   Min.   :-123.2  
##  Class :character   Class :character   1st Qu.:38.55   1st Qu.:-121.5  
##  Mode  :character   Mode  :character   Median :38.59   Median :-121.4  
##                                        Mean   :38.59   Mean   :-121.5  
##                                        3rd Qu.:38.67   3rd Qu.:-121.3  
##                                        Max.   :40.19   Max.   : -76.5  
##                                        NA&#39;s   :3       NA&#39;s   :3       
##      city            date_posted          date_updated            price      
##  Length:2987        Min.   :2021-01-30   Min.   :2021-02-27   Min.   :    1  
##  Class :character   1st Qu.:2021-02-24   1st Qu.:2021-03-02   1st Qu.: 1471  
##  Mode  :character   Median :2021-03-01   Median :2021-03-03   Median : 1730  
##                     Mean   :2021-02-26   Mean   :2021-03-02   Mean   : 1764  
##                     3rd Qu.:2021-03-03   3rd Qu.:2021-03-03   3rd Qu.: 1975  
##                     Max.   :2021-03-04   Max.   :2021-03-04   Max.   :15630  
##                                          NA&#39;s   :1801         NA&#39;s   :35     
##   deleted             sqft            bedrooms       bathrooms      pets     
##  Mode :logical   Min.   :  200.0   Min.   :0.000   Min.   :1.00   both:2511  
##  FALSE:2987      1st Qu.:  681.0   1st Qu.:1.000   1st Qu.:1.00   cats:  46  
##                  Median :  801.0   Median :2.000   Median :1.00   dogs:  31  
##                  Mean   :  881.5   Mean   :1.529   Mean   :1.36   none: 385  
##                  3rd Qu.: 1000.0   3rd Qu.:2.000   3rd Qu.:2.00   NA&#39;s:  14  
##                  Max.   :88900.0   Max.   :7.000   Max.   :4.00              
##                  NA&#39;s   :347       NA&#39;s   :10      NA&#39;s   :10                
##     laundry           parking      craigslist         shp_place        
##  hookup :  18   covered   :1872   Length:2987        Length:2987       
##  in-unit:2030   garage    : 430   Class :character   Class :character  
##  none   :  21   none      :  30   Mode  :character   Mode  :character  
##  shared : 918   off-street: 482                                        
##                 street    : 169                                        
##                 valet     :   4                                        
##                                                                        
##    shp_city          shp_state          shp_county       
##  Length:2987        Length:2987        Length:2987       
##  Class :character   Class :character   Class :character  
##  Mode  :character   Mode  :character   Mode  :character  
##                                                          
##                                                          
##                                                          
## </code></pre>
<p>Finally, you can use <code>is.na</code> with the <code>which</code> function to get the specific
positions of elements that are missing in a vector or column:</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="data-forensics-and-cleaning-structured-data.html#cb536-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(<span class="fu">is.na</span>(cl<span class="sc">$</span>sqft))</span></code></pre></div>
<pre><code>##   [1]   14   17   18   19   29   36   37   46   47   48   69   70   73   79   83
##  [16]   96   97  166  178  189  227  228  229  252  286  293  294  298  303  376
##  [31]  378  410  418  487  490  493  498  499  500  515  600  614  626  653  664
##  [46]  680  681  685  686  687  705  706  708  709  713  720  721  724  733  736
##  [61]  737  740  741  742  744  745  746  750  848  849  852  865  866  878  879
##  [76]  880  881  882  883  884  885  886  887  888  889  890  934 1060 1061 1062
##  [91] 1090 1092 1095 1102 1103 1104 1106 1107 1108 1109 1114 1115 1116 1117 1118
## [106] 1121 1129 1130 1133 1134 1152 1155 1157 1158 1159 1166 1172 1175 1182 1184
## [121] 1186 1208 1236 1237 1259 1270 1275 1276 1283 1302 1315 1320 1321 1322 1323
## [136] 1328 1336 1359 1360 1365 1366 1377 1380 1383 1403 1404 1417 1426 1427 1430
## [151] 1433 1434 1475 1476 1491 1492 1493 1494 1496 1497 1508 1546 1547 1548 1550
## [166] 1551 1552 1561 1565 1589 1590 1592 1593 1600 1636 1637 1638 1657 1658 1659
## [181] 1663 1666 1667 1684 1691 1727 1731 1738 1750 1781 1790 1800 1832 1833 1835
## [196] 1836 1845 1846 1871 1897 1902 1913 1917 1959 1960 2014 2017 2019 2031 2033
## [211] 2036 2038 2040 2114 2115 2118 2119 2120 2124 2147 2148 2152 2163 2164 2165
## [226] 2184 2189 2207 2212 2214 2238 2239 2249 2258 2259 2302 2318 2329 2330 2349
## [241] 2350 2351 2352 2353 2357 2360 2361 2378 2398 2399 2412 2418 2423 2424 2441
## [256] 2444 2445 2448 2460 2481 2484 2485 2490 2491 2497 2508 2515 2516 2517 2527
## [271] 2528 2534 2539 2554 2558 2571 2572 2574 2575 2581 2584 2587 2611 2648 2649
## [286] 2650 2651 2661 2662 2856 2857 2858 2859 2860 2864 2865 2866 2870 2871 2872
## [301] 2878 2879 2882 2883 2886 2887 2888 2889 2890 2895 2896 2898 2901 2905 2906
## [316] 2907 2909 2910 2911 2912 2915 2919 2920 2941 2944 2945 2951 2952 2953 2954
## [331] 2959 2960 2961 2962 2963 2964 2965 2966 2967 2968 2972 2975 2976 2977 2978
## [346] 2979 2980</code></pre>
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb538-1"><a href="data-forensics-and-cleaning-structured-data.html#cb538-1" aria-hidden="true" tabindex="-1"></a>cl[<span class="dv">14</span>, ]</span></code></pre></div>
<pre><code>##                                                      title
## 14 $1,250 / 2br - Amazing location: Midtown 1 Bedroom Apt.
##                                                                                                                                                                                                                                                                                                                                                                                                                          text
## 14 QR Code Link to This Post\n            \n        \nEntrances at front and rear gates are locked for added privacy. This property also offers an enclosed garage with 5 rental parking spaces for residents (all are rented at this moment, but you will be offered the space when it becomes available). Street parking is easy to find, and permits through the city are free and easy to obtain with proof of residence.
##    latitude longitude city date_posted date_updated price deleted sqft bedrooms
## 14       NA        NA &lt;NA&gt;  2021-03-03         &lt;NA&gt;  1250   FALSE   NA        2
##    bathrooms pets laundry parking craigslist shp_place shp_city shp_state
## 14         1 none  hookup  garage sacramento      &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;
##    shp_county
## 14       &lt;NA&gt;</code></pre>
<div id="reasoning-about-missing-values" class="section level3" number="14.4.1">
<h3><span class="header-section-number">14.4.1</span> Reasoning about Missing Values</h3>
<p>If your data contains missing values, it’s important to think about why the
values are missing. Statisticians use two different terms to describe why data
is missing:</p>
<ul>
<li>missing at random (MAR)</li>
<li>missing not at random (MNAR) - causes bias!</li>
</ul>
<p>When values are <em>missing at random</em>, the cause for missingness is not related
to any of the other features. This is rare in practice. For example, if people
in a food survey accidentally overlook some questions.</p>
<p>When values are <em>missing not at random</em>, the cause for missingness depends on
other features. These features may or may not be in the data set. Think of this
as a form of censorship. For example, if people in a food survey refuse to
report how much sugar they ate on days where they ate junk food, data is
missing not at random. Values MNAR can bias an analysis.</p>
<p>The default way to handle missing values in R is to ignore them. This is just a
default, not necessarily the best or even an appropriate way to deal with them.
You can remove missing values from a data set by indexing:</p>
<div class="sourceCode" id="cb540"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb540-1"><a href="data-forensics-and-cleaning-structured-data.html#cb540-1" aria-hidden="true" tabindex="-1"></a>cl_no_sqft_na <span class="ot">=</span> cl[<span class="sc">!</span><span class="fu">is.na</span>(cl<span class="sc">$</span>sqft), ]</span>
<span id="cb540-2"><a href="data-forensics-and-cleaning-structured-data.html#cb540-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb540-3"><a href="data-forensics-and-cleaning-structured-data.html#cb540-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cl_no_sqft_na)</span></code></pre></div>
<pre><code>##                                                                                                        title
## 1   $1,125 / 1br - 550ft2 - 1Bedroom Prime Location -2520 S Limited Access/Gated $1125 Avail Now (2520 S St)
## 2 $1,449 / 1br - 680ft2 - 1x1 with washer &amp; dryer in unit! Move in ready! (The Phoenix/Sacramento/Folsom/SF)
## 3 $1,449 / 1br - 680ft2 - 1x1 with washer &amp; dryer in unit! Move in ready! (The Phoenix/Sacramento/Folsom/SF)
## 4 $1,479 / 1br - 680ft2 - 1x1 with washer &amp; dryer in unit! Move in ready! (The Phoenix/Sacramento/Folsom/SF)
## 5 $1,414 / 1br - 680ft2 - 1x1 with washer &amp; dryer in unit! Move in ready! (The Phoenix/Sacramento/Folsom/SF)
## 6 $1,441 / 1br - 680ft2 - 1x1 with washer &amp; dryer in unit! Move in ready! (The Phoenix/Sacramento/Folsom/SF)
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  text
## 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     QR Code Link to This Post\n            \n        \n* SEE MY OTHER MIDTOWN 1 bedroom apts-text for web site\n*An upstairs apt @ 2520 S is coming available 3/18/21\n*I have 4 apts coming avail in midtown\n*New flooring in lower apt and redone hardwood flooring in upper unit\n*1 Bedroom  lower unit in 20 unit complex (2-10 unit buildings-courtyard in middle) with manager on site\n*Gated front and back\n*9 parking spots in back\n*Laundry on site with new washers and dryers (coin op)\n*Owner pays water/sewer/garbage\n*Wall heat and window air\n*New paint and new Pergo-type wood flooring \n*Updated lighting\n*Nicely maintained building and grounds\n*$500 deposit\n*Non-Smoking/vaping Complex\n*Long time Mgr on Site\n*No dogs\n*Pictures of a like unit\n*Text/call showing Wes  show contact info\n to get copy of video\n*You need to make 3X rent, have good rental history and credit score of 600 or greater to qualify-no dogs.
## 2    QR Code Link to This Post\n            \n        \n Lease our 1x1 Apartment with Che starting at $1449+    Prices Subject to change daily!  \n Apartment Features:  \nPrivate Balconies &amp; Patios \nLuxury Vinyl Wood Flooring \nDesigner Interior Paint \nUpgraded cabinets and countertops \nModern white doors and trim \nModern white base boards  \nEnergy efficient appliances \nSpacious bathroom \nTONS of closet and storage space \nSac State Shuttle-including Sac State Shuttle App! PET FRIENDLY - MEOW! WOOF!   \n\nUpgraded Fitness Centers \nTanning Booth \nHydro Massage Table \nResident Business Center \nResort-Style Pool Furniture \nSparkling Waterfall Wall \nFire pit locations \nBeach Area for lounging \nOutdoor Recreation Area \nSand Volleyball Court \nGrilling Locations   Call today to schedule your tour ... show contact info\n -or- \nStop in to visit Mon - Sat 10:00a - 5:00p for more info! :D  \n\n\nCommunity Amenities:  \nComplete fitness center \nFour sparkling pools  \nLighted tennis courts  \nFull basketball court  \nWhirlpool Jacuzzi  \n24 hour Emergency Maintenance  Hornet Shuttle Access to Sacramento State University  \n Easy Access to Public Transportation (lightrail and bus) \n Easy Access to the American River Trail   And so much more!  \n\n Check us out online @ www.thephoenixsacramento.com TODAY!  \n  Connect with us:   \nFacebook = The Phoenix Apartment Living \nTwitter = @thephoenixlife     Prices and availability are subject to change. Offered prices are starting prices for base rent only. Other charges, conditions, fees, and terms may apply. Equal housing opportunity provider
## 3    QR Code Link to This Post\n            \n        \n Lease our 1x1 Apartment with Che starting at $1449+    Prices Subject to change daily!  \n Apartment Features:  \nPrivate Balconies &amp; Patios \nLuxury Vinyl Wood Flooring \nDesigner Interior Paint \nUpgraded cabinets and countertops \nModern white doors and trim \nModern white base boards  \nEnergy efficient appliances \nSpacious bathroom \nTONS of closet and storage space \nSac State Shuttle-including Sac State Shuttle App! PET FRIENDLY - MEOW! WOOF!   \n\nUpgraded Fitness Centers \nTanning Booth \nHydro Massage Table \nResident Business Center \nResort-Style Pool Furniture \nSparkling Waterfall Wall \nFire pit locations \nBeach Area for lounging \nOutdoor Recreation Area \nSand Volleyball Court \nGrilling Locations   Call today to schedule your tour ... show contact info\n -or- \nStop in to visit Mon - Sat 10:00a - 5:00p for more info! :D  \n\n\nCommunity Amenities:  \nComplete fitness center \nFour sparkling pools  \nLighted tennis courts  \nFull basketball court  \nWhirlpool Jacuzzi  \n24 hour Emergency Maintenance  Hornet Shuttle Access to Sacramento State University  \n Easy Access to Public Transportation (lightrail and bus) \n Easy Access to the American River Trail   And so much more!  \n\n Check us out online @ www.thephoenixsacramento.com TODAY!  \n  Connect with us:   \nFacebook = The Phoenix Apartment Living \nTwitter = @thephoenixlife     Prices and availability are subject to change. Offered prices are starting prices for base rent only. Other charges, conditions, fees, and terms may apply. Equal housing opportunity provider
## 4    QR Code Link to This Post\n            \n        \n Lease our 1x1 Apartment with Che starting at $1479+    Prices Subject to change daily!  \n Apartment Features:  \nPrivate Balconies &amp; Patios \nLuxury Vinyl Wood Flooring \nDesigner Interior Paint \nUpgraded cabinets and countertops \nModern white doors and trim \nModern white base boards  \nEnergy efficient appliances \nSpacious bathroom \nTONS of closet and storage space \nSac State Shuttle-including Sac State Shuttle App! PET FRIENDLY - MEOW! WOOF!   \n\nUpgraded Fitness Centers \nTanning Booth \nHydro Massage Table \nResident Business Center \nResort-Style Pool Furniture \nSparkling Waterfall Wall \nFire pit locations \nBeach Area for lounging \nOutdoor Recreation Area \nSand Volleyball Court \nGrilling Locations   Call today to schedule your tour ... show contact info\n -or- \nStop in to visit Mon - Sat 10:00a - 5:00p for more info! :D  \n\n\nCommunity Amenities:  \nComplete fitness center \nFour sparkling pools  \nLighted tennis courts  \nFull basketball court  \nWhirlpool Jacuzzi  \n24 hour Emergency Maintenance  Hornet Shuttle Access to Sacramento State University  \n Easy Access to Public Transportation (lightrail and bus) \n Easy Access to the American River Trail   And so much more!  \n\n Check us out online @ www.thephoenixsacramento.com TODAY!  \n  Connect with us:   \nFacebook = The Phoenix Apartment Living \nTwitter = @thephoenixlife     Prices and availability are subject to change. Offered prices are starting prices for base rent only. Other charges, conditions, fees, and terms may apply. Equal housing opportunity provider
## 5 QR Code Link to This Post\n            \n        \n Lease our 1x1 Apartment with Juliet starting at $1414+    Prices Subject to change daily!  \n Apartment Features:  \nPrivate Balconies &amp; Patios \nLuxury Vinyl Wood Flooring \nDesigner Interior Paint \nUpgraded cabinets and countertops \nModern white doors and trim \nModern white base boards  \nEnergy efficient appliances \nSpacious bathroom \nTONS of closet and storage space \nSac State Shuttle-including Sac State Shuttle App! PET FRIENDLY - MEOW! WOOF!   \n\nUpgraded Fitness Centers \nTanning Booth \nHydro Massage Table \nResident Business Center \nResort-Style Pool Furniture \nSparkling Waterfall Wall \nFire pit locations \nBeach Area for lounging \nOutdoor Recreation Area \nSand Volleyball Court \nGrilling Locations   Call today to schedule your tour ... show contact info\n -or- \nStop in to visit Mon - Sat 10:00a - 5:00p for more info! :D  \n\n\nCommunity Amenities:  \nComplete fitness center \nFour sparkling pools  \nLighted tennis courts  \nFull basketball court  \nWhirlpool Jacuzzi  \n24 hour Emergency Maintenance  Hornet Shuttle Access to Sacramento State University  \n Easy Access to Public Transportation (lightrail and bus) \n Easy Access to the American River Trail   And so much more!  \n\n Check us out online @ www.thephoenixsacramento.com TODAY!  \n  Connect with us:   \nFacebook = The Phoenix Apartment Living \nTwitter = @thephoenixlife     Prices and availability are subject to change. Offered prices are starting prices for base rent only. Other charges, conditions, fees, and terms may apply. Equal housing opportunity provider
## 6    QR Code Link to This Post\n            \n        \n Lease our 1x1 Apartment with Che starting at $1441+    Prices Subject to change daily!  \n Apartment Features:  \nPrivate Balconies &amp; Patios \nLuxury Vinyl Wood Flooring \nDesigner Interior Paint \nUpgraded cabinets and countertops \nModern white doors and trim \nModern white base boards  \nEnergy efficient appliances \nSpacious bathroom \nTONS of closet and storage space \nSac State Shuttle-including Sac State Shuttle App! PET FRIENDLY - MEOW! WOOF!   \n\nUpgraded Fitness Centers \nTanning Booth \nHydro Massage Table \nResident Business Center \nResort-Style Pool Furniture \nSparkling Waterfall Wall \nFire pit locations \nBeach Area for lounging \nOutdoor Recreation Area \nSand Volleyball Court \nGrilling Locations   Call today to schedule your tour ... show contact info\n -or- \nStop in to visit Mon - Sat 10:00a - 5:00p for more info! :D  \n\n\nCommunity Amenities:  \nComplete fitness center \nFour sparkling pools  \nLighted tennis courts  \nFull basketball court  \nWhirlpool Jacuzzi  \n24 hour Emergency Maintenance  Hornet Shuttle Access to Sacramento State University  \n Easy Access to Public Transportation (lightrail and bus) \n Easy Access to the American River Trail   And so much more!  \n\n Check us out online @ www.thephoenixsacramento.com TODAY!  \n  Connect with us:   \nFacebook = The Phoenix Apartment Living \nTwitter = @thephoenixlife     Prices and availability are subject to change. Offered prices are starting prices for base rent only. Other charges, conditions, fees, and terms may apply. Equal housing opportunity provider
##   latitude longitude                             city date_posted date_updated
## 1  38.5728 -121.4675                        2520 S St  2021-02-04   2021-03-03
## 2  38.5511 -121.4068 The Phoenix/Sacramento/Folsom/SF  2021-03-02         &lt;NA&gt;
## 3  38.5511 -121.4068 The Phoenix/Sacramento/Folsom/SF  2021-03-02         &lt;NA&gt;
## 4  38.5511 -121.4068 The Phoenix/Sacramento/Folsom/SF  2021-03-03         &lt;NA&gt;
## 5  38.5511 -121.4068 The Phoenix/Sacramento/Folsom/SF  2021-03-04         &lt;NA&gt;
## 6  38.5511 -121.4068 The Phoenix/Sacramento/Folsom/SF  2021-03-04         &lt;NA&gt;
##   price deleted sqft bedrooms bathrooms pets laundry    parking craigslist
## 1  1125   FALSE  550        1         1 &lt;NA&gt;  shared off-street sacramento
## 2  1449   FALSE  680        1         1 both in-unit    covered sacramento
## 3  1449   FALSE  680        1         1 both in-unit    covered sacramento
## 4  1479   FALSE  680        1         1 both in-unit    covered sacramento
## 5  1414   FALSE  680        1         1 both in-unit    covered sacramento
## 6  1441   FALSE  680        1         1 both in-unit    covered sacramento
##    shp_place   shp_city shp_state shp_county
## 1 Sacramento Sacramento        CA Sacramento
## 2 Sacramento Sacramento        CA Sacramento
## 3 Sacramento Sacramento        CA Sacramento
## 4 Sacramento Sacramento        CA Sacramento
## 5 Sacramento Sacramento        CA Sacramento
## 6 Sacramento Sacramento        CA Sacramento</code></pre>
<p>The <code>na.omit</code> function is less precise than indexing, because it removes rows
that have a missing value in <em>any</em> column. This means lots of information gets
lost.</p>
<p>Another way to handle missing values is to <em>impute</em>, or fill in, the values
with estimates based on other data in the data set. We won’t get into the
details of how to impute missing values here, since it is a fairly deep
subject. Generally it is safe to impute MAR values, but not MNAR values.</p>
</div>
</div>
<div id="outliers" class="section level2" number="14.5">
<h2><span class="header-section-number">14.5</span> Outliers</h2>
<p>An <em>outlier</em> is an anomalous or extreme value in a data set. We can picture
this as a value that’s far away from most of the other values. Sometimes
outliers are a natural part of the data set. In other situations, outliers can
indicate errors in how the data were measured, recorded, or cleaned.</p>
<p>There’s no specific definition for “extreme” or “far away”. A good starting
point for detecting outliers is to make a plot that shows how the values are
distributed. Box plots and density plots work especially well for this:</p>
<div class="sourceCode" id="cb542"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb542-1"><a href="data-forensics-and-cleaning-structured-data.html#cb542-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb542-2"><a href="data-forensics-and-cleaning-structured-data.html#cb542-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb542-3"><a href="data-forensics-and-cleaning-structured-data.html#cb542-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cl, <span class="fu">aes</span>(<span class="at">x =</span> sqft)) <span class="sc">+</span> <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 347 rows containing non-finite values (stat_boxplot).</code></pre>
<p><img src="18_data-forensics-structured-data_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<p>Statisticians tend to use the rule of thumb that any value more than 3 standard
deviations away from the mean is an outlier. You can use the <code>scale</code> function
to compute how many standard deviations the elements in a column are from their
mean:</p>
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb544-1"><a href="data-forensics-and-cleaning-structured-data.html#cb544-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">=</span> <span class="fu">scale</span>(cl<span class="sc">$</span>sqft)</span>
<span id="cb544-2"><a href="data-forensics-and-cleaning-structured-data.html#cb544-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(z)</span></code></pre></div>
<pre><code>##            [,1]
## [1,] -0.1910838
## [2,] -0.1161393
## [3,] -0.1161393
## [4,] -0.1161393
## [5,] -0.1161393
## [6,] -0.1161393</code></pre>
<div class="sourceCode" id="cb546"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb546-1"><a href="data-forensics-and-cleaning-structured-data.html#cb546-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(z <span class="sc">&lt;=</span> <span class="sc">-</span><span class="dv">3</span> <span class="sc">|</span> <span class="dv">3</span> <span class="sc">&lt;=</span> z)</span></code></pre></div>
<pre><code>## [1] 1261 2461</code></pre>
<p>Be careful to think about what your specific data set measures, as this
definition isn’t appropriate in every situation.</p>
<p>How can you handle outliers? First, try inspecting other features from the row
to determine whether the outlier is a valid measurement or an error. When an
outlier is valid, keep it.</p>
<p>If the outlier interferes with a plot you want to make, you can adjust the x
and y limits on plots as needed to “ignore” the outlier. Make sure to mention
this in the plot’s title or caption.</p>
<p>When an outlier is not valid, first try to correct it. For example:</p>
<ul>
<li>Correct with a different covariate from the <em>same observation</em>.</li>
<li>Estimate with a mean or median of similar observations. This is another
example of imputing values.</li>
</ul>
<p>For example, in the Craigslist data, we can use the <code>text</code> column to try to
correct outliers:</p>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb548-1"><a href="data-forensics-and-cleaning-structured-data.html#cb548-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(cl<span class="sc">$</span>text[<span class="dv">1261</span>])</span></code></pre></div>
<pre><code>## QR Code Link to This Post
##             
##         
## Villages of the Galleria
## 701 Gibson Drive, Roseville, CA, 95678
## Want more information? Follow this link:
## http://rcmi.aptdetails.com/49u13n
## Call Now:  show contact info
## 
## Roseville&#39;s Premier Luxury Condominium Rentals
## This is a 1 Bedroom, 1 Bath, approximately 819 Sq. Ft. 
## Signature Collection
## This collection of fully renovated homes is limited to a select few. These unique homes are renting quickly. 
## The beautifully remodeled floor plan offers an entertainment style kitchen, gracious living area, formal dining room with access to your outdoor balcony, designer two tone paint with crown molding, spacious bathroom with relaxing oval bath tub, linen closet and large vanity. The bedroom offers a sliding glass door giving you additional access to the private balcony over looking the picturesque courtyard. 
## Brand New Featured Interiors:
## Entertainment Style Kitchen
## •    Beautiful warm espresso custom built cabinets with brush nickel hardware
## •    Opulent Granite Countertops with backsplash
## •    Satin finish under mount sink with disposal and upgraded Moen faucet and fixtures
## •    Stainless steel appliances, spacious built in microwave, multi-cycle dishwasher and self-cleaning oven
## •    Plant/décor cabinet ledge 
## •    Spacious pantry and personalized custom shelving in all cabinets
## •    Attractive bright recessed lighting
## •    Private in home personal laundry room with full size washer &amp; dryer
## Living and Dining
## •    Hand laid tile resembling hard wood flooring 
## •    Designer two-tone paint with white accent crown molding and baseboards
## •    Upgraded wooden style blinds
## •    Dual pane windows featuring custom framed molding
## •    Spacious coat closet
## Bath
## •    Oval Roman soaking tub with surround Opulent granite walls 
## •    Warm espresso custom built cabinets with brush nickel hardware
## •    Spacious linen closet and personal cabinet storage
## •    Hand selected Opulent Granite countertops
## •    Unique hand crafted above counter sink
## •    Contemporary waterfall faucet
## •    Custom wood-look framed mirror
## •    White glass contemporary light fixture with brush nickel base
## •    Upgraded brush nickel accents (towel bars and holders)
## •    Hand laid tile resembling hard wood flooring 
## Bedroom and Closet
## •    Rich plush carpeting
## •    Spacious walk in closets with personalized built in custom organizers and compartments
## Other Features and Amenities 
## •    Brilliant bright recessed lighting
## •    Central heat and air
## •    Private balcony or terrace
## •    Pre-wired for high-speed internet, multi-line phone and cable
## •    Brushed nickel hardware accents (door knobs, latches, deadbolts, locks, door knocker and light fixtures)
## •    Covered parking
## •    Additional patio storage
## Select Homes Offer
## •    Private detached garage
## •    Additional linen or storage space
## •    Cozy Gas Fireplace with carved stone-look mantel and molding
## Style, sophistication, beautiful landscaping and stunning architecture accent the Villages of the 
## Galleria apartment homes, located in dynamic Roseville, California. Villages of the Galleria is just minutes from the Galleria Mall and Fountains at Roseville and offers easy freeway access to downtown, Sacramento International Airport, Arco Arena and major employers such as NEC, Oracle and HP. Select from a variety of one, two or three bedroom floor plans. All apartment homes offer gracious living areas with designer two-tone paint, crown molding, large walk-in closets and in home full size washer and dryer. Enjoy the many fine conveniences offered, such as an expansive fitness center, executive business center and refreshing pool. Villages of the Galleria is the perfect place to call home. 
## Features
## - Contemporary Recessed Lighting 
## - Built-In Linen Closet in Bathroom * 
## - Entertainment Style Kitchens 
## - Private Balconies and Patios 
## - Crown Molding Accents 
## - Six-Panel Interior Doors 
## - Custom Maple-Front Cabinetry 
## - Nine-Foot Ceilings 
## - Microwave 
## - Pre-Wired for High Speed Internet 
## - Private Garages * 
## - Full Size Washer/Dryer 
## - Pantry * 
## - Oval Roman Soaking Tub * 
## - Cozy Gas Fireplace with Mantel * 
## - Covered Parking * 
## - Spacious Walk-In Closet(s) * 
## - Energy-Saving Multi-Cycle Dishwasher 
## Community Amenities
## - Community Garden 
## - Executive Business Center 
## - Sand Volleyball 
## - Close to Shopping 
## - Beautiful Landscaped Court Yards 
## - Playground 
## - Fitness Center 
## - Clubhouse 
## - Open Air Cabanas 
## - Easy Access to Freeways 
## - Pool and Spa 
## - Gated Community 
## - Professional Onsite Management w/ 24-Hour Emergency Maintenance 
## - Picnic Area with Barbecue 
## Office Hours
## Monday - Friday 9:00 AM - 6:00 PM
## Saturday 10:00 AM - 5:00 PM
## Sunday 12:00 PM - 5:00 PM 
## Pet Policy
## Maximum of 2 pets cats or dogs. No weight limit. Additional $25 rent per month and additional $500 deposit per pet. Inquire about our breed restrictions. 
## Equal Housing Opportunity 
## VJWLzl1wXG</code></pre>
<p>Based on the text, this apartment is 819 square feet, not 8190 square feet. So
we can reassign the value:</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="data-forensics-and-cleaning-structured-data.html#cb550-1" aria-hidden="true" tabindex="-1"></a>cl<span class="sc">$</span>sqft[<span class="dv">1261</span>] <span class="ot">=</span> <span class="dv">819</span></span></code></pre></div>
<p>If other features don’t help with correction, try getting information from
external sources. If you can’t correct the outlier but know it’s invalid,
replace it with a missing value <code>NA</code>.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="check-for-equal-variances---these-are-close-enough.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-forensics-and-cleaning-unstructured-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ucdavisdatalab/adventures_in_data_science/edit/master/18_data-forensics-structured-data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ucdavisdatalab/adventures_in_data_science/blob/master/18_data-forensics-structured-data.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
